import{S as ge,e as me,s as be,y as we,o as R,Q as Fe,h as C,p as O,w as z,r as P,u as G,v as Q,k as N,C as Le,a5 as Me,F as L,G as M,H as V,a7 as Ve,R as le,E as te,I as Z,m as E,g as d,K as q,N as F,j as I,aq as Ae,O as de,M as X,B as Te,t as ke,x as ve,Z as We,af as Xe,V as Ke,W as Oe}from"./index-5cdb442e.js";import{n as Pe,B as Qe}from"./Button-f42ee09a.js";import{B as Ue}from"./BlockLabel-2ed5bbe8.js";import{I as Ze}from"./IconButton-50a107eb.js";import{E as Je}from"./Empty-75d72fd6.js";import{S as Ye}from"./ShareButton-a477dffe.js";import{M as ye}from"./ModifyUpload-f917f9cb.js";import{D as pe}from"./Download-35128de2.js";import{I as je}from"./Image-2ec9e753.js";import{u as xe}from"./utils-e6176ac6.js";import"./Undo-55afb8df.js";async function $e(l){return l?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(l.map(async([e,i])=>e===null?"":await xe(e.data,"url")))).map(e=>`<img src="${e}" style="height: 400px" />`).join("")}</div>`:""}const{window:ze}=Me;function ie(l,t,e){const i=l.slice();return i[39]=t[e],i[41]=e,i}function ne(l,t,e){const i=l.slice();return i[42]=t[e],i[43]=t,i[41]=e,i}function oe(l){let t,e;return t=new Ue({props:{show_label:l[0],Icon:je,label:l[1]||"Gallery"}}),{c(){L(t.$$.fragment)},m(i,n){M(t,i,n),e=!0},p(i,n){const s={};n[0]&1&&(s.show_label=i[0]),n[0]&2&&(s.label=i[1]||"Gallery"),t.$set(s)},i(i){e||(z(t.$$.fragment,i),e=!0)},o(i){G(t.$$.fragment,i),e=!1},d(i){V(t,i)}}}function el(l){let t,e,i,n,s,r,o=l[12]!==null&&l[6]&&ae(l),a=l[8]&&ue(l),m=Z(l[11]),c=[];for(let _=0;_<m.length;_+=1)c[_]=ce(ie(l,m,_));return{c(){o&&o.c(),t=R(),e=E("div"),i=E("div"),a&&a.c(),n=R();for(let _=0;_<c.length;_+=1)c[_].c();d(i,"class","grid-container svelte-1b19cri"),q(i,"--grid-cols",l[3]),q(i,"--grid-rows",l[4]),q(i,"--object-fit",l[7]),q(i,"height",l[5]),F(i,"pt-6",l[0]),d(e,"class","grid-wrap svelte-1b19cri"),we(()=>l[34].call(e)),F(e,"fixed-height",!l[5]||l[5]=="auto")},m(_,f){o&&o.m(_,f),C(_,t,f),C(_,e,f),I(e,i),a&&a.m(i,null),I(i,n);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(i,null);s=Ae(e,l[34].bind(e)),r=!0},p(_,f){if(_[12]!==null&&_[6]?o?(o.p(_,f),f[0]&4160&&z(o,1)):(o=ae(_),o.c(),z(o,1),o.m(t.parentNode,t)):o&&(P(),G(o,1,1,()=>{o=null}),Q()),_[8]?a?(a.p(_,f),f[0]&256&&z(a,1)):(a=ue(_),a.c(),z(a,1),a.m(i,n)):a&&(P(),G(a,1,1,()=>{a=null}),Q()),f[0]&6144){m=Z(_[11]);let g;for(g=0;g<m.length;g+=1){const k=ie(_,m,g);c[g]?c[g].p(k,f):(c[g]=ce(k),c[g].c(),c[g].m(i,null))}for(;g<c.length;g+=1)c[g].d(1);c.length=m.length}(!r||f[0]&8)&&q(i,"--grid-cols",_[3]),(!r||f[0]&16)&&q(i,"--grid-rows",_[4]),(!r||f[0]&128)&&q(i,"--object-fit",_[7]),(!r||f[0]&32)&&q(i,"height",_[5]),(!r||f[0]&1)&&F(i,"pt-6",_[0]),(!r||f[0]&32)&&F(e,"fixed-height",!_[5]||_[5]=="auto")},i(_){r||(z(o),z(a),r=!0)},o(_){G(o),G(a),r=!1},d(_){_&&(N(t),N(e)),o&&o.d(_),a&&a.d(),de(c,_),s()}}}function ll(l){let t,e;return t=new Je({props:{unpadded_box:!0,size:"large",$$slots:{default:[tl]},$$scope:{ctx:l}}}),{c(){L(t.$$.fragment)},m(i,n){M(t,i,n),e=!0},p(i,n){const s={};n[1]&8192&&(s.$$scope={dirty:n,ctx:i}),t.$set(s)},i(i){e||(z(t.$$.fragment,i),e=!0)},o(i){G(t.$$.fragment,i),e=!1},d(i){V(t,i)}}}function ae(l){let t,e,i,n,s,r,o,a,m,c,_,f,g,k,A,v=l[9]&&se(l);n=new ye({props:{i18n:l[10],absolute:!1}}),n.$on("clear",l[26]);let B=l[11][l[12]].caption&&fe(l),H=Z(l[11]),D=[];for(let b=0;b<H.length;b+=1)D[b]=re(ne(l,H,b));return{c(){t=E("div"),e=E("div"),v&&v.c(),i=R(),L(n.$$.fragment),s=R(),r=E("img"),c=R(),B&&B.c(),_=R(),f=E("div");for(let b=0;b<D.length;b+=1)D[b].c();d(e,"class","icon-buttons svelte-1b19cri"),d(r,"data-testid","detailed-image"),X(r.src,o=l[11][l[12]].image.data)||d(r,"src",o),d(r,"alt",a=l[11][l[12]].caption||""),d(r,"title",m=l[11][l[12]].caption||null),q(r,"height","calc(100% - "+l[11][l[12]].caption+" ? '80px' : '60px'})"),d(r,"loading","lazy"),d(r,"class","svelte-1b19cri"),F(r,"with-caption",!!l[11][l[12]].caption),d(f,"class","thumbnails scroll-hide svelte-1b19cri"),d(f,"data-testid","container_el"),d(t,"class","preview svelte-1b19cri")},m(b,j){C(b,t,j),I(t,e),v&&v.m(e,null),I(e,i),M(n,e,null),I(t,s),I(t,r),I(t,c),B&&B.m(t,null),I(t,_),I(t,f);for(let S=0;S<D.length;S+=1)D[S]&&D[S].m(f,null);l[30](f),g=!0,k||(A=[O(r,"click",l[27]),O(t,"keydown",l[18])],k=!0)},p(b,j){b[9]?v?(v.p(b,j),j[0]&512&&z(v,1)):(v=se(b),v.c(),z(v,1),v.m(e,i)):v&&(P(),G(v,1,1,()=>{v=null}),Q());const S={};if(j[0]&1024&&(S.i18n=b[10]),n.$set(S),(!g||j[0]&6144&&!X(r.src,o=b[11][b[12]].image.data))&&d(r,"src",o),(!g||j[0]&6144&&a!==(a=b[11][b[12]].caption||""))&&d(r,"alt",a),(!g||j[0]&6144&&m!==(m=b[11][b[12]].caption||null))&&d(r,"title",m),(!g||j[0]&6144)&&q(r,"height","calc(100% - "+b[11][b[12]].caption+" ? '80px' : '60px'})"),(!g||j[0]&6144)&&F(r,"with-caption",!!b[11][b[12]].caption),b[11][b[12]].caption?B?B.p(b,j):(B=fe(b),B.c(),B.m(t,_)):B&&(B.d(1),B=null),j[0]&14336){H=Z(b[11]);let w;for(w=0;w<H.length;w+=1){const T=ne(b,H,w);D[w]?D[w].p(T,j):(D[w]=re(T),D[w].c(),D[w].m(f,null))}for(;w<D.length;w+=1)D[w].d(1);D.length=H.length}},i(b){g||(z(v),z(n.$$.fragment,b),g=!0)},o(b){G(v),G(n.$$.fragment,b),g=!1},d(b){b&&N(t),v&&v.d(),V(n),B&&B.d(),de(D,b),l[30](null),k=!1,Te(A)}}}function se(l){let t,e,i,n;return e=new Ze({props:{Icon:pe,label:l[10]("common.download")}}),{c(){t=E("a"),L(e.$$.fragment),d(t,"href",i=he(l[2][l[12]])),d(t,"target",window.__is_colab__?"_blank":null),d(t,"download","image"),d(t,"class","svelte-1b19cri")},m(s,r){C(s,t,r),M(e,t,null),n=!0},p(s,r){const o={};r[0]&1024&&(o.label=s[10]("common.download")),e.$set(o),(!n||r[0]&4100&&i!==(i=he(s[2][s[12]])))&&d(t,"href",i)},i(s){n||(z(e.$$.fragment,s),n=!0)},o(s){G(e.$$.fragment,s),n=!1},d(s){s&&N(t),V(e)}}}function fe(l){let t,e=l[11][l[12]].caption+"",i;return{c(){t=E("div"),i=ke(e),d(t,"class","caption svelte-1b19cri")},m(n,s){C(n,t,s),I(t,i)},p(n,s){s[0]&6144&&e!==(e=n[11][n[12]].caption+"")&&ve(i,e)},d(n){n&&N(t)}}}function re(l){let t,e,i,n,s,r,o=l[41],a,m;const c=()=>l[28](t,o),_=()=>l[28](null,o);function f(){return l[29](l[41])}return{c(){t=E("button"),e=E("img"),r=R(),X(e.src,i=l[42].image.data)||d(e,"src",i),d(e,"title",n=l[42].caption||null),d(e,"alt",s=l[42].caption||null),d(e,"loading","lazy"),d(e,"class","svelte-1b19cri"),d(t,"class","thumbnail-item thumbnail-small svelte-1b19cri"),F(t,"selected",l[12]===l[41])},m(g,k){C(g,t,k),I(t,e),I(t,r),c(),a||(m=O(t,"click",f),a=!0)},p(g,k){l=g,k[0]&2048&&!X(e.src,i=l[42].image.data)&&d(e,"src",i),k[0]&2048&&n!==(n=l[42].caption||null)&&d(e,"title",n),k[0]&2048&&s!==(s=l[42].caption||null)&&d(e,"alt",s),o!==l[41]&&(_(),o=l[41],c()),k[0]&4096&&F(t,"selected",l[12]===l[41])},d(g){g&&N(t),_(),a=!1,m()}}}function ue(l){let t,e,i;return e=new Ye({props:{i18n:l[10],value:l[11],formatter:$e}}),e.$on("share",l[31]),e.$on("error",l[32]),{c(){t=E("div"),L(e.$$.fragment),d(t,"class","icon-button svelte-1b19cri")},m(n,s){C(n,t,s),M(e,t,null),i=!0},p(n,s){const r={};s[0]&1024&&(r.i18n=n[10]),s[0]&2048&&(r.value=n[11]),e.$set(r)},i(n){i||(z(e.$$.fragment,n),i=!0)},o(n){G(e.$$.fragment,n),i=!1},d(n){n&&N(t),V(e)}}}function _e(l){let t,e=l[39].caption+"",i;return{c(){t=E("div"),i=ke(e),d(t,"class","caption-label svelte-1b19cri")},m(n,s){C(n,t,s),I(t,i)},p(n,s){s[0]&2048&&e!==(e=n[39].caption+"")&&ve(i,e)},d(n){n&&N(t)}}}function ce(l){let t,e,i,n,s,r,o,a,m=l[39].caption&&_e(l);function c(){return l[33](l[41])}return{c(){t=E("button"),e=E("img"),s=R(),m&&m.c(),r=R(),d(e,"alt",i=l[39].caption||""),X(e.src,n=typeof l[39].image=="string"?l[39].image:l[39].image.data)||d(e,"src",n),d(e,"loading","lazy"),d(e,"class","svelte-1b19cri"),d(t,"class","thumbnail-item thumbnail-lg svelte-1b19cri"),F(t,"selected",l[12]===l[41])},m(_,f){C(_,t,f),I(t,e),I(t,s),m&&m.m(t,null),I(t,r),o||(a=O(t,"click",c),o=!0)},p(_,f){l=_,f[0]&2048&&i!==(i=l[39].caption||"")&&d(e,"alt",i),f[0]&2048&&!X(e.src,n=typeof l[39].image=="string"?l[39].image:l[39].image.data)&&d(e,"src",n),l[39].caption?m?m.p(l,f):(m=_e(l),m.c(),m.m(t,r)):m&&(m.d(1),m=null),f[0]&4096&&F(t,"selected",l[12]===l[41])},d(_){_&&N(t),m&&m.d(),o=!1,a()}}}function tl(l){let t,e;return t=new je({}),{c(){L(t.$$.fragment)},m(i,n){M(t,i,n),e=!0},i(i){e||(z(t.$$.fragment,i),e=!0)},o(i){G(t.$$.fragment,i),e=!1},d(i){V(t,i)}}}function il(l){let t,e,i,n,s,r,o;we(l[25]);let a=l[0]&&oe(l);const m=[ll,el],c=[];function _(f,g){return f[2]===null||f[11]===null||f[11].length===0?0:1}return e=_(l),i=c[e]=m[e](l),{c(){a&&a.c(),t=R(),i.c(),n=Fe()},m(f,g){a&&a.m(f,g),C(f,t,g),c[e].m(f,g),C(f,n,g),s=!0,r||(o=O(ze,"resize",l[25]),r=!0)},p(f,g){f[0]?a?(a.p(f,g),g[0]&1&&z(a,1)):(a=oe(f),a.c(),z(a,1),a.m(t.parentNode,t)):a&&(P(),G(a,1,1,()=>{a=null}),Q());let k=e;e=_(f),e===k?c[e].p(f,g):(P(),G(c[k],1,1,()=>{c[k]=null}),Q(),i=c[e],i?i.p(f,g):(i=c[e]=m[e](f),i.c()),z(i,1),i.m(n.parentNode,n))},i(f){s||(z(a),z(i),s=!0)},o(f){G(a),G(i),s=!1},d(f){f&&(N(t),N(n)),a&&a.d(f),c[e].d(f),r=!1,o()}}}function nl(l){return typeof l=="object"&&l!==null&&"data"in l}function he(l){return nl(l)?l.data:typeof l=="string"?l:""}function ol(l,t,e){let i,n,{show_label:s=!0}=t,{label:r}=t,{root:o=""}=t,{root_url:a=null}=t,{value:m=null}=t,{grid_cols:c=[2]}=t,{grid_rows:_=void 0}=t,{height:f="auto"}=t,{preview:g}=t,{allow_preview:k=!0}=t,{object_fit:A="cover"}=t,{show_share_button:v=!1}=t,{show_download_button:B=!1}=t,{i18n:H}=t;const D=Le();let b=!0,j=null,S=m,w=g&&m?.length?0:null,T=w;function U(u){const K=u.target,y=u.clientX,p=K.offsetWidth/2;y<p?e(12,w=i):e(12,w=n)}function J(u){switch(u.code){case"Escape":u.preventDefault(),e(12,w=null);break;case"ArrowLeft":u.preventDefault(),e(12,w=i);break;case"ArrowRight":u.preventDefault(),e(12,w=n);break}}let h=[],W;async function Be(u){if(typeof u!="number")return;await Ve(),h[u].focus();const{left:K,width:y}=W.getBoundingClientRect(),{left:$,width:p}=h[u].getBoundingClientRect(),ee=$-K+p/2-y/2+W.scrollLeft;W?.scrollTo({left:ee<0?0:ee,behavior:"smooth"})}let Y=0,x=0;function De(){e(16,x=ze.innerHeight)}const Ge=()=>e(12,w=null),Ie=u=>U(u);function Se(u,K){le[u?"unshift":"push"](()=>{h[K]=u,e(13,h)})}const Ee=u=>e(12,w=u);function He(u){le[u?"unshift":"push"](()=>{W=u,e(14,W)})}function Ce(u){te.call(this,l,u)}function Ne(u){te.call(this,l,u)}const Re=u=>e(12,w=u);function qe(){Y=this.clientHeight,e(15,Y)}return l.$$set=u=>{"show_label"in u&&e(0,s=u.show_label),"label"in u&&e(1,r=u.label),"root"in u&&e(19,o=u.root),"root_url"in u&&e(20,a=u.root_url),"value"in u&&e(2,m=u.value),"grid_cols"in u&&e(3,c=u.grid_cols),"grid_rows"in u&&e(4,_=u.grid_rows),"height"in u&&e(5,f=u.height),"preview"in u&&e(21,g=u.preview),"allow_preview"in u&&e(6,k=u.allow_preview),"object_fit"in u&&e(7,A=u.object_fit),"show_share_button"in u&&e(8,v=u.show_share_button),"show_download_button"in u&&e(9,B=u.show_download_button),"i18n"in u&&e(10,H=u.i18n)},l.$$.update=()=>{l.$$.dirty[0]&4194308&&e(22,b=m==null||m.length==0?!0:b),l.$$.dirty[0]&1572868&&e(11,j=m===null?null:m.map(u=>({image:Pe(u.image,o,a),caption:u.caption}))),l.$$.dirty[0]&14684164&&S!==m&&(b?(e(12,w=g&&m?.length?0:null),e(22,b=!1)):e(12,w=w!==null&&m!==null&&w<m.length?w:null),e(23,S=m)),l.$$.dirty[0]&6144&&(i=((w??0)+(j?.length??0)-1)%(j?.length??0)),l.$$.dirty[0]&6144&&(n=((w??0)+1)%(j?.length??0)),l.$$.dirty[0]&16783360&&w!==T&&(e(24,T=w),w!==null&&D("select",{index:w,value:j?.[w].caption})),l.$$.dirty[0]&4160&&k&&Be(w)},[s,r,m,c,_,f,k,A,v,B,H,j,w,h,W,Y,x,U,J,o,a,g,b,S,T,De,Ge,Ie,Se,Ee,He,Ce,Ne,Re,qe]}class al extends ge{constructor(t){super(),me(this,t,ol,il,be,{show_label:0,label:1,root:19,root_url:20,value:2,grid_cols:3,grid_rows:4,height:5,preview:21,allow_preview:6,object_fit:7,show_share_button:8,show_download_button:9,i18n:10},null,[-1,-1])}}function sl(l){let t,e,i,n;const s=[{i18n:l[20].i18n},l[0]];let r={};for(let o=0;o<s.length;o+=1)r=We(r,s[o]);return t=new Xe({props:r}),i=new al({props:{label:l[2],value:l[8],show_label:l[1],root:l[3],root_url:l[4],grid_cols:l[12],grid_rows:l[13],height:l[14],preview:l[15],object_fit:l[17],allow_preview:l[16],show_share_button:l[18],show_download_button:l[19],i18n:l[20].i18n}}),i.$on("select",l[21]),i.$on("share",l[22]),i.$on("error",l[23]),{c(){L(t.$$.fragment),e=R(),L(i.$$.fragment)},m(o,a){M(t,o,a),C(o,e,a),M(i,o,a),n=!0},p(o,a){const m=a&1048577?Ke(s,[a&1048576&&{i18n:o[20].i18n},a&1&&Oe(o[0])]):{};t.$set(m);const c={};a&4&&(c.label=o[2]),a&256&&(c.value=o[8]),a&2&&(c.show_label=o[1]),a&8&&(c.root=o[3]),a&16&&(c.root_url=o[4]),a&4096&&(c.grid_cols=o[12]),a&8192&&(c.grid_rows=o[13]),a&16384&&(c.height=o[14]),a&32768&&(c.preview=o[15]),a&131072&&(c.object_fit=o[17]),a&65536&&(c.allow_preview=o[16]),a&262144&&(c.show_share_button=o[18]),a&524288&&(c.show_download_button=o[19]),a&1048576&&(c.i18n=o[20].i18n),i.$set(c)},i(o){n||(z(t.$$.fragment,o),z(i.$$.fragment,o),n=!0)},o(o){G(t.$$.fragment,o),G(i.$$.fragment,o),n=!1},d(o){o&&N(e),V(t,o),V(i,o)}}}function fl(l){let t,e;return t=new Qe({props:{visible:l[7],variant:"solid",padding:!1,elem_id:l[5],elem_classes:l[6],container:l[9],scale:l[10],min_width:l[11],allow_overflow:!1,height:typeof l[14]=="number"?l[14]:void 0,$$slots:{default:[sl]},$$scope:{ctx:l}}}),{c(){L(t.$$.fragment)},m(i,n){M(t,i,n),e=!0},p(i,[n]){const s={};n&128&&(s.visible=i[7]),n&32&&(s.elem_id=i[5]),n&64&&(s.elem_classes=i[6]),n&512&&(s.container=i[9]),n&1024&&(s.scale=i[10]),n&2048&&(s.min_width=i[11]),n&16384&&(s.height=typeof i[14]=="number"?i[14]:void 0),n&18870559&&(s.$$scope={dirty:n,ctx:i}),t.$set(s)},i(i){e||(z(t.$$.fragment,i),e=!0)},o(i){G(t.$$.fragment,i),e=!1},d(i){V(t,i)}}}function rl(l,t,e){let{loading_status:i}=t,{show_label:n}=t,{label:s}=t,{root:r}=t,{root_url:o}=t,{elem_id:a=""}=t,{elem_classes:m=[]}=t,{visible:c=!0}=t,{value:_=null}=t,{container:f=!0}=t,{scale:g=null}=t,{min_width:k=void 0}=t,{grid_cols:A=[2]}=t,{grid_rows:v=void 0}=t,{height:B="auto"}=t,{preview:H}=t,{allow_preview:D=!0}=t,{object_fit:b="cover"}=t,{show_share_button:j=!1}=t,{show_download_button:S=!1}=t,{gradio:w}=t;const T=h=>w.dispatch("select",h.detail),U=h=>w.dispatch("share",h.detail),J=h=>w.dispatch("error",h.detail);return l.$$set=h=>{"loading_status"in h&&e(0,i=h.loading_status),"show_label"in h&&e(1,n=h.show_label),"label"in h&&e(2,s=h.label),"root"in h&&e(3,r=h.root),"root_url"in h&&e(4,o=h.root_url),"elem_id"in h&&e(5,a=h.elem_id),"elem_classes"in h&&e(6,m=h.elem_classes),"visible"in h&&e(7,c=h.visible),"value"in h&&e(8,_=h.value),"container"in h&&e(9,f=h.container),"scale"in h&&e(10,g=h.scale),"min_width"in h&&e(11,k=h.min_width),"grid_cols"in h&&e(12,A=h.grid_cols),"grid_rows"in h&&e(13,v=h.grid_rows),"height"in h&&e(14,B=h.height),"preview"in h&&e(15,H=h.preview),"allow_preview"in h&&e(16,D=h.allow_preview),"object_fit"in h&&e(17,b=h.object_fit),"show_share_button"in h&&e(18,j=h.show_share_button),"show_download_button"in h&&e(19,S=h.show_download_button),"gradio"in h&&e(20,w=h.gradio)},[i,n,s,r,o,a,m,c,_,f,g,k,A,v,B,H,D,b,j,S,w,T,U,J]}class ul extends ge{constructor(t){super(),me(this,t,rl,fl,be,{loading_status:0,show_label:1,label:2,root:3,root_url:4,elem_id:5,elem_classes:6,visible:7,value:8,container:9,scale:10,min_width:11,grid_cols:12,grid_rows:13,height:14,preview:15,allow_preview:16,object_fit:17,show_share_button:18,show_download_button:19,gradio:20})}}const Bl=ul;export{Bl as default};
//# sourceMappingURL=index-3431f5f0.js.map
