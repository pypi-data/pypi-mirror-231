import{S as ae,e as ie,s as se,F as q,G as E,w,u as I,H as N,Z as oe,af as ue,o as z,m as S,g as b,h as d,V as fe,W as _e,r as re,v as me,k as v,I as H,Q as ce,M as K,N as A,j as L,n as J,O as p,t as ge,K as P,p as j,x as he,B as be}from"./index-c8246046.js";import{B as de,n as R}from"./Button-b35e2f4e.js";import{B as ve}from"./BlockLabel-66d06484.js";import{E as ke}from"./Empty-bf9602eb.js";import{I as x}from"./Image-44941a39.js";function T(n,e,t){const l=n.slice();return l[28]=e[t],l[30]=t,l}function U(n,e,t){const l=n.slice();return l[28]=e[t],l[30]=t,l}function we(n){let e,t,l,a,o,i,r=H(n[14]?n[14]?.annotations:[]),m=[];for(let u=0;u<r.length;u+=1)m[u]=X(U(n,r,u));let c=n[6]&&n[14]&&Y(n);return{c(){e=S("div"),t=S("img"),a=z();for(let u=0;u<m.length;u+=1)m[u].c();o=z(),c&&c.c(),i=ce(),b(t,"class","base-image svelte-m3v3vb"),K(t.src,l=n[14]?n[14].image.data:null)||b(t,"src",l),A(t,"fit-height",n[7]),b(e,"class","image-container svelte-m3v3vb")},m(u,g){d(u,e,g),L(e,t),L(e,a);for(let _=0;_<m.length;_+=1)m[_]&&m[_].m(e,null);d(u,o,g),c&&c.m(u,g),d(u,i,g)},p(u,g){if(g[0]&16384&&!K(t.src,l=u[14]?u[14].image.data:null)&&b(t,"src",l),g[0]&128&&A(t,"fit-height",u[7]),g[0]&49664){r=H(u[14]?u[14]?.annotations:[]);let _;for(_=0;_<r.length;_+=1){const k=U(u,r,_);m[_]?m[_].p(k,g):(m[_]=X(k),m[_].c(),m[_].m(e,null))}for(;_<m.length;_+=1)m[_].d(1);m.length=r.length}u[6]&&u[14]?c?c.p(u,g):(c=Y(u),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},i:J,o:J,d(u){u&&(v(e),v(o),v(i)),p(m,u),c&&c.d(u)}}}function Ie(n){let e,t;return e=new ke({props:{size:"large",unpadded_box:!0,$$slots:{default:[Be]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(l,a){E(e,l,a),t=!0},p(l,a){const o={};a[1]&2&&(o.$$scope={dirty:a,ctx:l}),e.$set(o)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){N(e,l)}}}function X(n){let e,t,l;return{c(){e=S("img"),b(e,"class","mask fit-height svelte-m3v3vb"),K(e.src,t=n[28].image.data)||b(e,"src",t),b(e,"style",l=n[9]&&n[28].label in n[9]?null:`filter: hue-rotate(${Math.round(n[30]*360/n[14]?.annotations.length)}deg);`),A(e,"active",n[15]==n[28].label),A(e,"inactive",n[15]!=n[28].label&&n[15]!=null)},m(a,o){d(a,e,o)},p(a,o){o[0]&16384&&!K(e.src,t=a[28].image.data)&&b(e,"src",t),o[0]&16896&&l!==(l=a[9]&&a[28].label in a[9]?null:`filter: hue-rotate(${Math.round(a[30]*360/a[14]?.annotations.length)}deg);`)&&b(e,"style",l),o[0]&49152&&A(e,"active",a[15]==a[28].label),o[0]&49152&&A(e,"inactive",a[15]!=a[28].label&&a[15]!=null)},d(a){a&&v(e)}}}function Y(n){let e,t=H(n[14].annotations),l=[];for(let a=0;a<t.length;a+=1)l[a]=y(T(n,t,a));return{c(){e=S("div");for(let a=0;a<l.length;a+=1)l[a].c();b(e,"class","legend svelte-m3v3vb")},m(a,o){d(a,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(a,o){if(o[0]&475648){t=H(a[14].annotations);let i;for(i=0;i<t.length;i+=1){const r=T(a,t,i);l[i]?l[i].p(r,o):(l[i]=y(r),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(a){a&&v(e),p(l,a)}}}function y(n){let e,t=n[28].label+"",l,a,o,i;function r(){return n[23](n[28])}function m(){return n[24](n[28])}function c(){return n[27](n[30],n[28])}return{c(){e=S("div"),l=ge(t),a=z(),b(e,"class","legend-item svelte-m3v3vb"),P(e,"background-color",n[9]&&n[28].label in n[9]?n[9][n[28].label]+"88":`hsla(${Math.round(n[30]*360/n[14].annotations.length)}, 100%, 50%, 0.3)`)},m(u,g){d(u,e,g),L(e,l),L(e,a),o||(i=[j(e,"mouseover",r),j(e,"focus",m),j(e,"mouseout",n[25]),j(e,"blur",n[26]),j(e,"click",c)],o=!0)},p(u,g){n=u,g[0]&16384&&t!==(t=n[28].label+"")&&he(l,t),g[0]&16896&&P(e,"background-color",n[9]&&n[28].label in n[9]?n[9][n[28].label]+"88":`hsla(${Math.round(n[30]*360/n[14].annotations.length)}, 100%, 50%, 0.3)`)},d(u){u&&v(e),o=!1,be(i)}}}function Be(n){let e,t;return e=new x({}),{c(){q(e.$$.fragment)},m(l,a){E(e,l,a),t=!0},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){N(e,l)}}}function Me(n){let e,t,l,a,o,i,r,m;const c=[{i18n:n[3].i18n},n[13]];let u={};for(let f=0;f<c.length;f+=1)u=oe(u,c[f]);e=new ue({props:u}),l=new ve({props:{show_label:n[5],Icon:x,label:n[4]||n[3].i18n("image.image")}});const g=[Ie,we],_=[];function k(f,h){return f[14]==null?0:1}return i=k(n),r=_[i]=g[i](n),{c(){q(e.$$.fragment),t=z(),q(l.$$.fragment),a=z(),o=S("div"),r.c(),b(o,"class","container svelte-m3v3vb")},m(f,h){E(e,f,h),d(f,t,h),E(l,f,h),d(f,a,h),d(f,o,h),_[i].m(o,null),m=!0},p(f,h){const C=h[0]&8200?fe(c,[h[0]&8&&{i18n:f[3].i18n},h[0]&8192&&_e(f[13])]):{};e.$set(C);const B={};h[0]&32&&(B.show_label=f[5]),h[0]&24&&(B.label=f[4]||f[3].i18n("image.image")),l.$set(B);let M=i;i=k(f),i===M?_[i].p(f,h):(re(),I(_[M],1,1,()=>{_[M]=null}),me(),r=_[i],r?r.p(f,h):(r=_[i]=g[i](f),r.c()),w(r,1),r.m(o,null))},i(f){m||(w(e.$$.fragment,f),w(l.$$.fragment,f),w(r),m=!0)},o(f){I(e.$$.fragment,f),I(l.$$.fragment,f),I(r),m=!1},d(f){f&&(v(t),v(a),v(o)),N(e,f),N(l,f),_[i].d()}}}function Ae(n){let e,t;return e=new de({props:{visible:n[2],elem_id:n[0],elem_classes:n[1],padding:!1,height:n[7],width:n[8],allow_overflow:!1,container:n[10],scale:n[11],min_width:n[12],$$slots:{default:[Me]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(l,a){E(e,l,a),t=!0},p(l,a){const o={};a[0]&4&&(o.visible=l[2]),a[0]&1&&(o.elem_id=l[0]),a[0]&2&&(o.elem_classes=l[1]),a[0]&128&&(o.height=l[7]),a[0]&256&&(o.width=l[8]),a[0]&1024&&(o.container=l[10]),a[0]&2048&&(o.scale=l[11]),a[0]&4096&&(o.min_width=l[12]),a[0]&58104|a[1]&2&&(o.$$scope={dirty:a,ctx:l}),e.$set(o)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){N(e,l)}}}function Se(n,e,t){let{elem_id:l=""}=e,{elem_classes:a=[]}=e,{visible:o=!0}=e,{value:i=null}=e,r=null,m=null,{gradio:c}=e,{label:u=c.i18n("annotated_image.annotated_image")}=e,{show_label:g=!0}=e,{show_legend:_=!0}=e,{height:k}=e,{width:f}=e,{color_map:h}=e,{container:C=!0}=e,{scale:B=null}=e,{min_width:M=void 0}=e,{root:F}=e,{root_url:G}=e,O=null,{loading_status:Z}=e;function Q(s){t(15,O=s)}function V(){t(15,O=null)}function D(s,W){c.dispatch("select",{value:W,index:s})}const $=s=>Q(s.label),ee=s=>Q(s.label),le=()=>V(),ne=()=>V(),te=(s,W)=>D(s,W.label);return n.$$set=s=>{"elem_id"in s&&t(0,l=s.elem_id),"elem_classes"in s&&t(1,a=s.elem_classes),"visible"in s&&t(2,o=s.visible),"value"in s&&t(19,i=s.value),"gradio"in s&&t(3,c=s.gradio),"label"in s&&t(4,u=s.label),"show_label"in s&&t(5,g=s.show_label),"show_legend"in s&&t(6,_=s.show_legend),"height"in s&&t(7,k=s.height),"width"in s&&t(8,f=s.width),"color_map"in s&&t(9,h=s.color_map),"container"in s&&t(10,C=s.container),"scale"in s&&t(11,B=s.scale),"min_width"in s&&t(12,M=s.min_width),"root"in s&&t(20,F=s.root),"root_url"in s&&t(21,G=s.root_url),"loading_status"in s&&t(13,Z=s.loading_status)},n.$$.update=()=>{n.$$.dirty[0]&7864328&&(i!==r&&(t(22,r=i),c.dispatch("change")),i!==null?t(14,m={image:R(i.image,F,G),annotations:i.annotations.map(s=>({image:R(s.image,F,G),label:s.label}))}):t(14,m=null))},[l,a,o,c,u,g,_,k,f,h,C,B,M,Z,m,O,Q,V,D,i,F,G,r,$,ee,le,ne,te]}class je extends ae{constructor(e){super(),ie(this,e,Se,Ae,se,{elem_id:0,elem_classes:1,visible:2,value:19,gradio:3,label:4,show_label:5,show_legend:6,height:7,width:8,color_map:9,container:10,scale:11,min_width:12,root:20,root_url:21,loading_status:13},null,[-1,-1])}}const Fe=je;export{Fe as default};
//# sourceMappingURL=index-271fbae3.js.map
