import{S as ie,e as oe,s as ce,m as v,g as b,h as m,n as V,k as g,C as fe,I as y,o as B,O as G,t as q,j as z,x as M,p as I,B as _e,Q,N as H,K as D,F as S,G as T,w,u as p,H as E,Z as re,af as ue,V as de,W as me,r as W,v as Z}from"./index-b33ef059.js";import{g as ge}from"./color-6f8147c7.js";import{B as he}from"./Button-c9f0baae.js";import{c as be,m as ke,T as ae}from"./utils-6c747943.js";import{B as ve}from"./BlockLabel-eb61229a.js";import{E as we}from"./Empty-cfb077bd.js";function A(n,l,t){const e=n.slice();e[17]=l[t];const i=typeof e[17].class_or_confidence=="string"?parseInt(e[17].class_or_confidence):e[17].class_or_confidence;return e[26]=i,e}function J(n,l,t){const e=n.slice();return e[17]=l[t],e[19]=t,e}function P(n,l,t){const e=n.slice();return e[20]=l[t],e[22]=t,e}function R(n,l,t){const e=n.slice();return e[23]=l[t][0],e[24]=l[t][1],e[19]=t,e}function pe(n){let l,t,e=n[1]&&U(),i=y(n[0]),o=[];for(let s=0;s<i.length;s+=1)o[s]=X(A(n,i,s));return{c(){e&&e.c(),l=B(),t=v("div");for(let s=0;s<o.length;s+=1)o[s].c();b(t,"class","textfield svelte-ju12zg"),b(t,"data-testid","highlighted-text:textfield")},m(s,a){e&&e.m(s,a),m(s,l,a),m(s,t,a);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(t,null)},p(s,a){if(s[1]?e||(e=U(),e.c(),e.m(l.parentNode,l)):e&&(e.d(1),e=null),a&1){i=y(s[0]);let c;for(c=0;c<i.length;c+=1){const u=A(s,i,c);o[c]?o[c].p(u,a):(o[c]=X(u),o[c].c(),o[c].m(t,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},d(s){s&&(g(l),g(t)),e&&e.d(s),G(o,s)}}}function je(n){let l,t,e=n[1]&&Y(n),i=y(n[0]),o=[];for(let s=0;s<i.length;s+=1)o[s]=te(J(n,i,s));return{c(){e&&e.c(),l=B(),t=v("div");for(let s=0;s<o.length;s+=1)o[s].c();b(t,"class","textfield svelte-ju12zg")},m(s,a){e&&e.m(s,a),m(s,l,a),m(s,t,a);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(t,null)},p(s,a){if(s[1]?e?e.p(s,a):(e=Y(s),e.c(),e.m(l.parentNode,l)):e&&(e.d(1),e=null),a&111){i=y(s[0]);let c;for(c=0;c<i.length;c+=1){const u=J(s,i,c);o[c]?o[c].p(u,a):(o[c]=te(u),o[c].c(),o[c].m(t,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},d(s){s&&(g(l),g(t)),e&&e.d(s),G(o,s)}}}function U(n){let l;return{c(){l=v("div"),l.innerHTML="<span>-1</span> <span>0</span> <span>+1</span>",b(l,"class","color-legend svelte-ju12zg"),b(l,"data-testid","highlighted-text:color-legend")},m(t,e){m(t,l,e)},d(t){t&&g(l)}}}function X(n){let l,t,e=n[17].token+"",i,o,s;return{c(){l=v("span"),t=v("span"),i=q(e),o=B(),b(t,"class","text svelte-ju12zg"),b(l,"class","textspan score-text svelte-ju12zg"),b(l,"style",s="background-color: rgba("+(n[26]&&n[26]<0?"128, 90, 213,"+-n[26]:"239, 68, 60,"+n[26])+")")},m(a,c){m(a,l,c),z(l,t),z(t,i),z(l,o)},p(a,c){c&1&&e!==(e=a[17].token+"")&&M(i,e),c&1&&s!==(s="background-color: rgba("+(a[26]&&a[26]<0?"128, 90, 213,"+-a[26]:"239, 68, 60,"+a[26])+")")&&b(l,"style",s)},d(a){a&&g(l)}}}function Y(n){let l,t=y(Object.entries(n[5])),e=[];for(let i=0;i<t.length;i+=1)e[i]=x(R(n,t,i));return{c(){l=v("div");for(let i=0;i<e.length;i+=1)e[i].c();b(l,"class","category-legend svelte-ju12zg"),b(l,"data-testid","highlighted-text:category-legend")},m(i,o){m(i,l,o);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(l,null)},p(i,o){if(o&416){t=y(Object.entries(i[5]));let s;for(s=0;s<t.length;s+=1){const a=R(i,t,s);e[s]?e[s].p(a,o):(e[s]=x(a),e[s].c(),e[s].m(l,null))}for(;s<e.length;s+=1)e[s].d(1);e.length=t.length}},d(i){i&&g(l),G(e,i)}}}function x(n){let l,t=n[23]+"",e,i,o,s;function a(){return n[10](n[23])}function c(){return n[11](n[23])}return{c(){l=v("div"),e=q(t),i=B(),b(l,"class","category-label svelte-ju12zg"),b(l,"style","background-color:"+n[24].secondary)},m(u,r){m(u,l,r),z(l,e),z(l,i),o||(s=[I(l,"mouseover",a),I(l,"focus",c),I(l,"mouseout",n[12]),I(l,"blur",n[13])],o=!0)},p(u,r){n=u},d(u){u&&g(l),o=!1,_e(s)}}}function $(n){let l,t,e=n[20]+"",i,o,s,a,c=!n[1]&&n[17].class_or_confidence!==null&&ee(n);function u(){return n[14](n[19],n[17])}return{c(){l=v("span"),t=v("span"),i=q(e),o=B(),c&&c.c(),b(t,"class","text svelte-ju12zg"),H(t,"no-label",n[17].class_or_confidence===null||!n[5][n[17].class_or_confidence]),b(l,"class","textspan svelte-ju12zg"),H(l,"no-cat",n[17].class_or_confidence===null||n[3]&&n[3]!==n[17].class_or_confidence),H(l,"hl",n[17].class_or_confidence!==null),H(l,"selectable",n[2]),D(l,"background-color",n[17].class_or_confidence===null||n[3]&&n[3]!==n[17].class_or_confidence?"":n[5][n[17].class_or_confidence].secondary)},m(r,h){m(r,l,h),z(l,t),z(t,i),z(l,o),c&&c.m(l,null),s||(a=I(l,"click",u),s=!0)},p(r,h){n=r,h&1&&e!==(e=n[20]+"")&&M(i,e),h&33&&H(t,"no-label",n[17].class_or_confidence===null||!n[5][n[17].class_or_confidence]),!n[1]&&n[17].class_or_confidence!==null?c?c.p(n,h):(c=ee(n),c.c(),c.m(l,null)):c&&(c.d(1),c=null),h&9&&H(l,"no-cat",n[17].class_or_confidence===null||n[3]&&n[3]!==n[17].class_or_confidence),h&1&&H(l,"hl",n[17].class_or_confidence!==null),h&4&&H(l,"selectable",n[2]),h&9&&D(l,"background-color",n[17].class_or_confidence===null||n[3]&&n[3]!==n[17].class_or_confidence?"":n[5][n[17].class_or_confidence].secondary)},d(r){r&&g(l),c&&c.d(),s=!1,a()}}}function ee(n){let l,t,e=n[17].class_or_confidence+"",i;return{c(){l=q(`Â 
								`),t=v("span"),i=q(e),b(t,"class","label svelte-ju12zg"),D(t,"background-color",n[17].class_or_confidence===null||n[3]&&n[3]!==n[17].class_or_confidence?"":n[5][n[17].class_or_confidence].primary)},m(o,s){m(o,l,s),m(o,t,s),z(t,i)},p(o,s){s&1&&e!==(e=o[17].class_or_confidence+"")&&M(i,e),s&9&&D(t,"background-color",o[17].class_or_confidence===null||o[3]&&o[3]!==o[17].class_or_confidence?"":o[5][o[17].class_or_confidence].primary)},d(o){o&&(g(l),g(t))}}}function le(n){let l;return{c(){l=v("br")},m(t,e){m(t,l,e)},d(t){t&&g(l)}}}function ne(n){let l=n[20].trim()!=="",t,e=n[22]<F(n[17].token).length-1,i,o=l&&$(n),s=e&&le();return{c(){o&&o.c(),t=B(),s&&s.c(),i=Q()},m(a,c){o&&o.m(a,c),m(a,t,c),s&&s.m(a,c),m(a,i,c)},p(a,c){c&1&&(l=a[20].trim()!==""),l?o?o.p(a,c):(o=$(a),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),c&1&&(e=a[22]<F(a[17].token).length-1),e?s||(s=le(),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d(a){a&&(g(t),g(i)),o&&o.d(a),s&&s.d(a)}}}function te(n){let l,t=y(F(n[17].token)),e=[];for(let i=0;i<t.length;i+=1)e[i]=ne(P(n,t,i));return{c(){for(let i=0;i<e.length;i+=1)e[i].c();l=Q()},m(i,o){for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(i,o);m(i,l,o)},p(i,o){if(o&111){t=y(F(i[17].token));let s;for(s=0;s<t.length;s+=1){const a=P(i,t,s);e[s]?e[s].p(a,o):(e[s]=ne(a),e[s].c(),e[s].m(l.parentNode,l))}for(;s<e.length;s+=1)e[s].d(1);e.length=t.length}},d(i){i&&g(l),G(e,i)}}}function ze(n){let l;function t(o,s){return o[4]==="categories"?je:pe}let e=t(n),i=e(n);return{c(){l=v("div"),i.c(),b(l,"class","container svelte-ju12zg")},m(o,s){m(o,l,s),i.m(l,null)},p(o,[s]){e===(e=t(o))&&i?i.p(o,s):(i.d(1),i=e(o),i&&(i.c(),i.m(l,null)))},i:V,o:V,d(o){o&&g(l),i.d()}}}function F(n){return n.split(`
`)}function Ne(n,l,t){const e=typeof document<"u";let{value:i=[]}=l,{show_legend:o=!1}=l,{color_map:s={}}=l,{selectable:a=!1}=l,c,u={},r="";const h=fe();let k;function j(f){t(3,r=f)}function _(){t(3,r="")}const d=f=>j(f),O=f=>j(f),N=()=>_(),C=()=>_(),K=(f,L)=>{h("select",{index:f,value:[L.token,L.class_or_confidence]})};return n.$$set=f=>{"value"in f&&t(0,i=f.value),"show_legend"in f&&t(1,o=f.show_legend),"color_map"in f&&t(9,s=f.color_map),"selectable"in f&&t(2,a=f.selectable)},n.$$.update=()=>{if(n.$$.dirty&513){if(s||t(9,s={}),i.length>0){for(let f of i)if(f.class_or_confidence!==null)if(typeof f.class_or_confidence=="string"){if(t(4,k="categories"),!(f.class_or_confidence in s)){let L=ge(Object.keys(s).length);t(9,s[f.class_or_confidence]=L,s)}}else t(4,k="scores")}be(s,u,e,c)}},[i,o,a,r,k,u,h,j,_,s,d,O,N,C,K]}class He extends ie{constructor(l){super(),oe(this,l,Ne,ze,ce,{value:0,show_legend:1,color_map:9,selectable:2})}}function se(n){let l,t;return l=new ve({props:{Icon:ae,label:n[7],float:!1,disable:n[8]===!1}}),{c(){S(l.$$.fragment)},m(e,i){T(l,e,i),t=!0},p(e,i){const o={};i&128&&(o.label=e[7]),i&256&&(o.disable=e[8]===!1),l.$set(o)},i(e){t||(w(l.$$.fragment,e),t=!0)},o(e){p(l.$$.fragment,e),t=!1},d(e){E(l,e)}}}function ye(n){let l,t;return l=new we({props:{$$slots:{default:[Oe]},$$scope:{ctx:n}}}),{c(){S(l.$$.fragment)},m(e,i){T(l,e,i),t=!0},p(e,i){const o={};i&131072&&(o.$$scope={dirty:i,ctx:e}),l.$set(o)},i(e){t||(w(l.$$.fragment,e),t=!0)},o(e){p(l.$$.fragment,e),t=!1},d(e){E(l,e)}}}function Be(n){let l,t;return l=new He({props:{selectable:n[11],value:n[0],show_legend:n[6],color_map:n[1]}}),l.$on("select",n[16]),{c(){S(l.$$.fragment)},m(e,i){T(l,e,i),t=!0},p(e,i){const o={};i&2048&&(o.selectable=e[11]),i&1&&(o.value=e[0]),i&64&&(o.show_legend=e[6]),i&2&&(o.color_map=e[1]),l.$set(o)},i(e){t||(w(l.$$.fragment,e),t=!0)},o(e){p(l.$$.fragment,e),t=!1},d(e){E(l,e)}}}function Oe(n){let l,t;return l=new ae({}),{c(){S(l.$$.fragment)},m(e,i){T(l,e,i),t=!0},i(e){t||(w(l.$$.fragment,e),t=!0)},o(e){p(l.$$.fragment,e),t=!1},d(e){E(l,e)}}}function Se(n){let l,t,e,i,o,s,a;const c=[{i18n:n[2].i18n},n[13]];let u={};for(let _=0;_<c.length;_+=1)u=re(u,c[_]);l=new ue({props:u});let r=n[7]&&se(n);const h=[Be,ye],k=[];function j(_,d){return _[0]?0:1}return i=j(n),o=k[i]=h[i](n),{c(){S(l.$$.fragment),t=B(),r&&r.c(),e=B(),o.c(),s=Q()},m(_,d){T(l,_,d),m(_,t,d),r&&r.m(_,d),m(_,e,d),k[i].m(_,d),m(_,s,d),a=!0},p(_,d){const O=d&8196?de(c,[d&4&&{i18n:_[2].i18n},d&8192&&me(_[13])]):{};l.$set(O),_[7]?r?(r.p(_,d),d&128&&w(r,1)):(r=se(_),r.c(),w(r,1),r.m(e.parentNode,e)):r&&(W(),p(r,1,1,()=>{r=null}),Z());let N=i;i=j(_),i===N?k[i].p(_,d):(W(),p(k[N],1,1,()=>{k[N]=null}),Z(),o=k[i],o?o.p(_,d):(o=k[i]=h[i](_),o.c()),w(o,1),o.m(s.parentNode,s))},i(_){a||(w(l.$$.fragment,_),w(r),w(o),a=!0)},o(_){p(l.$$.fragment,_),p(r),p(o),a=!1},d(_){_&&(g(t),g(e),g(s)),E(l,_),r&&r.d(_),k[i].d(_)}}}function Te(n){let l,t;return l=new he({props:{variant:n[12]==="interactive"?"dashed":"solid",test_id:"highlighted-text",visible:n[5],elem_id:n[3],elem_classes:n[4],padding:!1,container:n[8],scale:n[9],min_width:n[10],$$slots:{default:[Se]},$$scope:{ctx:n}}}),{c(){S(l.$$.fragment)},m(e,i){T(l,e,i),t=!0},p(e,[i]){const o={};i&4096&&(o.variant=e[12]==="interactive"?"dashed":"solid"),i&32&&(o.visible=e[5]),i&8&&(o.elem_id=e[3]),i&16&&(o.elem_classes=e[4]),i&256&&(o.container=e[8]),i&512&&(o.scale=e[9]),i&1024&&(o.min_width=e[10]),i&141767&&(o.$$scope={dirty:i,ctx:e}),l.$set(o)},i(e){t||(w(l.$$.fragment,e),t=!0)},o(e){p(l.$$.fragment,e),t=!1},d(e){E(l,e)}}}function Ee(n,l,t){let{gradio:e}=l,{elem_id:i=""}=l,{elem_classes:o=[]}=l,{visible:s=!0}=l,{value:a}=l,c,{show_legend:u}=l,{color_map:r={}}=l,{label:h=e.i18n("highlighted_text.highlighted_text")}=l,{container:k=!0}=l,{scale:j=null}=l,{min_width:_=void 0}=l,{selectable:d=!1}=l,{combine_adjacent:O=!1}=l,{mode:N}=l,{loading_status:C}=l;const K=({detail:f})=>e.dispatch("select",f);return n.$$set=f=>{"gradio"in f&&t(2,e=f.gradio),"elem_id"in f&&t(3,i=f.elem_id),"elem_classes"in f&&t(4,o=f.elem_classes),"visible"in f&&t(5,s=f.visible),"value"in f&&t(0,a=f.value),"show_legend"in f&&t(6,u=f.show_legend),"color_map"in f&&t(1,r=f.color_map),"label"in f&&t(7,h=f.label),"container"in f&&t(8,k=f.container),"scale"in f&&t(9,j=f.scale),"min_width"in f&&t(10,_=f.min_width),"selectable"in f&&t(11,d=f.selectable),"combine_adjacent"in f&&t(14,O=f.combine_adjacent),"mode"in f&&t(12,N=f.mode),"loading_status"in f&&t(13,C=f.loading_status)},n.$$.update=()=>{n.$$.dirty&2&&!r&&Object.keys(r).length&&t(1,r),n.$$.dirty&16385&&a&&O&&t(0,a=ke(a,"equal")),n.$$.dirty&32773&&a!==c&&(t(15,c=a),e.dispatch("change"))},[a,r,e,i,o,s,u,h,k,j,_,d,N,C,O,c,K]}class Ie extends ie{constructor(l){super(),oe(this,l,Ee,Te,ce,{gradio:2,elem_id:3,elem_classes:4,visible:5,value:0,show_legend:6,color_map:1,label:7,container:8,scale:9,min_width:10,selectable:11,combine_adjacent:14,mode:12,loading_status:13})}}const Ke=Ie;export{Ke as default};
//# sourceMappingURL=index-6b192429.js.map
