"use strict";(self.webpackChunkpromptmanager=self.webpackChunkpromptmanager||[]).push([[2962],{28121:function(e,n,t){t.d(n,{Z:function(){return l}});t(72791);var i=t(5289),a=t(65661),r=t(39157),o=t(51691),s=t(97123),u=t(24518),d=t(80184);function l(e){var n=e.id,t=e.open,l=e.onOk,c=e.onCancel,x=e.title,f=e.text;return(0,d.jsxs)(i.Z,{title:x||"Logged Out",open:t,onCancel:c,children:[(0,d.jsx)(a.Z,{id:"delete-modal-title",children:"Confirm Delete"}),(0,d.jsx)(r.Z,{children:(0,d.jsx)(o.Z,{children:f})}),(0,d.jsxs)(s.Z,{children:[(0,d.jsx)(u.Z,{onClick:function(){return c(n)},children:"Cancel"},"cancel"),",",(0,d.jsx)(u.Z,{type:"primary",onClick:function(){return l(n)},children:"Confirm"},"submit"),","]})]})}},60142:function(e,n,t){t.d(n,{P:function(){return a},l:function(){return r}});var i=t(80184);function a(e){var n=new Date(e.value);return(0,i.jsx)("span",{children:n.toLocaleString()})}function r(e){for(var n=e.value,t=["","K","M","G","T","P","E","Z","Y"],a=0;n>=1024;)n/=1024,a+=1;return(0,i.jsx)("span",{children:n>0?n.toFixed(2)+" "+t[a]:n+" "+t[a]})}},42962:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var i=t(93433),a=t(29439),r=t(55768),o=t(9953),s=t(64554),u=t(53767),d=t(24518),l=t(81918),c=t(94721),x=t(13239),f=t(13400),h=t(61889),p=t(71747),v=t(52601),Z=t(58054),j=t(33953),y=t(93806),m=t(32788),g=t(72791),S=t(56030),C=t(12705),b=t(40406),k=t(28121),w=t(5289),_=t(65661),D=t(39157),O=t(58406),A=t(23786),z=t(97123),I=t(7077),E=t(80184);function P(e){var n=e.id,t=e.open,i=e.onOk,r=e.onCancel,o=e.title,s=e.dataSource,l=g.useState(null===s||void 0===s?void 0:s.visibility),c=(0,a.Z)(l,2),x=c[0],f=c[1];return console.log("visibility",x),(0,E.jsxs)(w.Z,{open:t,onClose:function(){return r(n)},"aria-labelledby":"share-datasource-dialog-title","aria-describedby":"share-datasource-dialog-description",children:[(0,E.jsx)(_.Z,{id:"share-datasource-dialog-title",children:o}),(0,E.jsx)(D.Z,{style:{minWidth:"500px"},children:(0,E.jsxs)(u.Z,{spacing:2,children:[(0,E.jsx)("h4",{children:"Choose who can access this datasource"}),(0,E.jsx)(O.Z,{labelId:"share-datasource-select-label",size:"small",defaultValue:(null===s||void 0===s?void 0:s.visibility)||1,onChange:function(e){return f(e.target.value)},children:[{value:1,label:"Organization",description:"Members of your organization can access this datasource"},{value:0,label:"You",description:"Only you can access this datasource"}].map((function(e){return(0,E.jsx)(A.Z,{value:e.value,children:(0,E.jsxs)(u.Z,{direction:"row",spacing:1,children:[(0,E.jsx)("span",{children:e.label}),(0,E.jsx)("small",{children:e.description})]})},e.value)}))})]})}),(0,E.jsxs)(z.Z,{children:[(0,E.jsx)(d.Z,{onClick:function(){return r(n)},children:"Cancel"}),(0,E.jsx)(d.Z,{variant:"contained",onClick:function(){return function(){var e="noop";x!==s.visibility?0===s.visibility&&1===x?(0,I.o)().post("api/org/datasources/".concat(s.uuid,"/add_entry")).then((function(n){i(e,s)})):1===s.visibility&&0===x?(0,I.o)().delete("api/org/datasources/".concat(s.uuid)).then((function(n){i(e,s)})):i(e,s):i(e,s)}()},children:"Done"})]})]})}var N=t(60142),M=t(52803);function R(e){var n,t,i=e.onCancel,r=e.dataSourceEntryData,f=e.open,h=(0,g.useState)(null),v=(0,a.Z)(h,2),Z=v[0],j=v[1],y=(0,g.useState)(null),m=(0,a.Z)(y,2),S=m[0],C=m[1],b=(0,g.useState)(!1),k=(0,a.Z)(b,2),w=k[0],_=k[1];return(0,g.useEffect)((function(){var e,n;null!==r&&void 0!==r&&null!==(e=r.config)&&void 0!==e&&e.document_ids?(_(!0),(0,I.o)().get("/api/datasource_entries/".concat(r.uuid,"/text_content")).then((function(e){var n,t;j((0,E.jsx)(p.Z,{value:null===(n=e.data)||void 0===n?void 0:n.content,disabled:!0,autoSize:!0,style:{maxHeight:"80vh",width:"100%",overflow:"auto"}})),C(null===(t=e.data)||void 0===t?void 0:t.metadata)})).finally((function(){return _(!1)}))):j((0,E.jsx)(p.Z,{value:JSON.stringify(null===r||void 0===r||null===(n=r.config)||void 0===n?void 0:n.errors),disabled:!0,autoSize:!0,style:{maxHeight:"80vh",width:"100%",overflow:"auto"}}))}),[null===r||void 0===r||null===(n=r.config)||void 0===n?void 0:n.document_ids,null===r||void 0===r||null===(t=r.config)||void 0===t?void 0:t.errors,r.uuid]),(0,E.jsx)(o.ZP,{open:f,onClose:i,anchor:"right",sx:{"& .MuiDrawer-paper":{minWidth:"40%"}},children:(0,E.jsxs)(s.Z,{children:[(0,E.jsxs)(u.Z,{direction:"row",gap:1,sx:{mb:"10px",mt:"10px"},children:[(0,E.jsx)(d.Z,{onClick:function(){return i()},sx:{alignSelf:"left"},children:"X"}),Object.keys(S||{}).map((function(e){return(0,E.jsx)(l.Z,{label:"".concat(e,": ").concat(S[e]),size:"small",sx:{borderRadius:"10px",marginTop:"5px"}},e)}))]}),(0,E.jsx)(c.Z,{}),w?(0,E.jsx)(x.Z,{}):(0,E.jsx)("div",{style:{margin:"0px 10px"},children:Z})]})})}function T(){var e=(0,g.useState)(""),n=(0,a.Z)(e,2),t=n[0],o=n[1],u=(0,g.useState)(""),c=(0,a.Z)(u,2),p=c[0],w=c[1],_=(0,g.useState)(null),D=(0,a.Z)(_,2),O=D[0],A=D[1],z=(0,g.useState)(!1),T=(0,a.Z)(z,2),U=T[0],L=T[1],F=(0,g.useState)(!1),J=(0,a.Z)(F,2),K=J[0],W=J[1],B=(0,g.useState)(!1),V=(0,a.Z)(B,2),Y=V[0],G=V[1],H=(0,g.useState)(null),X=(0,a.Z)(H,2),q=X[0],Q=X[1],$=(0,g.useState)(!1),ee=(0,a.Z)($,2),ne=ee[0],te=ee[1],ie=(0,S.sJ)(C.ye),ae=(0,S.FV)(C.MC),re=(0,a.Z)(ae,2),oe=re[0],se=re[1],ue=(0,S.FV)(C.DK),de=(0,a.Z)(ue,2),le=de[0],ce=de[1],xe=(0,g.useState)(null),fe=(0,a.Z)(xe,2),he=fe[0],pe=fe[1],ve=((0,S.sJ)(C.rc),(0,g.useState)([])),Ze=(0,a.Z)(ve,2),je=Ze[0],ye=Ze[1],me=(0,g.useState)("Add New Data Source"),ge=(0,a.Z)(me,2),Se=ge[0],Ce=ge[1],be=(0,g.useState)(null),ke=(0,a.Z)(be,2),we=ke[0],_e=ke[1],De=(0,M.lD)(),Oe=(0,M.B6)(),Ae=(0,S.sJ)(C.Dg);(0,g.useEffect)((function(){ie.length>0&&ye(ie)}),[ie]);var ze=[{title:"Name",dataIndex:"name",key:"name"},{title:"Owner",key:"owner",render:function(e){return(0,E.jsx)("span",{children:e.isUserOwned?"me":e.owner_email})}},{title:"Data Source Type",dataIndex:["type","name"],key:"type"},{title:"Size",dataIndex:"size",key:"size",render:function(e){return(0,E.jsx)(N.l,{value:e})}},{title:"Created At",dataIndex:"created_at",key:"created_at",render:function(e){return(0,E.jsx)(N.P,{value:e})}},{title:"Last Modified",dataIndex:"updated_at",key:"updated_at",render:function(e){return(0,E.jsx)(N.P,{value:e})}},{title:"Action",key:"operation",render:function(e){return(0,E.jsxs)(s.Z,{children:[(0,E.jsx)(f.Z,{disabled:!e.isUserOwned,onClick:function(){Ce("Add New Data Entry"),_e(e),L(!0)},children:(0,E.jsx)(Z.Z,{})}),(0,E.jsx)(f.Z,{disabled:!e.isUserOwned,onClick:function(){A(e),o("Delete Data Source"),w((0,E.jsxs)("div",{children:["Are you sure you want to delete"," ",(0,E.jsx)("span",{style:{fontWeight:"bold"},children:e.name})," ?"]})),W(!0)},children:(0,E.jsx)(v.Z,{})}),Ae.IS_ORGANIZATION_MEMBER&&e.isUserOwned&&(0,E.jsx)(f.Z,{onClick:function(){Ce("Share Datasource"),_e(e),G(!0)},children:0===e.visibility?(0,E.jsx)(m.Z,{}):(0,E.jsx)(y.Z,{})})]})}}];return(0,E.jsxs)("div",{id:"data-page",children:[!1,(0,E.jsxs)(h.ZP,{span:24,style:{padding:"10px"},children:[(0,E.jsx)(h.ZP,{item:!0,style:{width:"100%",padding:"15px 0px"},children:(0,E.jsx)(d.Z,{onClick:function(){L(!0)},type:"primary",variant:"contained",sx:{float:"left",marginBottom:"10px",textTransform:"none"},children:"Add Data Source"})}),(0,E.jsx)(h.ZP,{item:!0,style:{width:"100%"},children:(0,E.jsx)(r.Z,{dataSource:je,columns:ze,pagination:{pageSize:10},expandable:{expandedRowRender:function(e){var n=e.data_source_entries;if(he===e.uuid)return(0,E.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,E.jsx)(x.Z,{})});var t=[{title:"Name",dataIndex:"name",key:"name"},{title:"Size",key:"size",dataIndex:"size",render:function(e){return(0,E.jsx)(N.l,{value:e})}},{title:"Status",key:"status",render:function(e){var n="success";return n="FAILED"===e.status?"error":"READY"===e.status?"success":"info",(0,E.jsx)(l.Z,{color:n,style:{cursor:"pointer"},onClick:function(){Q(e),te(!0)},label:e.status.charAt(0)+e.status.slice(1).toLowerCase(),size:"small"},e.uuid)}},{title:"Created At",dataIndex:"created_at",key:"created_at",render:function(e){return(0,E.jsx)(N.P,{value:e})}},{title:"Last Modified",dataIndex:"updated_at",key:"updated_at",render:function(e){return(0,E.jsx)(N.P,{value:e})}},{title:"Action",key:"operation",render:function(e){var n=null===e||void 0===e?void 0:e.sync_config;return(0,E.jsxs)(s.Z,{children:[(0,E.jsx)(f.Z,{disabled:!e.isUserOwned,onClick:function(){A(e),o("Delete Data Source Entry"),w((0,E.jsxs)("div",{children:["Are you sure you want to delete"," ",(0,E.jsx)("span",{style:{fontWeight:"bold"},children:e.name})," ","?"]})),W(!0)},children:(0,E.jsx)(v.Z,{className:"delete-dataentry-icon"})}),n&&(0,E.jsx)(f.Z,{onClick:function(){(0,I.o)().post("/api/datasource_entries/".concat(e.uuid,"/resync")).then((function(e){De(),De()}))},children:(0,E.jsx)(j.Z,{className:"resync-dataentry-icon"})})]})}}];return(0,E.jsx)(r.Z,{columns:t,dataSource:n,rowKey:function(e){return e.uuid},pagination:!1,style:{cursor:"pointer"},onRow:function(e,n){return{onClick:function(n){"TD"===n.target.tagName&&(Q(e),te(!0))}}}})},onExpand:function(e,n){if(e){var t="/api/datasources/".concat(n.uuid,"/entries");n.isUserOwned||(t="/api/org/datasources/".concat(n.uuid,"/entries")),pe(n.uuid),(0,I.o)().get(t).then((function(e){n.isUserOwned?se([].concat((0,i.Z)(oe.filter((function(e){return e.datasource.uuid!==n.uuid}))),(0,i.Z)(e.data))):ce([].concat((0,i.Z)(le.filter((function(e){return e.datasource.uuid!==n.uuid}))),(0,i.Z)(e.data)))})).finally((function(){pe(null)}))}}},rowKey:function(e){return e.uuid},style:{width:"100%"}})})]}),U&&(0,E.jsx)(b.P,{open:U,handleCancelCb:function(){_e(null),L(!1)},dataSourceAddedCb:function(){_e(null),De(),Oe(),L(!1)},modalTitle:Se,datasource:we}),K&&(0,E.jsx)(k.Z,{id:O,title:t,text:p,open:K,onOk:function(e){void 0!==(null===e||void 0===e?void 0:e.data_source_entries)?(0,I.o)().delete("api/datasources/".concat(e.uuid)).then((function(e){Oe(),W(!1)})):(0,I.o)().delete("api/datasource_entries/".concat(e.uuid)).then((function(e){De(),W(!1)}))},onCancel:function(){W(!1)}}),ne&&(0,E.jsx)(R,{onCancel:function(){return te(!1)},dataSourceEntryData:q,open:ne}),Y&&(0,E.jsx)(P,{title:Se,onCancel:function(){return G(!1)},onOk:function(){G(!1)},open:Y,dataSource:we})]})}}}]);
//# sourceMappingURL=2962.0e7f8953.chunk.js.map