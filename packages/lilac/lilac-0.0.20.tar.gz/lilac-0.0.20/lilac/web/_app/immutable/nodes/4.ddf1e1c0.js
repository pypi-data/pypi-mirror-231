import{S as we,i as ke,s as ve,E as pe,k as T,a as Y,y as H,l as V,m as S,c as Q,z as O,h as m,F as Jt,G as oe,b as N,a0 as v,A as R,H as Fe,L as Re,g as p,d as $,B as L,N as ye,C as dt,o as ni,Q as Ie,q as G,r as K,n as D,u as ce,e as de,v as ie,f as se,M as Qe,w as He,W as Tt,X as Vt,D as ii,I as si,J as ri,K as ai,Z as _e,_ as ge,$ as Ve,a1 as X,Y as Zi,p as ft,a7 as $e,a8 as Pe,O as be,ab as Te,T as Ue,U as Ye,V as oi,R as pt,af as Gi,a4 as Ae,a2 as Nt,ag as Ki,P as Ji,a3 as bt,a9 as yt,x as rt,a6 as Xt,ad as Xi}from"../chunks/index.8706e7a3.js";import{g as Mt}from"../chunks/navigation.2cb87ed2.js";import{O as xi,a as it,P as es}from"../chunks/Page.b226239b.js";import{W as ts,R as ls,h as Se,U as Ze,V as qe,b as mt,X as fi,Y as ns,Z as Ct,_ as ui,c as Le,d as Ge,$ as is,a0 as ci,a1 as ss,a2 as Ee,a3 as zt,a4 as Je,a5 as di,t as Xe,C as xe,a6 as Be,S as mi,a7 as Ft,a8 as rs,a9 as Pt,aa as as,O as hi,ab as os,B as _i,ac as gi,n as xt,a as At,ad as vt,ae as pi,af as ot,ag as fs,ah as ut,ai as el,aj as et,ak as us,al as cs,am as ds,an as ms,ao as Bt,ap as hs,aq as It,ar as gt,as as _s,at as gs,au as bi,av as vi,aw as wi,i as ps,ax as bs,ay as vs,az as ws,F as ks,aA as lt,aB as ki,aC as $s,aD as $i,aE as Es,aF as Ss,aG as nt,aH as Ht,aI as Ei,aJ as wt,aK as Dt,aL as Si,aM as yi,aN as Rt,aO as kt,aP as ys,aQ as at,K as Is,A as Lt,aR as Ds,aS as Ts,aT as Vs,M as Ot,G as qt,H as jt,I as Ns,J as Ms,aU as Ut,aV as Ii,z as Di,aW as Ti,aX as Cs,g as zs,aY as Fs,aZ as Ps,a_ as As,a$ as Bs,b0 as Hs,b1 as Rs,b2 as Ls,b3 as Os,b4 as qs,b5 as js,b6 as Us}from"../chunks/Commands.34ca7267.js";import{w as Ys}from"../chunks/index.8b48d14e.js";import{C as Qs,b as Vi,I as tl,a as Ws,T as Zs,E as Gs,S as Ks}from"../chunks/ConceptView.834ee8ca.js";import{g as Ni,s as $t,C as Js,f as Xs}from"../chunks/notificationsStore.2895bc3e.js";import{c as xs,E as Mi,S as Ci,T as zi}from"../chunks/StringSpanHighlight.f9009949.js";import{L as er,a as tr,b as lr,c as nr,C as Fi}from"../chunks/ComboBox.bf9ff5db.js";import{M as Yt,S as ir}from"../chunks/Settings.fd72f277.js";import{g as Qt}from"../chunks/settingsStore.7a558b1a.js";import{I as sr}from"../chunks/ItemMetadata.b2ef206b.js";function ll(i,e,l){const t=i.slice();return t[39]=e[l],t[41]=l,t}const rr=i=>({item:i[0]&8,index:i[0]&8}),nl=i=>({item:i[39],index:i[41]});function il(i){let e,l;return{c(){e=T("label"),l=G(i[10]),this.h()},l(t){e=V(t,"LABEL",{for:!0});var n=S(e);l=K(n,i[10]),n.forEach(m),this.h()},h(){D(e,"for",i[19]),oe(e,"bx--label",!0),oe(e,"bx--label--disabled",i[9]),oe(e,"bx--visually-hidden",i[17])},m(t,n){N(t,e,n),v(e,l)},p(t,n){n[0]&1024&&ce(l,t[10]),n[0]&524288&&D(e,"for",t[19]),n[0]&512&&oe(e,"bx--label--disabled",t[9]),n[0]&131072&&oe(e,"bx--visually-hidden",t[17])},d(t){t&&m(e)}}}function sl(i){let e,l;return e=new ts({props:{class:"bx--list-box__invalid-icon"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function rl(i){let e,l;return e=new ls({props:{class:"bx--list-box__invalid-icon bx--list-box__invalid-icon--warning"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function ar(i){let e;return{c(){e=G(i[16])},l(l){e=K(l,i[16])},m(l,t){N(l,e,t)},p(l,t){t[0]&65536&&ce(e,l[16])},d(l){l&&m(e)}}}function or(i){let e=i[4](i[22])+"",l;return{c(){l=G(e)},l(t){l=K(t,e)},m(t,n){N(t,l,n)},p(t,n){n[0]&4194320&&e!==(e=t[4](t[22])+"")&&ce(l,e)},d(t){t&&m(l)}}}function al(i){let e,l;return e=new lr({props:{"aria-labelledby":i[19],id:i[19],$$slots:{default:[cr]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&524288&&(o["aria-labelledby"]=t[19]),n[0]&524288&&(o.id=t[19]),n[0]&2097181|n[1]&64&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function fr(i){let e=i[4](i[39])+"",l;return{c(){l=G(e)},l(t){l=K(t,e)},m(t,n){N(t,l,n)},p(t,n){n[0]&24&&e!==(e=t[4](t[39])+"")&&ce(l,e)},d(t){t&&m(l)}}}function ur(i){let e,l;const t=i[29].default,n=ii(t,i,i[37],nl),o=n||fr(i);return{c(){o&&o.c(),e=Y()},l(s){o&&o.l(s),e=Q(s)},m(s,r){o&&o.m(s,r),N(s,e,r),l=!0},p(s,r){n?n.p&&(!l||r[0]&8|r[1]&64)&&si(n,t,s,s[37],l?ai(t,s[37],r,rr):ri(s[37]),nl):o&&o.p&&(!l||r[0]&24)&&o.p(s,l?r:[-1,-1])},i(s){l||(p(o,s),l=!0)},o(s){$(o,s),l=!1},d(s){o&&o.d(s),s&&m(e)}}}function ol(i,e){let l,t,n;function o(...r){return e[34](e[39],...r)}function s(){return e[35](e[39],e[41])}return t=new nr({props:{id:e[39].id,active:e[0]===e[39].id,highlighted:e[21]===e[41],disabled:e[39].disabled,$$slots:{default:[ur]},$$scope:{ctx:e}}}),t.$on("click",o),t.$on("mouseenter",s),{key:i,first:null,c(){l=de(),H(t.$$.fragment),this.h()},l(r){l=de(),O(t.$$.fragment,r),this.h()},h(){this.first=l},m(r,a){N(r,l,a),R(t,r,a),n=!0},p(r,a){e=r;const f={};a[0]&8&&(f.id=e[39].id),a[0]&9&&(f.active=e[0]===e[39].id),a[0]&2097160&&(f.highlighted=e[21]===e[41]),a[0]&8&&(f.disabled=e[39].disabled),a[0]&24|a[1]&64&&(f.$$scope={dirty:a,ctx:e}),t.$set(f)},i(r){n||(p(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){r&&m(l),L(t,r)}}}function cr(i){let e=[],l=new Map,t,n,o=i[3];const s=r=>r[39].id;for(let r=0;r<o.length;r+=1){let a=ll(i,o,r),f=s(a);l.set(f,e[r]=ol(f,a))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=de()},l(r){for(let a=0;a<e.length;a+=1)e[a].l(r);t=de()},m(r,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,a);N(r,t,a),n=!0},p(r,a){a[0]&35651613|a[1]&64&&(o=r[3],ie(),e=Tt(e,a,s,1,r,o,l,t.parentNode,Vt,ol,t,ll),se())},i(r){if(!n){for(let a=0;a<o.length;a+=1)p(e[a]);n=!0}},o(r){for(let a=0;a<e.length;a+=1)$(e[a]);n=!1},d(r){for(let a=0;a<e.length;a+=1)e[a].d(r);r&&m(t)}}}function dr(i){let e,l,t,n,o,s,r,a,f,u,_,c=i[11]&&sl(),d=!i[11]&&i[13]&&rl();function h(g,E){return g[22]?or:ar}let b=h(i),w=b(i);s=new tr({props:{translateWithId:i[18],open:i[1]}}),s.$on("click",i[30]);let k=i[1]&&al(i);return{c(){c&&c.c(),e=Y(),d&&d.c(),l=Y(),t=T("button"),n=T("span"),w.c(),o=Y(),H(s.$$.fragment),r=Y(),k&&k.c(),a=de(),this.h()},l(g){c&&c.l(g),e=Q(g),d&&d.l(g),l=Q(g),t=V(g,"BUTTON",{type:!0,tabindex:!0,"aria-expanded":!0,translatewithid:!0,id:!0});var E=S(t);n=V(E,"SPAN",{});var y=S(n);w.l(y),y.forEach(m),o=Q(E),O(s.$$.fragment,E),E.forEach(m),r=Q(g),k&&k.l(g),a=de(),this.h()},h(){oe(n,"bx--list-box__label",!0),D(t,"type","button"),D(t,"tabindex","0"),D(t,"aria-expanded",i[1]),t.disabled=i[9],D(t,"translatewithid",i[18]),D(t,"id",i[19]),oe(t,"bx--list-box__field",!0)},m(g,E){c&&c.m(g,E),N(g,e,E),d&&d.m(g,E),N(g,l,E),N(g,t,E),v(t,n),w.m(n,null),v(t,o),R(s,t,null),i[31](t),N(g,r,E),k&&k.m(g,E),N(g,a,E),f=!0,u||(_=[Fe(t,"keydown",i[32]),Fe(t,"keyup",i[33])],u=!0)},p(g,E){g[11]?c?E[0]&2048&&p(c,1):(c=sl(),c.c(),p(c,1),c.m(e.parentNode,e)):c&&(ie(),$(c,1,1,()=>{c=null}),se()),!g[11]&&g[13]?d?E[0]&10240&&p(d,1):(d=rl(),d.c(),p(d,1),d.m(l.parentNode,l)):d&&(ie(),$(d,1,1,()=>{d=null}),se()),b===(b=h(g))&&w?w.p(g,E):(w.d(1),w=b(g),w&&(w.c(),w.m(n,null)));const y={};E[0]&262144&&(y.translateWithId=g[18]),E[0]&2&&(y.open=g[1]),s.$set(y),(!f||E[0]&2)&&D(t,"aria-expanded",g[1]),(!f||E[0]&512)&&(t.disabled=g[9]),(!f||E[0]&262144)&&D(t,"translatewithid",g[18]),(!f||E[0]&524288)&&D(t,"id",g[19]),g[1]?k?(k.p(g,E),E[0]&2&&p(k,1)):(k=al(g),k.c(),p(k,1),k.m(a.parentNode,a)):k&&(ie(),$(k,1,1,()=>{k=null}),se())},i(g){f||(p(c),p(d),p(s.$$.fragment,g),p(k),f=!0)},o(g){$(c),$(d),$(s.$$.fragment,g),$(k),f=!1},d(g){c&&c.d(g),g&&m(e),d&&d.d(g),g&&m(l),g&&m(t),w.d(),L(s),i[31](null),g&&m(r),k&&k.d(g),g&&m(a),u=!1,Qe(_)}}}function fl(i){let e,l;return{c(){e=T("div"),l=G(i[15]),this.h()},l(t){e=V(t,"DIV",{});var n=S(e);l=K(n,i[15]),n.forEach(m),this.h()},h(){oe(e,"bx--form__helper-text",!0),oe(e,"bx--form__helper-text--disabled",i[9])},m(t,n){N(t,e,n),v(e,l)},p(t,n){n[0]&32768&&ce(l,t[15]),n[0]&512&&oe(e,"bx--form__helper-text--disabled",t[9])},d(t){t&&m(e)}}}function mr(i){let e,l,t,n,o,s,r,a=i[10]&&il(i);t=new er({props:{role:void 0,type:i[5],size:i[7],name:i[20],"aria-label":i[28]["aria-label"],class:`bx--dropdown 
      `+(i[6]==="top"&&"bx--list-box--up")+` 
      `+(i[11]&&"bx--dropdown--invalid")+` 
      `+(!i[11]&&i[13]&&"bx--dropdown--warning")+` 
      `+(i[1]&&"bx--dropdown--open")+`
      `+(i[7]==="sm"&&"bx--dropdown--sm")+`
      `+(i[7]==="xl"&&"bx--dropdown--xl")+`
      `+(i[23]&&"bx--dropdown--inline")+`
      `+(i[9]&&"bx--dropdown--disabled")+`
      `+(i[8]&&"bx--dropdown--light"),disabled:i[9],open:i[1],invalid:i[11],invalidText:i[12],light:i[8],warn:i[13],warnText:i[14],$$slots:{default:[dr]},$$scope:{ctx:i}}}),t.$on("click",i[36]);let f=!i[23]&&!i[11]&&!i[13]&&i[15]&&fl(i),u=[i[27]],_={};for(let c=0;c<u.length;c+=1)_=pe(_,u[c]);return{c(){e=T("div"),a&&a.c(),l=Y(),H(t.$$.fragment),n=Y(),f&&f.c(),this.h()},l(c){e=V(c,"DIV",{});var d=S(e);a&&a.l(d),l=Q(d),O(t.$$.fragment,d),n=Q(d),f&&f.l(d),d.forEach(m),this.h()},h(){Jt(e,_),oe(e,"bx--dropdown__wrapper",!0),oe(e,"bx--list-box__wrapper",!0),oe(e,"bx--dropdown__wrapper--inline",i[23]),oe(e,"bx--list-box__wrapper--inline",i[23]),oe(e,"bx--dropdown__wrapper--inline--invalid",i[23]&&i[11])},m(c,d){N(c,e,d),a&&a.m(e,null),v(e,l),R(t,e,null),v(e,n),f&&f.m(e,null),o=!0,s||(r=Fe(window,"click",i[26]),s=!0)},p(c,d){c[10]?a?a.p(c,d):(a=il(c),a.c(),a.m(e,l)):a&&(a.d(1),a=null);const h={};d[0]&32&&(h.type=c[5]),d[0]&128&&(h.size=c[7]),d[0]&1048576&&(h.name=c[20]),d[0]&268435456&&(h["aria-label"]=c[28]["aria-label"]),d[0]&8399810&&(h.class=`bx--dropdown 
      `+(c[6]==="top"&&"bx--list-box--up")+` 
      `+(c[11]&&"bx--dropdown--invalid")+` 
      `+(!c[11]&&c[13]&&"bx--dropdown--warning")+` 
      `+(c[1]&&"bx--dropdown--open")+`
      `+(c[7]==="sm"&&"bx--dropdown--sm")+`
      `+(c[7]==="xl"&&"bx--dropdown--xl")+`
      `+(c[23]&&"bx--dropdown--inline")+`
      `+(c[9]&&"bx--dropdown--disabled")+`
      `+(c[8]&&"bx--dropdown--light")),d[0]&512&&(h.disabled=c[9]),d[0]&2&&(h.open=c[1]),d[0]&2048&&(h.invalid=c[11]),d[0]&4096&&(h.invalidText=c[12]),d[0]&256&&(h.light=c[8]),d[0]&8192&&(h.warn=c[13]),d[0]&16384&&(h.warnText=c[14]),d[0]&7154207|d[1]&64&&(h.$$scope={dirty:d,ctx:c}),t.$set(h),!c[23]&&!c[11]&&!c[13]&&c[15]?f?f.p(c,d):(f=fl(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null),Jt(e,_=Re(u,[d[0]&134217728&&c[27]])),oe(e,"bx--dropdown__wrapper",!0),oe(e,"bx--list-box__wrapper",!0),oe(e,"bx--dropdown__wrapper--inline",c[23]),oe(e,"bx--list-box__wrapper--inline",c[23]),oe(e,"bx--dropdown__wrapper--inline--invalid",c[23]&&c[11])},i(c){o||(p(t.$$.fragment,c),o=!0)},o(c){$(t.$$.fragment,c),o=!1},d(c){c&&m(e),a&&a.d(),L(t),f&&f.d(),s=!1,r()}}}function hr(i,e,l){let t,n;const o=["items","itemToString","selectedId","type","direction","size","open","light","disabled","titleText","invalid","invalidText","warn","warnText","helperText","label","hideLabel","translateWithId","id","name","ref"];let s=ye(e,o),{$$slots:r={},$$scope:a}=e,{items:f=[]}=e,{itemToString:u=z=>z.text||z.id}=e,{selectedId:_}=e,{type:c="default"}=e,{direction:d="bottom"}=e,{size:h=void 0}=e,{open:b=!1}=e,{light:w=!1}=e,{disabled:k=!1}=e,{titleText:g=""}=e,{invalid:E=!1}=e,{invalidText:y=""}=e,{warn:M=!1}=e,{warnText:C=""}=e,{helperText:I=""}=e,{label:B=void 0}=e,{hideLabel:x=!1}=e,{translateWithId:Z=void 0}=e,{id:F="ccs-"+Math.random().toString(36)}=e,{name:j=void 0}=e,{ref:A=null}=e;const ee=dt();let U=-1;function W(z){let ne=U+z;if(f.length===0)return;ne<0?ne=f.length-1:ne>=f.length&&(ne=0);let De=f[ne].disabled;for(;De;)ne=ne+z,ne<0?ne=f.length-1:ne>=f.length&&(ne=0),De=f[ne].disabled;l(21,U=ne)}const J=()=>{ee("select",{selectedId:_,selectedItem:f.find(z=>z.id===_)})},P=({target:z})=>{b&&A&&!A.contains(z)&&l(1,b=!1)};ni(()=>(parent&&parent.addEventListener("click",P),()=>{parent&&parent.removeEventListener("click",P)}));const te=z=>{z.stopPropagation(),!k&&l(1,b=!b)};function ue(z){He[z?"unshift":"push"](()=>{A=z,l(2,A)})}const fe=z=>{const{key:ne}=z;["Enter","ArrowDown","ArrowUp"].includes(ne)&&z.preventDefault(),ne==="Enter"?(l(1,b=!b),U>-1&&f[U].id!==_&&(l(0,_=f[U].id),J(),l(1,b=!1))):ne==="Tab"?(l(1,b=!1),A.blur()):ne==="ArrowDown"?(b||l(1,b=!0),W(1)):ne==="ArrowUp"?(b||l(1,b=!0),W(-1)):ne==="Escape"&&l(1,b=!1)},re=z=>{const{key:ne}=z;if([" "].includes(ne))z.preventDefault();else return;l(1,b=!b),U>-1&&f[U].id!==_&&(l(0,_=f[U].id),J(),l(1,b=!1))},ae=(z,ne)=>{if(z.disabled){ne.stopPropagation();return}l(0,_=z.id),J(),A.focus()},le=(z,ne)=>{z.disabled||l(21,U=ne)},q=({target:z})=>{k||l(1,b=A.contains(z)?!b:!1)};return i.$$set=z=>{l(28,e=pe(pe({},e),Ie(z))),l(27,s=ye(e,o)),"items"in z&&l(3,f=z.items),"itemToString"in z&&l(4,u=z.itemToString),"selectedId"in z&&l(0,_=z.selectedId),"type"in z&&l(5,c=z.type),"direction"in z&&l(6,d=z.direction),"size"in z&&l(7,h=z.size),"open"in z&&l(1,b=z.open),"light"in z&&l(8,w=z.light),"disabled"in z&&l(9,k=z.disabled),"titleText"in z&&l(10,g=z.titleText),"invalid"in z&&l(11,E=z.invalid),"invalidText"in z&&l(12,y=z.invalidText),"warn"in z&&l(13,M=z.warn),"warnText"in z&&l(14,C=z.warnText),"helperText"in z&&l(15,I=z.helperText),"label"in z&&l(16,B=z.label),"hideLabel"in z&&l(17,x=z.hideLabel),"translateWithId"in z&&l(18,Z=z.translateWithId),"id"in z&&l(19,F=z.id),"name"in z&&l(20,j=z.name),"ref"in z&&l(2,A=z.ref),"$$scope"in z&&l(37,a=z.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&32&&l(23,t=c==="inline"),i.$$.dirty[0]&9&&l(22,n=f.find(z=>z.id===_)),i.$$.dirty[0]&2&&(b||l(21,U=-1))},e=Ie(e),[_,b,A,f,u,c,d,h,w,k,g,E,y,M,C,I,B,x,Z,F,j,U,n,t,W,J,P,s,e,r,te,ue,fe,re,ae,le,q,a]}class _r extends we{constructor(e){super(),ke(this,e,hr,mr,ve,{items:3,itemToString:4,selectedId:0,type:5,direction:6,size:7,open:1,light:8,disabled:9,titleText:10,invalid:11,invalidText:12,warn:13,warnText:14,helperText:15,label:16,hideLabel:17,translateWithId:18,id:19,name:20,ref:2},null,[-1,-1])}}const gr=_r;function ul(i){let e,l;return{c(){e=_e("title"),l=G(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=K(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function pr(i){let e,l,t=i[1]&&ul(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=ul(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Re(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:X,o:X,d(s){s&&m(e),t&&t.d()}}}function br(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Wt extends we{constructor(e){super(),ke(this,e,br,pr,ve,{size:0,title:1})}}function cl(i){let e,l;return{c(){e=_e("title"),l=G(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=K(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function vr(i){let e,l,t=i[1]&&cl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M26 24v4H6V24H4v4H4a2 2 0 002 2H26a2 2 0 002-2h0V24zM26 14L24.59 12.59 17 20.17 17 2 15 2 15 20.17 7.41 12.59 6 14 16 24 26 14z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=cl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Re(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:X,o:X,d(s){s&&m(e),t&&t.d()}}}function wr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class kr extends we{constructor(e){super(),ke(this,e,wr,vr,ve,{size:0,title:1})}}function dl(i){let e,l;return{c(){e=_e("title"),l=G(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=K(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function $r(i){let e,l,t=i[1]&&dl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M16 7a3 3 0 113-3A3.0033 3.0033 0 0116 7zm0-4a1 1 0 101 1A1.001 1.001 0 0016 3zM11 30a3 3 0 113-3A3.0033 3.0033 0 0111 30zm0-4a1 1 0 101 1A1.001 1.001 0 0011 26zM7 11a3 3 0 113-3A3.0033 3.0033 0 017 11zM7 7A1 1 0 108 8 1.001 1.001 0 007 7zM21 30a3 3 0 113-3A3.0033 3.0033 0 0121 30zm0-4a1 1 0 101 1A1.001 1.001 0 0021 26zM25 11a3 3 0 113-3A3.0033 3.0033 0 0125 11zm0-4a1 1 0 101 1A1.001 1.001 0 0025 7zM4 21a3 3 0 113-3A3.0033 3.0033 0 014 21zm0-4a1 1 0 101 1A1.001 1.001 0 004 17zM28 21a3 3 0 113-3A3.0033 3.0033 0 0128 21zm0-4a1 1 0 101 1A1.001 1.001 0 0028 17zM16 22a6 6 0 116-6A6.0069 6.0069 0 0116 22zm0-10a4 4 0 104 4A4.0045 4.0045 0 0016 12z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=dl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Re(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:X,o:X,d(s){s&&m(e),t&&t.d()}}}function Er(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Sr extends we{constructor(e){super(),ke(this,e,Er,$r,ve,{size:0,title:1})}}function ml(i){let e,l;return{c(){e=_e("title"),l=G(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=K(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function yr(i){let e,l,t,n,o,s,r,a,f,u=i[1]&&ml(i),_=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],c={};for(let d=0;d<_.length;d+=1)c=pe(c,_[d]);return{c(){e=_e("svg"),u&&u.c(),l=_e("path"),t=_e("circle"),n=_e("path"),o=_e("circle"),s=_e("path"),r=_e("circle"),a=_e("path"),f=_e("path"),this.h()},l(d){e=ge(d,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var h=S(e);u&&u.l(h),l=ge(h,"path",{d:!0}),S(l).forEach(m),t=ge(h,"circle",{cx:!0,cy:!0,r:!0}),S(t).forEach(m),n=ge(h,"path",{d:!0}),S(n).forEach(m),o=ge(h,"circle",{cx:!0,cy:!0,r:!0}),S(o).forEach(m),s=ge(h,"path",{d:!0}),S(s).forEach(m),r=ge(h,"circle",{cx:!0,cy:!0,r:!0}),S(r).forEach(m),a=ge(h,"path",{d:!0}),S(a).forEach(m),f=ge(h,"path",{d:!0}),S(f).forEach(m),h.forEach(m),this.h()},h(){D(l,"d","M20 25H27V27H20zM22 29H25V31H22zM27 23h-2c0-1.1.4-2 1.2-2.8l.5-.5c.8-.8 1.3-2 1.3-3.2 0-2.5-2-4.5-4.5-4.5S19 14 19 16.5c0 1.2.5 2.3 1.3 3.2l.5.5C21.6 21 22 21.9 22 23h-2c0-.5-.2-1-.6-1.4l-.5-.5c-1.2-1.2-1.9-2.9-1.9-4.6 0-3.6 2.9-6.5 6.5-6.5s6.5 2.9 6.5 6.5c0 1.7-.7 3.4-1.9 4.6l-.5.5C27.2 22 27 22.5 27 23zM6 22H14V24H6z"),D(t,"cx","12"),D(t,"cy","19"),D(t,"r","1"),D(n,"d","M6 18H9V20H6zM6 14H13V16H6zM10 10H17V12H10z"),D(o,"cx","7"),D(o,"cy","11"),D(o,"r","1"),D(s,"d","M16 6H20V8H16z"),D(r,"cx","13"),D(r,"cy","7"),D(r,"r","1"),D(a,"d","M6 6H10V8H6z"),D(f,"d","M18,28H4V4l18,0v4h2V4c0-1.1-0.9-2-2-2H4C2.9,2,2,2.9,2,4v24c0,1.1,0.9,2,2,2h14V28z"),Ve(e,c)},m(d,h){N(d,e,h),u&&u.m(e,null),v(e,l),v(e,t),v(e,n),v(e,o),v(e,s),v(e,r),v(e,a),v(e,f)},p(d,[h]){d[1]?u?u.p(d,h):(u=ml(d),u.c(),u.m(e,l)):u&&(u.d(1),u=null),Ve(e,c=Re(_,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},h&1&&{width:d[0]},h&1&&{height:d[0]},h&4&&d[2],h&8&&d[3]]))},i:X,o:X,d(d){d&&m(e),u&&u.d()}}}function Ir(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Dr extends we{constructor(e){super(),ke(this,e,Ir,yr,ve,{size:0,title:1})}}function hl(i){let e,l;return{c(){e=_e("title"),l=G(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=K(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Tr(i){let e,l,t,n=i[1]&&hl(i),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],s={};for(let r=0;r<o.length;r+=1)s=pe(s,o[r]);return{c(){e=_e("svg"),n&&n.c(),l=_e("path"),t=_e("path"),this.h()},l(r){e=ge(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=S(e);n&&n.l(a),l=ge(a,"path",{d:!0}),S(l).forEach(m),t=ge(a,"path",{d:!0}),S(t).forEach(m),a.forEach(m),this.h()},h(){D(l,"d","M17 22L17 14 13 14 13 16 15 16 15 22 12 22 12 24 20 24 20 22 17 22zM16 8a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 8z"),D(t,"d","M16,30A14,14,0,1,1,30,16,14,14,0,0,1,16,30ZM16,4A12,12,0,1,0,28,16,12,12,0,0,0,16,4Z"),Ve(e,s)},m(r,a){N(r,e,a),n&&n.m(e,null),v(e,l),v(e,t)},p(r,[a]){r[1]?n?n.p(r,a):(n=hl(r),n.c(),n.m(e,l)):n&&(n.d(1),n=null),Ve(e,s=Re(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:r[0]},a&1&&{height:r[0]},a&4&&r[2],a&8&&r[3]]))},i:X,o:X,d(r){r&&m(e),n&&n.d()}}}function Vr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class ct extends we{constructor(e){super(),ke(this,e,Vr,Tr,ve,{size:0,title:1})}}function _l(i){let e,l;return{c(){e=_e("title"),l=G(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=K(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Nr(i){let e,l,t=i[1]&&_l(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M29,27.5859l-7.5521-7.5521a11.0177,11.0177,0,1,0-1.4141,1.4141L27.5859,29ZM4,13a9,9,0,1,1,9,9A9.01,9.01,0,0,1,4,13Z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=_l(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Re(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:X,o:X,d(s){s&&m(e),t&&t.d()}}}function Mr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Pi extends we{constructor(e){super(),ke(this,e,Mr,Nr,ve,{size:0,title:1})}}function gl(i){let e,l;return{c(){e=_e("title"),l=G(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=K(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Cr(i){let e,l,t=i[1]&&gl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M30 6L26 6 26 2 24 2 24 6 20 6 20 8 24 8 24 12 26 12 26 8 30 8 30 6zM24 28.5859l-5.9751-5.9751a9.0234 9.0234 0 10-1.4141 1.4141L22.5859 30zM4 17a7 7 0 117 7A7.0078 7.0078 0 014 17z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=gl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Re(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:X,o:X,d(s){s&&m(e),t&&t.d()}}}function zr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Ai extends we{constructor(e){super(),ke(this,e,zr,Cr,ve,{size:0,title:1})}}function pl(i){let e,l;return{c(){e=_e("title"),l=G(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=K(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Fr(i){let e,l,t=i[1]&&pl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 18H16V20H2zM6 12H16V14H6zM10 6H16V8H10z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=pl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Re(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:X,o:X,d(s){s&&m(e),t&&t.d()}}}function Pr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Bi extends we{constructor(e){super(),ke(this,e,Pr,Fr,ve,{size:0,title:1})}}function bl(i){let e,l;return{c(){e=_e("title"),l=G(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=K(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Ar(i){let e,l,t=i[1]&&bl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 6H16V8H2zM6 12H16V14H6zM10 18H16V20H10z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=bl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Re(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:X,o:X,d(s){s&&m(e),t&&t.d()}}}function Br(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Hi extends we{constructor(e){super(),ke(this,e,Br,Ar,ve,{size:0,title:1})}}function vl(i){let e,l;return{c(){e=_e("title"),l=G(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=K(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Hr(i){let e,l,t=i[1]&&vl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M30 19.415L28.586 18 25 21.587 21.414 18 20 19.415 23.586 23 20 26.586 21.414 28 25 24.414 28.586 28 30 26.586 26.414 23 30 19.415zM10 18H16V20H10zM2 6H16V8H2zM6 12H16V14H6z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=vl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Re(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:X,o:X,d(s){s&&m(e),t&&t.d()}}}function Rr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Lr extends we{constructor(e){super(),ke(this,e,Rr,Hr,ve,{size:0,title:1})}}function wl(i){let e,l;return{c(){e=_e("title"),l=G(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=K(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Or(i){let e,l,t=i[1]&&wl(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let s=0;s<n.length;s+=1)o=pe(o,n[s]);return{c(){e=_e("svg"),t&&t.c(),l=_e("path"),this.h()},l(s){e=ge(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var r=S(e);t&&t.l(r),l=ge(r,"path",{d:!0}),S(l).forEach(m),r.forEach(m),this.h()},h(){D(l,"d","M4 6H22V8H4zM4 12H22V14H4zM4 18H22V20H4zM4 24H22V26H4zM26 6H28V8H26zM26 12H28V14H26zM26 18H28V20H26zM26 24H28V26H26z"),Ve(e,o)},m(s,r){N(s,e,r),t&&t.m(e,null),v(e,l)},p(s,[r]){s[1]?t?t.p(s,r):(t=wl(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Re(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},r&1&&{width:s[0]},r&1&&{height:s[0]},r&4&&s[2],r&8&&s[3]]))},i:X,o:X,d(s){s&&m(e),t&&t.d()}}}function qr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class jr extends we{constructor(e){super(),ke(this,e,qr,Or,ve,{size:0,title:1})}}function kl(i){let e,l;return{c(){e=_e("title"),l=G(i[1])},l(t){e=ge(t,"title",{});var n=S(e);l=K(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&2&&ce(l,t[1])},d(t){t&&m(e)}}}function Ur(i){let e,l,t,n=i[1]&&kl(i),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],s={};for(let r=0;r<o.length;r+=1)s=pe(s,o[r]);return{c(){e=_e("svg"),n&&n.c(),l=_e("path"),t=_e("path"),this.h()},l(r){e=ge(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=S(e);n&&n.l(a),l=ge(a,"path",{d:!0}),S(l).forEach(m),t=ge(a,"path",{d:!0}),S(t).forEach(m),a.forEach(m),this.h()},h(){D(l,"d","M10,14a4,4,0,1,1,4-4A4.0045,4.0045,0,0,1,10,14Zm0-6a2,2,0,1,0,1.998,2.0044A2.002,2.002,0,0,0,10,8Z"),D(t,"d","M16.6436,29.4145,2.5858,15.3555A2,2,0,0,1,2,13.9414V4A2,2,0,0,1,4,2h9.9413a2,2,0,0,1,1.4142.5858L29.4144,16.6436a2.0005,2.0005,0,0,1,0,2.8285l-9.9424,9.9425a2.0008,2.0008,0,0,1-2.8285,0ZM4,4v9.9417L18.0578,28,28,18.0579,13.9416,4Z"),Ve(e,s)},m(r,a){N(r,e,a),n&&n.m(e,null),v(e,l),v(e,t)},p(r,[a]){r[1]?n?n.p(r,a):(n=kl(r),n.c(),n.m(e,l)):n&&(n.d(1),n=null),Ve(e,s=Re(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:r[0]},a&1&&{height:r[0]},a&4&&r[2],a&8&&r[3]]))},i:X,o:X,d(r){r&&m(e),n&&n.d()}}}function Yr(i,e,l){let t,n;const o=["size","title"];let s=ye(e,o),{size:r=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ie(f))),l(3,s=ye(e,o)),"size"in f&&l(0,r=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[r,a,n,s,t]}class Qr extends we{constructor(e){super(),ke(this,e,Yr,Ur,ve,{size:0,title:1})}}function $l(i){let e;return{c(){e=T("div"),this.h()},l(l){e=V(l,"DIV",{id:!0,style:!0}),S(e).forEach(m),this.h()},h(){D(e,"id","svelte-infinite-scroll"),ft(e,"width","0")},m(l,t){N(l,e,t),i[11](e)},p:X,d(l){l&&m(e),i[11](null)}}}function Wr(i){let e,l=!i[1]&&!i[0]&&$l(i);return{c(){l&&l.c(),e=de()},l(t){l&&l.l(t),e=de()},m(t,n){l&&l.m(t,n),N(t,e,n)},p(t,[n]){!t[1]&&!t[0]?l?l.p(t,n):(l=$l(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:X,o:X,d(t){l&&l.d(t),t&&m(e)}}}function Zr(i,e,l){let{threshold:t=0}=e,{horizontal:n=!1}=e,{elementScroll:o=null}=e,{hasMore:s=!0}=e,{reverse:r=!1}=e,{window:a=!1}=e;const f=dt();let u=!1,_,c,d,h;const b=g=>{if(!s)return;const E=g.target;w(E,r,n)<=t?(!u&&s&&(f("loadMore"),l(8,c=E.scrollHeight),l(9,d=E.scrollTop)),l(7,u=!0)):l(7,u=!1)},w=(g,E,y)=>{const M=g.documentElement?g.documentElement:g;return E?y?M.scrollLeft:M.scrollTop:y?M.scrollWidth-M.clientWidth-M.scrollLeft:M.scrollHeight-M.clientHeight-M.scrollTop};ni(()=>{a?l(10,h=document):o?l(10,h=o):l(10,h=_.parentNode)}),Zi(()=>{h&&(h.removeEventListener("scroll",b),h.removeEventListener("resize",b))});function k(g){He[g?"unshift":"push"](()=>{_=g,l(2,_)})}return i.$$set=g=>{"threshold"in g&&l(3,t=g.threshold),"horizontal"in g&&l(4,n=g.horizontal),"elementScroll"in g&&l(0,o=g.elementScroll),"hasMore"in g&&l(5,s=g.hasMore),"reverse"in g&&l(6,r=g.reverse),"window"in g&&l(1,a=g.window)},i.$$.update=()=>{i.$$.dirty&1088&&h&&(r&&l(10,h.scrollTop=h.scrollHeight,h),h.addEventListener("scroll",b),h.addEventListener("resize",b)),i.$$.dirty&1984&&u&&r&&l(10,h.scrollTop=h.scrollHeight-c+d,h)},[o,a,_,t,n,s,r,u,c,d,h,k]}class Gr extends we{constructor(e){super(),ke(this,e,Zr,Wr,ve,{threshold:3,horizontal:4,elementScroll:0,hasMore:5,reverse:6,window:1})}}function El(i){const e=i[7].find(function(...t){return i[26](i[34],...t)});i[35]=e}function Sl(i){let e,l;return{c(){e=T("span"),l=G(i[0]),this.h()},l(t){e=V(t,"SPAN",{class:!0});var n=S(e);l=K(n,i[0]),n.forEach(m),this.h()},h(){D(e,"class","mr-1")},m(t,n){N(t,e,n),v(e,l)},p(t,n){n[0]&1&&ce(l,t[0])},d(t){t&&m(e)}}}function Kr(i){let e,l,t;function n(s){i[28](s)}let o={size:"sm",open:i[4],items:i[7],shouldFilterItem:ia,placeholder:"Select or add a new label",$$slots:{default:[la,({item:s})=>({34:s}),({item:s})=>[0,s?8:0]]},$$scope:{ctx:i}};return i[2]!==void 0&&(o.value=i[2]),e=new Fi({props:o}),i[27](e),He.push(()=>Ue(e,"value",n)),e.$on("select",i[14]),{c(){H(e.$$.fragment)},l(s){O(e.$$.fragment,s)},m(s,r){R(e,s,r),t=!0},p(s,r){const a={};r[0]&16&&(a.open=s[4]),r[0]&128&&(a.items=s[7]),r[0]&132|r[1]&40&&(a.$$scope={dirty:r,ctx:s}),!l&&r[0]&4&&(l=!0,a.value=s[2],Ye(()=>l=!1)),e.$set(a)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){i[27](null),L(e,s)}}}function Jr(i){let e,l;return e=new Le({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Xr(i){let e,l=i[35].text+"",t;return{c(){e=T("div"),t=G(l),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);t=K(o,l),o.forEach(m),this.h()},h(){D(e,"class","flex justify-between gap-x-8")},m(n,o){N(n,e,o),v(e,t)},p(n,o){o[0]&128|o[1]&8&&l!==(l=n[35].text+"")&&ce(t,l)},i:X,o:X,d(n){n&&m(e)}}}function xr(i){let e,l,t,n,o,s,r;return l=new Qr({props:{$$slots:{default:[ta]},$$scope:{ctx:i}}}),{c(){e=T("div"),H(l.$$.fragment),t=Y(),n=T("div"),o=G("New label: "),s=G(i[2]),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),t=Q(f),n=V(f,"DIV",{class:!0});var u=S(n);o=K(u,"New label: "),s=K(u,i[2]),u.forEach(m),f.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-concept flex flex-row items-center justify-items-center")},m(a,f){N(a,e,f),R(l,e,null),v(e,t),v(e,n),v(n,o),v(n,s),r=!0},p(a,f){const u={};f[1]&32&&(u.$$scope={dirty:f,ctx:a}),l.$set(u),(!r||f[0]&4)&&ce(s,a[2])},i(a){r||(p(l.$$.fragment,a),r=!0)},o(a){$(l.$$.fragment,a),r=!1},d(a){a&&m(e),L(l)}}}function ea(i){let e;return{c(){e=T("div")},l(l){e=V(l,"DIV",{}),S(e).forEach(m)},m(l,t){N(l,e,t)},p:X,i:X,o:X,d(l){l&&m(e)}}}function ta(i){let e,l;return e=new Wt({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function la(i){El(i);let e,l,t,n;const o=[ea,xr,Xr],s=[];function r(a,f){return a[35]==null?0:a[35].id==="new-label"?1:2}return e=r(i),l=s[e]=o[e](i),{c(){l.c(),t=de()},l(a){l.l(a),t=de()},m(a,f){s[e].m(a,f),N(a,t,f),n=!0},p(a,f){El(a);let u=e;e=r(a),e===u?s[e].p(a,f):(ie(),$(s[u],1,1,()=>{s[u]=null}),se(),l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){s[e].d(a),a&&m(t)}}}function na(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b;t=new Wt({});let w=i[0]!=null&&Sl(i);const k=[Jr,Kr],g=[];function E(y,M){return y[9]==null||y[9].isLoading?0:1}return u=E(i),_=g[u]=k[u](i),{c(){e=T("div"),l=T("button"),H(t.$$.fragment),n=Y(),w&&w.c(),a=Y(),f=T("div"),_.c(),this.h()},l(y){e=V(y,"DIV",{class:!0});var M=S(e);l=V(M,"BUTTON",{class:!0});var C=S(l);O(t.$$.fragment,C),n=Q(C),w&&w.l(C),C.forEach(m),M.forEach(m),a=Q(y),f=V(y,"DIV",{class:!0});var I=S(f);_.l(I),I.forEach(m),this.h()},h(){l.disabled=o=!i[8],D(l,"class","flex items-center gap-x-2 border border-gray-300"),oe(l,"opacity-30",!i[8]),oe(l,"hidden",i[4]),D(e,"class","w-full"),D(f,"class","absolute left-0 top-0 w-60"),oe(f,"hidden",!i[4])},m(y,M){N(y,e,M),v(e,l),R(t,l,null),v(l,n),w&&w.m(l,null),N(y,a,M),N(y,f,M),g[u].m(f,null),d=!0,h||(b=[Fe(l,"click",i[13]),$e(s=Se.call(null,l,{text:i[1]})),$e(r=Se.call(null,e,{text:i[8]?"":"You do not have access to add labels."})),$e(c=xs.call(null,f,i[29]))],h=!0)},p(y,M){y[0]!=null?w?w.p(y,M):(w=Sl(y),w.c(),w.m(l,null)):w&&(w.d(1),w=null),(!d||M[0]&256&&o!==(o=!y[8]))&&(l.disabled=o),s&&Pe(s.update)&&M[0]&2&&s.update.call(null,{text:y[1]}),(!d||M[0]&256)&&oe(l,"opacity-30",!y[8]),(!d||M[0]&16)&&oe(l,"hidden",y[4]),r&&Pe(r.update)&&M[0]&256&&r.update.call(null,{text:y[8]?"":"You do not have access to add labels."});let C=u;u=E(y),u===C?g[u].p(y,M):(ie(),$(g[C],1,1,()=>{g[C]=null}),se(),_=g[u],_?_.p(y,M):(_=g[u]=k[u](y),_.c()),p(_,1),_.m(f,null)),c&&Pe(c.update)&&M[0]&16&&c.update.call(null,y[29]),(!d||M[0]&16)&&oe(f,"hidden",!y[4])},i(y){d||(p(t.$$.fragment,y),p(_),d=!0)},o(y){$(t.$$.fragment,y),$(_),d=!1},d(y){y&&m(e),L(t),w&&w.d(),y&&m(a),y&&m(f),g[u].d(),h=!1,Qe(b)}}}const ia=(i,e)=>i.text.toLowerCase().includes(e.toLowerCase())||i.id==="new-label";function sa(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h,b,w,k=X,g=()=>(k(),k=Te(b,q=>l(32,w=q)),b),E,y=X,M=()=>(y(),y=Te(c,q=>l(9,E=q)),c),C,I,B;i.$$.on_destroy.push(()=>k()),i.$$.on_destroy.push(()=>y());let{addLabelsQuery:x}=e,{hideLabels:Z=void 0}=e,{buttonText:F=void 0}=e,{helperText:j="Add label"}=e,A,ee="";const U=Ni(),W=Ze();be(i,W,q=>l(24,I=q));const J=qe();be(i,J,q=>l(23,C=q));const P=mt();be(i,P,q=>l(25,B=q));function te(){l(4,t=!0),requestAnimationFrame(()=>{A.$set({open:!0})})}const ue=q=>{const z=q.detail.selectedItem,ne={...x,label_name:z.text};E.mutate([n,o,ne],{onSuccess:()=>{var Ne;const De=(Ne=w.data)==null?void 0:Ne.pages[0].total_num_rows,he=ne.row_ids!=null?`Document id: ${ne.row_ids}`:`${De} rows labeled`;U.addNotification({kind:"success",title:`Added label "${ne.label_name}"`,message:he}),l(4,t=!1)}}),A.clear()},fe=(q,z)=>z.id===q.id;function re(q){He[q?"unshift":"push"](()=>{A=q,l(3,A)})}function ae(q){ee=q,l(2,ee)}const le=()=>l(4,t=!1);return i.$$set=q=>{"addLabelsQuery"in q&&l(15,x=q.addLabelsQuery),"hideLabels"in q&&l(16,Z=q.hideLabels),"buttonText"in q&&l(0,F=q.buttonText),"helperText"in q&&l(1,j=q.helperText)},i.$$.update=()=>{var q;i.$$.dirty[0]&8388608&&(n=C.namespace),i.$$.dirty[0]&8388608&&(o=C.datasetName),i.$$.dirty[0]&33554432&&l(8,s=(q=B.data)==null?void 0:q.access.dataset.edit_labels),i.$$.dirty[0]&16777216&&l(21,r=I.schema&&fi(I.schema)),i.$$.dirty[0]&4&&l(22,a=/^[A-Za-z0-9_-]+$/.test(ee)),i.$$.dirty[0]&4194308&&l(20,f={id:"new-label",text:ee,disabled:!a}),i.$$.dirty[0]&2162688&&l(19,u=(r==null?void 0:r.filter(z=>!(Z||[]).includes(z)).map((z,ne)=>({id:`label_${ne}`,text:z})))||[]),i.$$.dirty[0]&1572868&&l(7,_=[...ee!=""?[f]:[],...u]),i.$$.dirty[0]&16777216&&M(l(6,c=I.schema!=null?ns(I.schema):null)),i.$$.dirty[0]&8388608&&l(18,d=Ct(C)),i.$$.dirty[0]&16777216&&l(17,h=I.selectRowsSchema),i.$$.dirty[0]&8781824&&g(l(5,b=ui(C.namespace,C.datasetName,d||{},h!=null&&h.isSuccess?h.data.schema:void 0)))},l(4,t=!1),[F,j,ee,A,t,b,c,_,s,E,W,J,P,te,ue,x,Z,h,d,u,f,r,a,C,I,B,fe,re,ae,le]}class Ri extends we{constructor(e){super(),ke(this,e,sa,na,ve,{addLabelsQuery:15,hideLabels:16,buttonText:0,helperText:1},null,[-1,-1])}}function ra(i){let e,l,t,n,o,s,r,a,f,u;t=new is({});const _=i[7].default,c=ii(_,i,i[10],null);return{c(){e=T("div"),l=T("button"),H(t.$$.fragment),o=Y(),s=T("span"),c&&c.c(),this.h()},l(d){e=V(d,"DIV",{class:!0});var h=S(e);l=V(h,"BUTTON",{class:!0});var b=S(l);O(t.$$.fragment,b),b.forEach(m),o=Q(h),s=V(h,"SPAN",{class:!0});var w=S(s);c&&c.l(w),w.forEach(m),h.forEach(m),this.h()},h(){l.disabled=i[1],D(l,"class","p-0 opacity-50 hover:opacity-100"),D(s,"class","truncate"),D(e,"class","removable-tag flex items-center gap-x-1")},m(d,h){N(d,e,h),v(e,l),R(t,l,null),v(e,o),v(e,s),c&&c.m(s,null),a=!0,f||(u=[$e(n=Se.call(null,l,{text:i[1]?i[2]:i[3]})),Fe(l,"click",Gi(i[8])),$e(r=Se.call(null,s,{text:i[4]}))],f=!0)},p(d,h){(!a||h&2)&&(l.disabled=d[1]),n&&Pe(n.update)&&h&14&&n.update.call(null,{text:d[1]?d[2]:d[3]}),c&&c.p&&(!a||h&1024)&&si(c,_,d,d[10],a?ai(_,d[10],h,null):ri(d[10]),null),r&&Pe(r.update)&&h&16&&r.update.call(null,{text:d[4]})},i(d){a||(p(t.$$.fragment,d),p(c,d),a=!0)},o(d){$(t.$$.fragment,d),$(c,d),a=!1},d(d){d&&m(e),L(t),c&&c.d(d),f=!1,Qe(u)}}}function aa(i){let e,l;const t=[{type:i[0]},i[6]];let n={$$slots:{default:[ra]},$$scope:{ctx:i}};for(let o=0;o<t.length;o+=1)n=pe(n,t[o]);return e=new Ge({props:n}),e.$on("click",i[9]),{c(){H(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,s){R(e,o,s),l=!0},p(o,[s]){const r=s&65?Re(t,[s&1&&{type:o[0]},s&64&&oi(o[6])]):{};s&1054&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){L(e,o)}}}function oa(i,e,l){const t=["type","removeDisabled","removeDisabledHelperText","closeHelperText","clickHelperText"];let n=ye(e,t),{$$slots:o={},$$scope:s}=e;const r=dt();let{type:a}=e,{removeDisabled:f=!1}=e,{removeDisabledHelperText:u=void 0}=e,{closeHelperText:_=void 0}=e,{clickHelperText:c=void 0}=e;const d=()=>r("remove");function h(b){pt.call(this,i,b)}return i.$$set=b=>{e=pe(pe({},e),Ie(b)),l(6,n=ye(e,t)),"type"in b&&l(0,a=b.type),"removeDisabled"in b&&l(1,f=b.removeDisabled),"removeDisabledHelperText"in b&&l(2,u=b.removeDisabledHelperText),"closeHelperText"in b&&l(3,_=b.closeHelperText),"clickHelperText"in b&&l(4,c=b.clickHelperText),"$$scope"in b&&l(10,s=b.$$scope)},[a,f,u,_,c,r,n,o,d,h,s]}class Et extends we{constructor(e){super(),ke(this,e,oa,aa,ve,{type:0,removeDisabled:1,removeDisabledHelperText:2,closeHelperText:3,clickHelperText:4})}}function fa(i){let e,l=(i[2]?"":i[5])+"",t,n,o=i[0][i[1].op]+"",s,r,a;return{c(){e=T("span"),t=G(l),n=Y(),s=G(o),r=Y(),a=G(i[4]),this.h()},l(f){e=V(f,"SPAN",{class:!0});var u=S(e);t=K(u,l),u.forEach(m),n=Q(f),s=K(f,o),r=Q(f),a=K(f,i[4]),this.h()},h(){D(e,"class","font-mono")},m(f,u){N(f,e,u),v(e,t),N(f,n,u),N(f,s,u),N(f,r,u),N(f,a,u)},p(f,u){u&36&&l!==(l=(f[2]?"":f[5])+"")&&ce(t,l),u&2&&o!==(o=f[0][f[1].op]+"")&&ce(s,o),u&16&&ce(a,f[4])},d(f){f&&m(e),f&&m(n),f&&m(s),f&&m(r),f&&m(a)}}}function ua(i){let e,l,t=(i[2]?"":i[5])+"",n;return{c(){e=G("has "),l=T("span"),n=G(t),this.h()},l(o){e=K(o,"has "),l=V(o,"SPAN",{class:!0});var s=S(l);n=K(s,t),s.forEach(m),this.h()},h(){D(l,"class","font-mono")},m(o,s){N(o,e,s),N(o,l,s),v(l,n)},p(o,s){s&36&&t!==(t=(o[2]?"":o[5])+"")&&ce(n,t)},d(o){o&&m(e),o&&m(l)}}}function ca(i){let e,l;return{c(){e=G("is labeled "),l=G(i[7])},l(t){e=K(t,"is labeled "),l=K(t,i[7])},m(t,n){N(t,e,n),N(t,l,n)},p(t,n){n&128&&ce(l,t[7])},d(t){t&&m(e),t&&m(l)}}}function da(i){let e;function l(o,s){return o[7]!=null?ca:o[1].op==="exists"?ua:fa}let t=l(i),n=t(i);return{c(){n.c(),e=de()},l(o){n.l(o),e=de()},m(o,s){n.m(o,s),N(o,e,s)},p(o,s){t===(t=l(o))&&n?n.p(o,s):(n.d(1),n=t(o),n&&(n.c(),n.m(e.parentNode,e)))},d(o){n.d(o),o&&m(e)}}}function ma(i){let e,l,t,n,o,s;return l=new Et({props:{interactive:!0,type:"magenta",$$slots:{default:[da]},$$scope:{ctx:i}}}),l.$on("click",i[12]),l.$on("remove",i[13]),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","filter-pill items-center")},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=$e(t=Se.call(null,e,{text:i[6]})),o=!0)},p(r,[a]){const f={};a&16566&&(f.$$scope={dirty:a,ctx:r}),l.$set(f),t&&Pe(t.update)&&a&64&&t.update.call(null,{text:r[6]})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,s()}}}function ha(i,e,l){let t,n,o,s,r,a,f;const u={equals:"=",not_equal:"≠",less:"<",less_equal:"≤",greater:">",greater_equal:"≥",in:"in",exists:"exists"};let{filter:_}=e,{hidePath:c=!1}=e,{schema:d}=e;const h=qe();be(i,h,k=>l(8,f=k));const b=()=>Xe({command:xe.EditFilter,namespace:f.namespace,datasetName:f.datasetName,path:s}),w=()=>h.removeFilter(_);return i.$$set=k=>{"filter"in k&&l(1,_=k.filter),"hidePath"in k&&l(2,c=k.hidePath),"schema"in k&&l(10,d=k.schema)},i.$$.update=()=>{i.$$.dirty&1026&&l(11,t=ci(d,typeof _.path=="string"?[_.path]:_.path)),i.$$.dirty&2048&&l(7,n=t!=null?ss(t):null),i.$$.dirty&2&&l(4,o=Ee(_.value||"false")),i.$$.dirty&2&&l(3,s=zt(_.path)),i.$$.dirty&26&&l(6,r=_.op==="exists"?`has ${Je(s)}`:`${Je(s)} ${u[_.op]} ${o}`),i.$$.dirty&8&&l(5,a=di(s))},[u,_,c,s,o,a,r,n,f,h,d,t,b,w]}class Li extends we{constructor(e){super(),ke(this,e,ha,ma,ve,{FILTER_SHORTHANDS:0,filter:1,hidePath:2,schema:10})}get FILTER_SHORTHANDS(){return this.$$.ctx[0]}}function yl(i){let e,l=i[0].concept_namespace+"",t,n,o=i[0].concept_name+"",s;return{c(){e=T("div"),t=G(l),n=G(" / "),s=G(o),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);t=K(a,l),n=K(a," / "),s=K(a,o),a.forEach(m),this.h()},h(){D(e,"class","mb-2 w-full text-center text-xs")},m(r,a){N(r,e,a),v(e,t),v(e,n),v(e,s)},p(r,a){a&1&&l!==(l=r[0].concept_namespace+"")&&ce(t,l),a&1&&o!==(o=r[0].concept_name+"")&&ce(s,o)},d(r){r&&m(e)}}}function _a(i){let e=Be(i[0].path)+"",l,t,n=i[0].type+"",o;return{c(){l=G(e),t=G(": "),o=G(n)},l(s){l=K(s,e),t=K(s,": "),o=K(s,n)},m(s,r){N(s,l,r),N(s,t,r),N(s,o,r)},p(s,r){r&1&&e!==(e=Be(s[0].path)+"")&&ce(l,e),r&1&&n!==(n=s[0].type+"")&&ce(o,n)},d(s){s&&m(l),s&&m(t),s&&m(o)}}}function Il(i){let e,l,t;return l=new Mi({props:{embedding:i[0].embedding}}),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);O(l.$$.fragment,o),o.forEach(m),this.h()},h(){D(e,"class","ml-2")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p(n,o){const s={};o&1&&(s.embedding=n[0].embedding),l.$set(s)},i(n){t||(p(l.$$.fragment,n),t=!0)},o(n){$(l.$$.fragment,n),t=!1},d(n){n&&m(e),L(l)}}}function Dl(i){let e,l;return{c(){e=T("div"),l=G(i[2]),this.h()},l(t){e=V(t,"DIV",{class:!0});var n=S(e);l=K(n,i[2]),n.forEach(m),this.h()},h(){D(e,"class","mt-2 whitespace-pre-wrap text-left")},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&4&&ce(l,t[2])},d(t){t&&m(e)}}}function ga(i){let e,l,t,n,o,s,r,a,f=i[0].type==="concept"&&yl(i);n=new Ge({props:{type:i[1],$$slots:{default:[_a]},$$scope:{ctx:i}}});let u=(i[0].type==="semantic"||i[0].type==="concept")&&Il(i),_=i[2]&&Dl(i);return{c(){f&&f.c(),e=Y(),l=T("div"),t=T("div"),H(n.$$.fragment),o=Y(),u&&u.c(),s=Y(),_&&_.c(),r=de(),this.h()},l(c){f&&f.l(c),e=Q(c),l=V(c,"DIV",{class:!0});var d=S(l);t=V(d,"DIV",{class:!0});var h=S(t);O(n.$$.fragment,h),h.forEach(m),o=Q(d),u&&u.l(d),d.forEach(m),s=Q(c),_&&_.l(c),r=de(),this.h()},h(){D(t,"class","whitespace-nowrap"),D(l,"class","flex items-center justify-items-center")},m(c,d){f&&f.m(c,d),N(c,e,d),N(c,l,d),v(l,t),R(n,t,null),v(l,o),u&&u.m(l,null),N(c,s,d),_&&_.m(c,d),N(c,r,d),a=!0},p(c,[d]){c[0].type==="concept"?f?f.p(c,d):(f=yl(c),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null);const h={};d&2&&(h.type=c[1]),d&9&&(h.$$scope={dirty:d,ctx:c}),n.$set(h),c[0].type==="semantic"||c[0].type==="concept"?u?(u.p(c,d),d&1&&p(u,1)):(u=Il(c),u.c(),p(u,1),u.m(l,null)):u&&(ie(),$(u,1,1,()=>{u=null}),se()),c[2]?_?_.p(c,d):(_=Dl(c),_.c(),_.m(r.parentNode,r)):_&&(_.d(1),_=null)},i(c){a||(p(n.$$.fragment,c),p(u),a=!0)},o(c){$(n.$$.fragment,c),$(u),a=!1},d(c){f&&f.d(c),c&&m(e),c&&m(l),L(n),u&&u.d(),c&&m(s),_&&_.d(c),c&&m(r)}}}function pa(i,e,l){let t,{search:n}=e,{tagType:o="outline"}=e;return i.$$set=s=>{"search"in s&&l(0,n=s.search),"tagType"in s&&l(1,o=s.tagType)},i.$$.update=()=>{i.$$.dirty&1&&l(2,t=n.type==="concept"?"":n.query)},[n,o,t]}class Tl extends we{constructor(e){super(),ke(this,e,pa,ga,ve,{search:0,tagType:1})}}function ba(i){let e,l=Be(i[0].path)+"",t,n,o,s;return{c(){e=T("span"),t=G(l),n=G(' has "'),o=G(i[2]),s=G('"'),this.h()},l(r){e=V(r,"SPAN",{class:!0});var a=S(e);t=K(a,l),a.forEach(m),n=K(r,' has "'),o=K(r,i[2]),s=K(r,'"'),this.h()},h(){D(e,"class","font-mono")},m(r,a){N(r,e,a),v(e,t),N(r,n,a),N(r,o,a),N(r,s,a)},p(r,a){a&1&&l!==(l=Be(r[0].path)+"")&&ce(t,l),a&4&&ce(o,r[2])},d(r){r&&m(e),r&&m(n),r&&m(o),r&&m(s)}}}function va(i){let e,l,t,n,o,s;return l=new Et({props:{title:"query",interactive:!0,type:i[1],$$slots:{default:[ba]},$$scope:{ctx:i}}}),l.$on("click",i[6]),l.$on("remove",i[7]),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","search-pill items-center text-left")},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=$e(t=Se.call(null,e,{component:Tl,props:{search:i[0],tagType:i[1]}})),o=!0)},p(r,[a]){const f={};a&2&&(f.type=r[1]),a&517&&(f.$$scope={dirty:a,ctx:r}),l.$set(f),t&&Pe(t.update)&&a&3&&t.update.call(null,{component:Tl,props:{search:r[0],tagType:r[1]}})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,s()}}}function wa(i,e,l){let t,n,o,{search:s}=e;const r={keyword:"outline",semantic:"teal",concept:"green"},a=qe(),f=Ze();be(i,f,c=>l(3,o=c));function u(c){pt.call(this,i,c)}const _=()=>{var c;return a.removeSearch(s,((c=o.selectRowsSchema)==null?void 0:c.data)||null)};return i.$$set=c=>{"search"in c&&l(0,s=c.search)},i.$$.update=()=>{i.$$.dirty&1&&l(2,t=s.type==="concept"?s.concept_name:s.query),i.$$.dirty&1&&l(1,n=s.type!=null?r[s.type]:"outline")},[s,n,t,o,a,f,u,_]}class Oi extends we{constructor(e){super(),ke(this,e,wa,va,ve,{search:0})}}function Vl(i,e,l){const t=i.slice();return t[27]=e[l][0],t[28]=e[l][1],t}function Nl(i,e,l){const t=i.slice();return t[31]=e[l],t}function Ml(i,e,l){const t=i.slice();return t[34]=e[l],t}function Cl(i,e,l){const t=i.slice();return t[37]=e[l],t}function zl(i,e,l){const t=i.slice();return t[40]=e[l],t}function Fl(i){let e,l,t,n=i[15],o=[];for(let a=0;a<n.length;a+=1)o[a]=Bl(Cl(i,n,a));const s=a=>$(o[a],1,1,()=>{o[a]=null});let r=i[10]!=null&&i[10].length>0&&Hl(i);return{c(){e=T("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Y(),r&&r.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);for(let u=0;u<o.length;u+=1)o[u].l(f);l=Q(f),r&&r.l(f),f.forEach(m),this.h()},h(){D(e,"class","flex w-full flex-row gap-x-4")},m(a,f){N(a,e,f);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);v(e,l),r&&r.m(e,null),t=!0},p(a,f){if(f[0]&229384){n=a[15];let u;for(u=0;u<n.length;u+=1){const _=Cl(a,n,u);o[u]?(o[u].p(_,f),p(o[u],1)):(o[u]=Bl(_),o[u].c(),p(o[u],1),o[u].m(e,l))}for(ie(),u=n.length;u<o.length;u+=1)s(u);se()}a[10]!=null&&a[10].length>0?r?(r.p(a,f),f[0]&1024&&p(r,1)):(r=Hl(a),r.c(),p(r,1),r.m(e,null)):r&&(ie(),$(r,1,1,()=>{r=null}),se())},i(a){if(!t){for(let f=0;f<n.length;f+=1)p(o[f]);p(r),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)$(o[f]);$(r),t=!1},d(a){a&&m(e),Ae(o,a),r&&r.d()}}}function Pl(i){let e,l,t=i[16][i[37]]+"",n,o,s,r,a,f=i[3][i[37]],u=[];for(let c=0;c<f.length;c+=1)u[c]=Al(zl(i,f,c));const _=c=>$(u[c],1,1,()=>{u[c]=null});return{c(){e=T("div"),l=T("div"),n=G(t),o=Y(),s=T("div");for(let c=0;c<u.length;c+=1)u[c].c();r=Y(),this.h()},l(c){e=V(c,"DIV",{class:!0});var d=S(e);l=V(d,"DIV",{class:!0});var h=S(l);n=K(h,t),h.forEach(m),o=Q(d),s=V(d,"DIV",{class:!0});var b=S(s);for(let w=0;w<u.length;w+=1)u[w].l(b);b.forEach(m),r=Q(d),d.forEach(m),this.h()},h(){D(l,"class","text-xs font-light"),D(s,"class","flex flex-row gap-x-1"),D(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(c,d){N(c,e,d),v(e,l),v(l,n),v(e,o),v(e,s);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(s,null);v(e,r),a=!0},p(c,d){if(d[0]&163848){f=c[3][c[37]];let h;for(h=0;h<f.length;h+=1){const b=zl(c,f,h);u[h]?(u[h].p(b,d),p(u[h],1)):(u[h]=Al(b),u[h].c(),p(u[h],1),u[h].m(s,null))}for(ie(),h=f.length;h<u.length;h+=1)_(h);se()}},i(c){if(!a){for(let d=0;d<f.length;d+=1)p(u[d]);a=!0}},o(c){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)$(u[d]);a=!1},d(c){c&&m(e),Ae(u,c)}}}function Al(i){let e,l;function t(){return i[24](i[40])}return e=new Oi({props:{search:i[40]}}),e.$on("click",t),{c(){H(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){i=n;const s={};o[0]&8&&(s.search=i[40]),e.$set(s)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){$(e.$$.fragment,n),l=!1},d(n){L(e,n)}}}function Bl(i){let e,l,t=i[3][i[37]]&&Pl(i);return{c(){t&&t.c(),e=de()},l(n){t&&t.l(n),e=de()},m(n,o){t&&t.m(n,o),N(n,e,o),l=!0},p(n,o){n[3][n[37]]?t?(t.p(n,o),o[0]&8&&p(t,1)):(t=Pl(n),t.c(),p(t,1),t.m(e.parentNode,e)):t&&(ie(),$(t,1,1,()=>{t=null}),se())},i(n){l||(p(t),l=!0)},o(n){$(t),l=!1},d(n){t&&t.d(n),n&&m(e)}}}function Hl(i){let e,l,t,n,o,s,r=i[10],a=[];for(let u=0;u<r.length;u+=1)a[u]=Rl(Ml(i,r,u));const f=u=>$(a[u],1,1,()=>{a[u]=null});return{c(){e=T("div"),l=T("div"),t=G("Filters"),n=Y(),o=T("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=V(u,"DIV",{class:!0});var _=S(e);l=V(_,"DIV",{class:!0});var c=S(l);t=K(c,"Filters"),c.forEach(m),n=Q(_),o=V(_,"DIV",{class:!0});var d=S(o);for(let h=0;h<a.length;h+=1)a[h].l(d);d.forEach(m),_.forEach(m),this.h()},h(){D(l,"class","text-xs font-light"),D(o,"class","flex flex-row gap-x-1"),D(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(u,_){N(u,e,_),v(e,l),v(l,t),v(e,n),v(e,o);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(o,null);s=!0},p(u,_){if(_[0]&1088){r=u[10];let c;for(c=0;c<r.length;c+=1){const d=Ml(u,r,c);a[c]?(a[c].p(d,_),p(a[c],1)):(a[c]=Rl(d),a[c].c(),p(a[c],1),a[c].m(o,null))}for(ie(),c=r.length;c<a.length;c+=1)f(c);se()}},i(u){if(!s){for(let _=0;_<r.length;_+=1)p(a[_]);s=!0}},o(u){a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)$(a[_]);s=!1},d(u){u&&m(e),Ae(a,u)}}}function Rl(i){let e,l;return e=new Li({props:{schema:i[6],filter:i[34]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&64&&(o.schema=t[6]),n[0]&1024&&(o.filter=t[34]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ll(i){let e;function l(o,s){return o[0]==o[1].dataset_manifest.num_items?$a:ka}let t=l(i),n=t(i);return{c(){n.c(),e=de()},l(o){n.l(o),e=de()},m(o,s){n.m(o,s),N(o,e,s)},p(o,s){t===(t=l(o))&&n?n.p(o,s):(n.d(1),n=t(o),n&&(n.c(),n.m(e.parentNode,e)))},d(o){n.d(o),o&&m(e)}}}function ka(i){let e=Ee(i[0])+"",l,t,n=Ee(i[1].dataset_manifest.num_items)+"",o,s;return{c(){l=G(e),t=G(" of "),o=G(n),s=G(" rows")},l(r){l=K(r,e),t=K(r," of "),o=K(r,n),s=K(r," rows")},m(r,a){N(r,l,a),N(r,t,a),N(r,o,a),N(r,s,a)},p(r,a){a[0]&1&&e!==(e=Ee(r[0])+"")&&ce(l,e),a[0]&2&&n!==(n=Ee(r[1].dataset_manifest.num_items)+"")&&ce(o,n)},d(r){r&&m(l),r&&m(t),r&&m(o),r&&m(s)}}}function $a(i){let e=Ee(i[0])+"",l,t;return{c(){l=G(e),t=G(" rows")},l(n){l=K(n,e),t=K(n," rows")},m(n,o){N(n,l,o),N(n,t,o)},p(n,o){o[0]&1&&e!==(e=Ee(n[0])+"")&&ce(l,e)},d(n){n&&m(l),n&&m(t)}}}function Ol(i){let e,l;return e=new At({props:{value:i[31].path!=null?Be(i[31].path):void 0,text:i[31].text,disabled:i[31].disabled}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&512&&(o.value=t[31].path!=null?Be(t[31].path):void 0),n[0]&512&&(o.text=t[31].text),n[0]&512&&(o.disabled=t[31].disabled),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ea(i){let e,l,t=i[28],n=[];for(let s=0;s<t.length;s+=1)n[s]=Ol(Nl(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Y()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=Q(s)},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,r){if(r[0]&512){t=s[28];let a;for(a=0;a<t.length;a+=1){const f=Nl(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Ol(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(ie(),a=t.length;a<n.length;a+=1)o(a);se()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){Ae(n,s),s&&m(e)}}}function ql(i){let e,l;return e=new os({props:{label:i[27],$$slots:{default:[Ea]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&512&&(o.label=t[27]),n[0]&512|n[1]&4096&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Sa(i){let e,l,t=Object.entries(i[9]),n=[];for(let s=0;s<t.length;s+=1)n[s]=ql(Vl(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=de()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,r){if(r[0]&512){t=Object.entries(s[9]);let a;for(a=0;a<t.length;a+=1){const f=Vl(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=ql(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(ie(),a=t.length;a<n.length;a+=1)o(a);se()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){Ae(n,s),s&&m(e)}}}function jl(i){let e,l,t,n,o,s;return l=new as({}),{c(){e=T("button"),H(l.$$.fragment),this.h()},l(r){e=V(r,"BUTTON",{});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){e.disabled=t=i[4]==null},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=[$e(Se.call(null,e,{text:"Clear sort"})),Fe(e,"click",i[20])],o=!0)},p(r,a){(!n||a[0]&16&&t!==(t=r[4]==null))&&(e.disabled=t)},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,Qe(s)}}}function ya(i){let e,l;return e=new Hi({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ia(i){let e,l;return e=new Bi({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Da(i){let e,l;return e=new Lr({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ul(i){let e,l;return e=new Yt({props:{open:!0,modalHeading:"",passiveModal:!0,size:"lg",$$slots:{default:[Ca]},$$scope:{ctx:i}}}),e.$on("close",i[25]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&4096|n[1]&4096&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ta(i){var s;let e,l,t,n,o;return l=new _i({props:{size:"small",kind:"ghost",icon:gi,href:xt((s=i[12])==null?void 0:s.data.namespace,i[12].data.concept_name),iconDescription:"Open concept page",$$slots:{default:[Ma]},$$scope:{ctx:i}}}),n=new Qs({props:{concept:i[12].data}}),{c(){e=T("div"),H(l.$$.fragment),t=Y(),H(n.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),t=Q(r),O(n.$$.fragment,r),this.h()},h(){D(e,"class","mb-4 ml-6")},m(r,a){N(r,e,a),R(l,e,null),N(r,t,a),R(n,r,a),o=!0},p(r,a){var _;const f={};a[0]&4096&&(f.href=xt((_=r[12])==null?void 0:_.data.namespace,r[12].data.concept_name)),a[1]&4096&&(f.$$scope={dirty:a,ctx:r}),l.$set(f);const u={};a[0]&4096&&(u.concept=r[12].data),n.$set(u)},i(r){o||(p(l.$$.fragment,r),p(n.$$.fragment,r),o=!0)},o(r){$(l.$$.fragment,r),$(n.$$.fragment,r),o=!1},d(r){r&&m(e),L(l),r&&m(t),L(n,r)}}}function Va(i){let e,l=i[12].error.message+"",t;return{c(){e=T("p"),t=G(l)},l(n){e=V(n,"P",{});var o=S(e);t=K(o,l),o.forEach(m)},m(n,o){N(n,e,o),v(e,t)},p(n,o){o[0]&4096&&l!==(l=n[12].error.message+"")&&ce(t,l)},i:X,o:X,d(n){n&&m(e)}}}function Na(i){let e,l;return e=new Le({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ma(i){let e;return{c(){e=G("Go to concept")},l(l){e=K(l,"Go to concept")},m(l,t){N(l,e,t)},d(l){l&&m(e)}}}function Ca(i){let e,l,t,n;const o=[Na,Va,Ta],s=[];function r(a,f){var u,_,c;return(u=a[12])!=null&&u.isLoading?0:(_=a[12])!=null&&_.isError?1:(c=a[12])!=null&&c.isSuccess?2:-1}return~(e=r(i))&&(l=s[e]=o[e](i)),{c(){l&&l.c(),t=de()},l(a){l&&l.l(a),t=de()},m(a,f){~e&&s[e].m(a,f),N(a,t,f),n=!0},p(a,f){let u=e;e=r(a),e===u?~e&&s[e].p(a,f):(l&&(ie(),$(s[u],1,1,()=>{s[u]=null}),se()),~e?(l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){~e&&s[e].d(a),a&&m(t)}}}function za(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,B,x,Z,F=i[15].length>0&&i[6]!=null&&Fl(i);o=new Ri({props:{addLabelsQuery:{searches:i[8],filters:i[10]},buttonText:"Label all",helperText:"Apply label to all results within the current filter set."}});let j=i[0]&&i[1]&&Ll(i);h=new mi({props:{noLabel:!0,size:"sm",class:"w-60",selected:i[5],$$slots:{default:[Sa]},$$scope:{ctx:i}}}),h.$on("update",i[18]);let A=i[7]!=null&&jl(i);const ee=[Da,Ia,ya],U=[];function W(P,te){var ue,fe,re;return((ue=P[4])==null?void 0:ue.order)==null?0:((fe=P[4])==null?void 0:fe.order)==="ASC"?1:((re=P[4])==null?void 0:re.order)==="DESC"?2:-1}~(g=W(i))&&(E=U[g]=ee[g](i));let J=i[2]&&Ul(i);return{c(){e=T("div"),F&&F.c(),l=Y(),t=T("div"),n=T("div"),H(o.$$.fragment),s=Y(),r=T("div"),a=T("div"),j&&j.c(),f=Y(),u=T("div"),_=T("div"),c=G("Sort by"),d=Y(),H(h.$$.fragment),b=Y(),A&&A.c(),w=Y(),k=T("button"),E&&E.c(),C=Y(),J&&J.c(),I=de(),this.h()},l(P){e=V(P,"DIV",{class:!0});var te=S(e);F&&F.l(te),l=Q(te),t=V(te,"DIV",{class:!0});var ue=S(t);n=V(ue,"DIV",{class:!0});var fe=S(n);O(o.$$.fragment,fe),fe.forEach(m),s=Q(ue),r=V(ue,"DIV",{class:!0});var re=S(r);a=V(re,"DIV",{class:!0});var ae=S(a);j&&j.l(ae),ae.forEach(m),f=Q(re),u=V(re,"DIV",{class:!0});var le=S(u);_=V(le,"DIV",{class:!0});var q=S(_);c=K(q,"Sort by"),q.forEach(m),d=Q(le),O(h.$$.fragment,le),b=Q(le),A&&A.l(le),w=Q(le),k=V(le,"BUTTON",{});var z=S(k);E&&E.l(z),z.forEach(m),le.forEach(m),re.forEach(m),ue.forEach(m),te.forEach(m),C=Q(P),J&&J.l(P),I=de(),this.h()},h(){D(n,"class","relative flex h-8 flex-col items-end justify-end"),D(a,"class","flex justify-end py-2"),D(_,"class","mr-1 whitespace-nowrap"),k.disabled=y=i[4]==null,D(u,"class","sort-container flex flex-row items-center gap-x-1 pt-2 md:w-fit"),D(r,"class","flex flex-col"),D(t,"class","flex w-full flex-row items-end justify-between"),D(e,"class","mx-5 my-2 flex flex-col gap-y-2")},m(P,te){var ue;N(P,e,te),F&&F.m(e,null),v(e,l),v(e,t),v(t,n),R(o,n,null),v(t,s),v(t,r),v(r,a),j&&j.m(a,null),v(r,f),v(r,u),v(u,_),v(_,c),v(u,d),R(h,u,null),v(u,b),A&&A.m(u,null),v(u,w),v(u,k),~g&&U[g].m(k,null),N(P,C,te),J&&J.m(P,te),N(P,I,te),B=!0,x||(Z=[$e(M=Se.call(null,k,{text:((ue=i[4])==null?void 0:ue.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."})),Fe(k,"click",i[19])],x=!0)},p(P,te){var ae;P[15].length>0&&P[6]!=null?F?(F.p(P,te),te[0]&64&&p(F,1)):(F=Fl(P),F.c(),p(F,1),F.m(e,l)):F&&(ie(),$(F,1,1,()=>{F=null}),se());const ue={};te[0]&1280&&(ue.addLabelsQuery={searches:P[8],filters:P[10]}),o.$set(ue),P[0]&&P[1]?j?j.p(P,te):(j=Ll(P),j.c(),j.m(a,null)):j&&(j.d(1),j=null);const fe={};te[0]&32&&(fe.selected=P[5]),te[0]&512|te[1]&4096&&(fe.$$scope={dirty:te,ctx:P}),h.$set(fe),P[7]!=null?A?(A.p(P,te),te[0]&128&&p(A,1)):(A=jl(P),A.c(),p(A,1),A.m(u,w)):A&&(ie(),$(A,1,1,()=>{A=null}),se());let re=g;g=W(P),g!==re&&(E&&(ie(),$(U[re],1,1,()=>{U[re]=null}),se()),~g?(E=U[g],E||(E=U[g]=ee[g](P),E.c()),p(E,1),E.m(k,null)):E=null),(!B||te[0]&16&&y!==(y=P[4]==null))&&(k.disabled=y),M&&Pe(M.update)&&te[0]&16&&M.update.call(null,{text:((ae=P[4])==null?void 0:ae.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."}),P[2]?J?(J.p(P,te),te[0]&4&&p(J,1)):(J=Ul(P),J.c(),p(J,1),J.m(I.parentNode,I)):J&&(ie(),$(J,1,1,()=>{J=null}),se())},i(P){B||(p(F),p(o.$$.fragment,P),p(h.$$.fragment,P),p(A),p(E),p(J),B=!0)},o(P){$(F),$(o.$$.fragment,P),$(h.$$.fragment,P),$(A),$(E),$(J),B=!1},d(P){P&&m(e),F&&F.d(),L(o),j&&j.d(),L(h),A&&A.d(),~g&&U[g].d(),P&&m(C),J&&J.d(P),P&&m(I),x=!1,Qe(Z)}}}function Fa(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h,b=X,w=()=>(b(),b=Te(t,W=>l(12,h=W)),t);i.$$.on_destroy.push(()=>b());let{totalNumRows:k}=e,{manifest:g}=e,E=qe();be(i,E,W=>l(23,d=W));let y=Ze();be(i,y,W=>l(22,c=W));let M=null;const C=["keyword","semantic","concept"],I={keyword:"Keyword",semantic:"Semantic",concept:"Concepts"};let B={};function x(W){W.type==="concept"&&l(2,M={namespace:W.concept_namespace,name:W.concept_name})}let Z={};const F=W=>{const J=W.detail;J!==r&&E.setSortBy(J===""?null:zt(J))},j=()=>{s!=null&&E.setSortBy(s.path),E.setSortOrder((s==null?void 0:s.order)==="ASC"?"DESC":"ASC")},A=()=>{E.clearSorts()},ee=W=>x(W),U=()=>l(2,M=null);return i.$$set=W=>{"totalNumRows"in W&&l(0,k=W.totalNumRows),"manifest"in W&&l(1,g=W.manifest)},i.$$.update=()=>{var W,J,P,te;if(i.$$.dirty[0]&4&&w(l(11,t=M?hi(M.namespace,M.name):void 0)),i.$$.dirty[0]&8388608&&l(8,n=Ft(d)),i.$$.dirty[0]&8388608&&l(10,o=d.query.filters),i.$$.dirty[0]&264){l(3,B={});for(const ue of n)ue.type&&(ue.type in B||l(3,B[ue.type]=[],B),B[ue.type].push(ue))}if(i.$$.dirty[0]&4194304&&l(4,s=rs(c)),i.$$.dirty[0]&4194304)for(const ue of((J=(W=c.selectRowsSchema)==null?void 0:W.data)==null?void 0:J.search_results)||[])Z[Be(ue.result_path)]=ue;i.$$.dirty[0]&16&&l(5,r=s!=null&&s.path?Be(s.path):""),i.$$.dirty[0]&8388608&&l(7,a=d.query.sort_by),i.$$.dirty[0]&4194304&&l(6,f=(te=(P=c==null?void 0:c.selectRowsSchema)==null?void 0:P.data)==null?void 0:te.schema),i.$$.dirty[0]&224&&l(21,u=f!=null?[{path:[""],text:"None",disabled:a==null&&r!==""},...Pt(f).filter(ue=>ue.dtype!="embedding"&&ue.dtype!="string_span").map(ue=>({path:ue.path,text:Je(ue.path.slice(1)),disabled:!1}))]:[]),i.$$.dirty[0]&2097152&&l(9,_=u.reduce((ue,fe)=>{const re=fe.path[0];return(ue[re]=ue[re]||[]).push(fe),ue},{}))},[k,g,M,B,s,r,f,a,n,_,o,t,h,E,y,C,I,x,F,j,A,u,c,d,ee,U]}class Pa extends we{constructor(e){super(),ke(this,e,Fa,za,ve,{totalNumRows:0,manifest:1},null,[-1,-1])}}function Yl(i,e,l){const t=i.slice();t[18]=e[l];const n=ut.value(t[18]);t[19]=n;const o=t[3].length===0;return t[20]=o,t}function St(i){var n,o,s;const e=i.slice(),l=ut.path(e[18])||[];e[1]=l;const t=((s=(o=(n=e[7].data)==null?void 0:n.ui)==null?void 0:o.markdown_paths)==null?void 0:s.find(function(...a){return i[15](e[1],...a)}))!=null;return e[23]=t,e}function Ql(i){let e,l,t,n,o=Je(i[1])+"",s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M;c=new Pi({props:{size:16}});function C(){return i[16](i[19],i[1])}return k=new Ci({props:{text:Ee(i[19]),row:i[0],path:i[1],markdown:i[23],spanPaths:i[6].spanPaths,valuePaths:i[6].valuePaths,datasetViewStore:i[8],datasetStore:i[2],embeddings:i[3]}}),{c(){e=T("div"),l=T("div"),t=T("div"),n=T("div"),s=G(o),a=Y(),f=T("div"),u=T("div"),_=T("button"),H(c.$$.fragment),b=Y(),w=T("div"),H(k.$$.fragment),g=Y(),this.h()},l(I){e=V(I,"DIV",{class:!0});var B=S(e);l=V(B,"DIV",{class:!0});var x=S(l);t=V(x,"DIV",{class:!0});var Z=S(t);n=V(Z,"DIV",{title:!0,class:!0});var F=S(n);s=K(F,o),F.forEach(m),a=Q(Z),f=V(Z,"DIV",{});var j=S(f);u=V(j,"DIV",{});var A=S(u);_=V(A,"BUTTON",{});var ee=S(_);O(c.$$.fragment,ee),ee.forEach(m),A.forEach(m),j.forEach(m),Z.forEach(m),x.forEach(m),b=Q(B),w=V(B,"DIV",{class:!0});var U=S(w);O(k.$$.fragment,U),U.forEach(m),g=Q(B),B.forEach(m),this.h()},h(){D(n,"title",r=Je(i[1])),D(n,"class","w-full truncate"),_.disabled=d=i[20],oe(u,"opacity-50",i[20]),D(t,"class","sticky top-0 flex w-full items-center self-start"),D(l,"class","relative flex w-28 flex-none font-mono font-medium text-neutral-500 md:w-44"),D(w,"class","w-full grow-0 pt-1 font-normal"),D(e,"class","flex w-full gap-x-4")},m(I,B){N(I,e,B),v(e,l),v(l,t),v(t,n),v(n,s),v(t,a),v(t,f),v(f,u),v(u,_),R(c,_,null),v(e,b),v(e,w),R(k,w,null),v(e,g),E=!0,y||(M=[Fe(_,"click",C),$e(Se.call(null,_,{text:"More like this"})),$e(h=Se.call(null,u,{text:i[20]?'"More like this" requires an embedding index':void 0}))],y=!0)},p(I,B){i=I,(!E||B&16)&&o!==(o=Je(i[1])+"")&&ce(s,o),(!E||B&16&&r!==(r=Je(i[1])))&&D(n,"title",r),(!E||B&8&&d!==(d=i[20]))&&(_.disabled=d),h&&Pe(h.update)&&B&8&&h.update.call(null,{text:i[20]?'"More like this" requires an embedding index':void 0}),(!E||B&8)&&oe(u,"opacity-50",i[20]);const x={};B&16&&(x.text=Ee(i[19])),B&1&&(x.row=i[0]),B&16&&(x.path=i[1]),B&144&&(x.markdown=i[23]),B&64&&(x.spanPaths=i[6].spanPaths),B&64&&(x.valuePaths=i[6].valuePaths),B&4&&(x.datasetStore=i[2]),B&8&&(x.embeddings=i[3]),k.$set(x)},i(I){E||(p(c.$$.fragment,I),p(k.$$.fragment,I),E=!0)},o(I){$(c.$$.fragment,I),$(k.$$.fragment,I),E=!1},d(I){I&&m(e),L(c),L(k),y=!1,Qe(M)}}}function Wl(i){let e=el(i[19]),l,t,n=e&&Ql(St(i));return{c(){n&&n.c(),l=de()},l(o){n&&n.l(o),l=de()},m(o,s){n&&n.m(o,s),N(o,l,s),t=!0},p(o,s){s&16&&(e=el(o[19])),e?n?(n.p(St(o),s),s&16&&p(n,1)):(n=Ql(St(o)),n.c(),p(n,1),n.m(l.parentNode,l)):n&&(ie(),$(n,1,1,()=>{n=null}),se())},i(o){t||(p(n),t=!0)},o(o){$(n),t=!1},d(o){n&&n.d(o),o&&m(l)}}}function Aa(i){let e,l,t=i[4],n=[];for(let s=0;s<t.length;s+=1)n[s]=Wl(Yl(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=de()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,[r]){if(r&2525){t=s[4];let a;for(a=0;a<t.length;a+=1){const f=Yl(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Wl(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(ie(),a=t.length;a<n.length;a+=1)o(a);se()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){Ae(n,s),s&&m(e)}}}function Ba(i,e,l){let t,n,o,s,r,a,f=X,u=()=>(f(),f=Te(o,I=>l(7,a=I)),o),_,c;i.$$.on_destroy.push(()=>f());let{path:d}=e,{row:h}=e,{field:b}=e,{highlightedFields:w}=e;const k=qe();be(i,k,I=>l(14,_=I));const g=Ze();be(i,g,I=>l(2,c=I));const E=Qt();be(i,E,I=>l(17,r=I));function y(I,B){var Z;let x=t[0];if(((Z=a.data)==null?void 0:Z.preferred_embedding)!=null){const F=a.data.preferred_embedding;t.some(j=>j===F)&&(x=F)}if(r.embedding!=null){const F=r.embedding;t.some(j=>j===F)&&(x=F)}k.addSearch({path:B,type:"semantic",query:I,embedding:x})}const M=(I,B)=>et(B,I),C=(I,B)=>y(I,B);return i.$$set=I=>{"path"in I&&l(1,d=I.path),"row"in I&&l(0,h=I.row),"field"in I&&l(12,b=I.field),"highlightedFields"in I&&l(13,w=I.highlightedFields)},i.$$.update=()=>{i.$$.dirty&6&&l(3,t=vt(c.schema,d)),i.$$.dirty&12288&&l(6,n=pi(b,w)),i.$$.dirty&16384&&u(l(5,o=ot(_.namespace,_.datasetName))),i.$$.dirty&3&&l(4,s=fs(h,d))},[h,d,c,t,s,o,n,a,k,g,E,y,b,w,_,M,C]}class Ha extends we{constructor(e){super(),ke(this,e,Ba,Aa,ve,{path:1,row:0,field:12,highlightedFields:13})}}function Zl(i,e,l){const t=i.slice();return t[26]=e[l],t[28]=l,t}function Gl(i,e,l){const t=i.slice();return t[29]=e[l],t}function Ra(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b=i[7],w=[];for(let E=0;E<b.length;E+=1)w[E]=Kl(Gl(i,b,E));const k=E=>$(w[E],1,1,()=>{w[E]=null});o=new Ri({props:{addLabelsQuery:{row_ids:[i[0]]},hideLabels:i[7]}});let g=i[1].length>0&&Jl(i);return c=new sr({props:{row:i[3],selectRowsSchema:i[4],highlightedFields:i[2]}}),{c(){e=T("div"),l=T("div");for(let E=0;E<w.length;E+=1)w[E].c();t=Y(),n=T("div"),H(o.$$.fragment),s=Y(),g&&g.c(),a=Y(),f=T("div"),u=T("div"),_=T("div"),H(c.$$.fragment),this.h()},l(E){e=V(E,"DIV",{class:!0});var y=S(e);l=V(y,"DIV",{class:!0});var M=S(l);for(let Z=0;Z<w.length;Z+=1)w[Z].l(M);t=Q(M),n=V(M,"DIV",{class:!0});var C=S(n);O(o.$$.fragment,C),C.forEach(m),M.forEach(m),s=Q(y),g&&g.l(y),y.forEach(m),a=Q(E),f=V(E,"DIV",{class:!0});var I=S(f);u=V(I,"DIV",{class:!0});var B=S(u);_=V(B,"DIV",{style:!0,class:!0});var x=S(_);O(c.$$.fragment,x),x.forEach(m),B.forEach(m),I.forEach(m),this.h()},h(){D(n,"class","relative h-8"),D(l,"class","flex flex-wrap gap-x-2 gap-y-2"),D(e,"class","flex flex-col gap-y-1 p-4 md:w-2/3"),Nt(()=>i[23].call(e)),D(_,"style",d=`max-height: ${Math.max(xl,i[6])}px`),D(_,"class","overflow-y-auto py-2"),D(u,"class","sticky top-0 w-full self-start"),D(f,"class","flex h-full bg-neutral-100 md:w-1/3")},m(E,y){N(E,e,y),v(e,l);for(let M=0;M<w.length;M+=1)w[M]&&w[M].m(l,null);v(l,t),v(l,n),R(o,n,null),v(e,s),g&&g.m(e,null),r=Ki(e,i[23].bind(e)),N(E,a,y),N(E,f,y),v(f,u),v(u,_),R(c,_,null),h=!0},p(E,y){if(y[0]&19072){b=E[7];let I;for(I=0;I<b.length;I+=1){const B=Gl(E,b,I);w[I]?(w[I].p(B,y),p(w[I],1)):(w[I]=Kl(B),w[I].c(),p(w[I],1),w[I].m(l,t))}for(ie(),I=b.length;I<w.length;I+=1)k(I);se()}const M={};y[0]&1&&(M.addLabelsQuery={row_ids:[E[0]]}),y[0]&128&&(M.hideLabels=E[7]),o.$set(M),E[1].length>0?g?(g.p(E,y),y[0]&2&&p(g,1)):(g=Jl(E),g.c(),p(g,1),g.m(e,null)):g&&(ie(),$(g,1,1,()=>{g=null}),se());const C={};y[0]&8&&(C.row=E[3]),y[0]&16&&(C.selectRowsSchema=E[4]),y[0]&4&&(C.highlightedFields=E[2]),c.$set(C),(!h||y[0]&64&&d!==(d=`max-height: ${Math.max(xl,E[6])}px`))&&D(_,"style",d)},i(E){if(!h){for(let y=0;y<b.length;y+=1)p(w[y]);p(o.$$.fragment,E),p(g),p(c.$$.fragment,E),h=!0}},o(E){w=w.filter(Boolean);for(let y=0;y<w.length;y+=1)$(w[y]);$(o.$$.fragment,E),$(g),$(c.$$.fragment,E),h=!1},d(E){E&&m(e),Ae(w,E),L(o),g&&g.d(),r(),E&&m(a),E&&m(f),L(c)}}}function La(i){let e,l;return e=new Le({props:{lines:4,paragraph:!0,class:"w-full"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Oa(i){let e=i[29]+"",l;return{c(){l=G(e)},l(t){l=K(t,e)},m(t,n){N(t,l,n)},p(t,n){n[0]&128&&e!==(e=t[29]+"")&&ce(l,e)},d(t){t&&m(l)}}}function Kl(i){let e,l;function t(){return i[21](i[29])}function n(){return i[22](i[29])}return e=new Et({props:{type:"cool-gray",class:"hover:cursor-pointer",removeDisabled:!i[9],removeDisabledHelperText:"You do not have access to remove labels.",closeHelperText:`Remove label "${i[29]}"`,clickHelperText:`View documents with label "${i[29]}"`,$$slots:{default:[Oa]},$$scope:{ctx:i}}}),e.$on("click",t),e.$on("remove",n),{c(){H(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,s){R(e,o,s),l=!0},p(o,s){i=o;const r={};s[0]&512&&(r.removeDisabled=!i[9]),s[0]&128&&(r.closeHelperText=`Remove label "${i[29]}"`),s[0]&128&&(r.clickHelperText=`View documents with label "${i[29]}"`),s[0]&128|s[1]&2&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){L(e,o)}}}function Jl(i){let e=[],l=new Map,t,n,o=i[1];const s=r=>Be(r[26].path);for(let r=0;r<o.length;r+=1){let a=Zl(i,o,r),f=s(a);l.set(f,e[r]=Xl(f,a))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=de()},l(r){for(let a=0;a<e.length;a+=1)e[a].l(r);t=de()},m(r,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,a);N(r,t,a),n=!0},p(r,a){a[0]&14&&(o=r[1],ie(),e=Tt(e,a,s,1,r,o,l,t.parentNode,Vt,Xl,t,Zl),se())},i(r){if(!n){for(let a=0;a<o.length;a+=1)p(e[a]);n=!0}},o(r){for(let a=0;a<e.length;a+=1)$(e[a]);n=!1},d(r){for(let a=0;a<e.length;a+=1)e[a].d(r);r&&m(t)}}}function Xl(i,e){let l,t,n,o;return t=new Ha({props:{row:e[3],path:e[26].path,field:e[26],highlightedFields:e[2]}}),{key:i,first:null,c(){l=T("div"),H(t.$$.fragment),n=Y(),this.h()},l(s){l=V(s,"DIV",{class:!0});var r=S(l);O(t.$$.fragment,r),n=Q(r),r.forEach(m),this.h()},h(){D(l,"class","flex h-full w-full flex-col border-neutral-200"),oe(l,"border-b",e[28]<e[1].length-1),oe(l,"pb-2",e[28]<e[1].length-1),this.first=l},m(s,r){N(s,l,r),R(t,l,null),v(l,n),o=!0},p(s,r){e=s;const a={};r[0]&8&&(a.row=e[3]),r[0]&2&&(a.path=e[26].path),r[0]&2&&(a.field=e[26]),r[0]&4&&(a.highlightedFields=e[2]),t.$set(a),(!o||r[0]&2)&&oe(l,"border-b",e[28]<e[1].length-1),(!o||r[0]&2)&&oe(l,"pb-2",e[28]<e[1].length-1)},i(s){o||(p(t.$$.fragment,s),o=!0)},o(s){$(t.$$.fragment,s),o=!1},d(s){s&&m(l),L(t)}}}function qa(i){let e,l,t,n;const o=[La,Ra],s=[];function r(a,f){var u;return a[3]==null||(u=a[5])!=null&&u.isFetching?0:1}return l=r(i),t=s[l]=o[l](i),{c(){e=T("div"),t.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);t.l(f),f.forEach(m),this.h()},h(){D(e,"class","flex flex-col rounded border border-neutral-300 md:flex-row")},m(a,f){N(a,e,f),s[l].m(e,null),n=!0},p(a,f){let u=l;l=r(a),l===u?s[l].p(a,f):(ie(),$(s[u],1,1,()=>{s[u]=null}),se(),t=s[l],t?t.p(a,f):(t=s[l]=o[l](a),t.c()),p(t,1),t.m(e,null))},i(a){n||(p(t),n=!0)},o(a){$(t),n=!1},d(a){a&&m(e),s[l].d()}}}const xl=320;function ja(i,e,l){let t,n,o,s,r,a,f,u,_,c,d=X,h=()=>(d(),d=Te(a,U=>l(5,c=U)),a),b,w,k;i.$$.on_destroy.push(()=>d());let{rowId:g}=e,{mediaFields:E}=e,{highlightedFields:y}=e;const M=Ze();be(i,M,U=>l(19,w=U));const C=qe();be(i,C,U=>l(18,b=U));const I=Ni(),B=mt();be(i,B,U=>l(20,k=U));let x=0;const Z=w.schema!=null?us(w.schema):null;be(i,Z,U=>l(24,_=U));const F=U=>{const W={label_name:U,row_ids:[g]};_.mutate([t,n,W],{onSuccess:()=>{I.addNotification({kind:"success",title:`Removed label "${W.label_name}"`,message:`Document id: ${g}`})}})},j=U=>C.addFilter({path:[U,"label"],op:"equals",value:"true"}),A=U=>F(U);function ee(){x=this.clientHeight,l(6,x)}return i.$$set=U=>{"rowId"in U&&l(0,g=U.rowId),"mediaFields"in U&&l(1,E=U.mediaFields),"highlightedFields"in U&&l(2,y=U.highlightedFields)},i.$$.update=()=>{var U,W;i.$$.dirty[0]&262144&&l(16,t=b.namespace),i.$$.dirty[0]&262144&&l(15,n=b.datasetName),i.$$.dirty[0]&1048576&&l(9,o=(U=k.data)==null?void 0:U.access.dataset.edit_labels),i.$$.dirty[0]&524288&&l(4,s=(W=w.selectRowsSchema)==null?void 0:W.data),i.$$.dirty[0]&262144&&l(17,r=Ct(b)),i.$$.dirty[0]&229393&&h(l(8,a=s!=null?cs(t,n,g,r,s.schema):null)),i.$$.dirty[0]&32&&l(3,f=(c==null?void 0:c.data)!=null?c.data:null),i.$$.dirty[0]&8&&l(7,u=f!=null?ds(f):[])},[g,E,y,f,s,c,x,u,a,o,M,C,B,Z,F,n,t,r,b,w,k,j,A,ee]}class Ua extends we{constructor(e){super(),ke(this,e,ja,qa,ve,{rowId:0,mediaFields:1,highlightedFields:2},null,[-1,-1])}}function en(i,e,l){const t=i.slice();return t[22]=e[l],t}function Ya(i){let e,l;return{c(){e=T("div"),l=G("No results."),this.h()},l(t){e=V(t,"DIV",{class:!0});var n=S(e);l=K(n,"No results."),n.forEach(m),this.h()},h(){D(e,"class","mx-4 mt-8 w-full text-gray-600")},m(t,n){N(t,e,n),v(e,l)},p:X,i:X,o:X,d(t){t&&m(e)}}}function Qa(i){let e,l;return e=new Le({props:{paragraph:!0,lines:3}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Wa(i){var t,n;let e,l;return e=new bi({props:{lowContrast:!0,title:"Could not fetch schema:",subtitle:((t=i[1].error.body)==null?void 0:t.detail)||((n=i[1])==null?void 0:n.error.message)}}),{c(){H(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,s){R(e,o,s),l=!0},p(o,s){var a,f;const r={};s&2&&(r.subtitle=((a=o[1].error.body)==null?void 0:a.detail)||((f=o[1])==null?void 0:f.error.message)),e.$set(r)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){$(e.$$.fragment,o),l=!1},d(o){L(e,o)}}}function Za(i){var t;let e,l;return e=new bi({props:{lowContrast:!0,title:"Could not fetch rows:",subtitle:((t=i[3].error.body)==null?void 0:t.detail)||i[3].error.message}}),{c(){H(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){var r;const s={};o&8&&(s.subtitle=((r=n[3].error.body)==null?void 0:r.detail)||n[3].error.message),e.$set(s)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){$(e.$$.fragment,n),l=!1},d(n){L(e,n)}}}function tn(i){let e,l,t,n=i[5],o=[];for(let a=0;a<n.length;a+=1)o[a]=ln(en(i,n,a));const s=a=>$(o[a],1,1,()=>{o[a]=null});let r=i[5].length>0&&nn(i);return{c(){e=T("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Y(),r&&r.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);for(let u=0;u<o.length;u+=1)o[u].l(f);l=Q(f),r&&r.l(f),f.forEach(m),this.h()},h(){D(e,"class","flex h-full w-full flex-col gap-y-20 overflow-y-scroll px-5 pb-32")},m(a,f){N(a,e,f);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);v(e,l),r&&r.m(e,null),i[20](e),t=!0},p(a,f){if(f&304){n=a[5];let u;for(u=0;u<n.length;u+=1){const _=en(a,n,u);o[u]?(o[u].p(_,f),p(o[u],1)):(o[u]=ln(_),o[u].c(),p(o[u],1),o[u].m(e,l))}for(ie(),u=n.length;u<o.length;u+=1)s(u);se()}a[5].length>0?r?(r.p(a,f),f&32&&p(r,1)):(r=nn(a),r.c(),p(r,1),r.m(e,null)):r&&(ie(),$(r,1,1,()=>{r=null}),se())},i(a){if(!t){for(let f=0;f<n.length;f+=1)p(o[f]);p(r),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)$(o[f]);$(r),t=!1},d(a){a&&m(e),Ae(o,a),r&&r.d(),i[20](null)}}}function ln(i){let e,l;return e=new Ua({props:{rowId:i[22],mediaFields:i[4],highlightedFields:i[8]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&32&&(o.rowId=t[22]),n&16&&(o.mediaFields=t[4]),n&256&&(o.highlightedFields=t[8]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function nn(i){let e,l;return e=new Gr({props:{threshold:100}}),e.$on("loadMore",i[19]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ga(i){let e,l,t,n,o,s,r;e=new Pa({props:{totalNumRows:i[6],manifest:i[12].data}});const a=[Za,Wa,Qa,Ya],f=[];function u(c,d){var h,b,w,k;return c[3].isError?0:(h=c[1])!=null&&h.isError?1:(b=c[3])!=null&&b.isFetching||c[13].isFetching||(w=c[1])!=null&&w.isFetching||c[2].isFetching?2:(k=c[3])!=null&&k.isSuccess&&c[5]&&c[5].length===0?3:-1}~(t=u(i))&&(n=f[t]=a[t](i));let _=i[5]&&i[13].isSuccess&&i[4]!=null&&tn(i);return{c(){H(e.$$.fragment),l=Y(),n&&n.c(),o=Y(),_&&_.c(),s=de()},l(c){O(e.$$.fragment,c),l=Q(c),n&&n.l(c),o=Q(c),_&&_.l(c),s=de()},m(c,d){R(e,c,d),N(c,l,d),~t&&f[t].m(c,d),N(c,o,d),_&&_.m(c,d),N(c,s,d),r=!0},p(c,[d]){const h={};d&64&&(h.totalNumRows=c[6]),d&4096&&(h.manifest=c[12].data),e.$set(h);let b=t;t=u(c),t===b?~t&&f[t].p(c,d):(n&&(ie(),$(f[b],1,1,()=>{f[b]=null}),se()),~t?(n=f[t],n?n.p(c,d):(n=f[t]=a[t](c),n.c()),p(n,1),n.m(o.parentNode,o)):n=null),c[5]&&c[13].isSuccess&&c[4]!=null?_?(_.p(c,d),d&8240&&p(_,1)):(_=tn(c),_.c(),p(_,1),_.m(s.parentNode,s)):_&&(ie(),$(_,1,1,()=>{_=null}),se())},i(c){r||(p(e.$$.fragment,c),p(n),p(_),r=!0)},o(c){$(e.$$.fragment,c),$(n),$(_),r=!1},d(c){L(e,c),c&&m(l),~t&&f[t].d(c),c&&m(o),_&&_.d(c),c&&m(s)}}}function Ka(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h=X,b=()=>(h(),h=Te(s,J=>l(2,d=J)),s),w,k,g=X,E=()=>(g(),g=Te(f,J=>l(3,k=J)),f),y,M,C=X,I=()=>(C(),C=Te(t,J=>l(12,M=J)),t),B,x=X,Z=()=>(x(),x=Te(n,J=>l(13,B=J)),n);i.$$.on_destroy.push(()=>h()),i.$$.on_destroy.push(()=>g()),i.$$.on_destroy.push(()=>C()),i.$$.on_destroy.push(()=>x());const F=qe();be(i,F,J=>l(18,y=J));const j=Ze();be(i,j,J=>l(17,w=J));let A=null;const ee=Ys(A),U=()=>k==null?void 0:k.fetchNextPage();function W(J){He[J?"unshift":"push"](()=>{A=J,l(0,A)})}return i.$$.update=()=>{var J,P,te,ue;i.$$.dirty&262144&&I(l(11,t=ms(y.namespace,y.datasetName))),i.$$.dirty&262144&&Z(l(10,n=Bt(y.namespace,y.datasetName))),i.$$.dirty&262144&&l(16,o=Ct(y)),i.$$.dirty&262144&&b(l(9,s=ot(y.namespace,y.datasetName))),i.$$.dirty&131072&&l(1,r=w.selectRowsSchema),i.$$.dirty&262146&&l(8,a=hs(y.query,r==null?void 0:r.data)),i.$$.dirty&327682&&E(l(7,f=ui(y.namespace,y.datasetName,{...o,columns:[It]},r!=null&&r.isSuccess?r.data.schema:void 0))),i.$$.dirty&8&&l(6,u=(J=k.data)==null?void 0:J.pages[0].total_num_rows),i.$$.dirty&8&&l(5,_=(P=k.data)==null?void 0:P.pages.flatMap(fe=>fe.rows).map(fe=>ut.value(gt(fe,[It]),"string"))),i.$$.dirty&131076&&l(4,c=d.data?_s((ue=(te=w.selectRowsSchema)==null?void 0:te.data)==null?void 0:ue.schema,d.data):[]),i.$$.dirty&1&&ee.set(A)},Ji(gs,ee),[A,r,d,k,c,_,u,f,a,s,n,t,M,B,F,j,o,w,y,U,W]}class Ja extends we{constructor(e){super(),ke(this,e,Ka,Ga,ve,{})}}function sn(i){const e=i[3].find(function(...s){return i[39](i[50],...s)});i[51]=e;const l=i[51]!=null&&typeof i[51].id=="object"&&i[51].id.type==="field"&&i[51].id.isSignal;i[52]=l;const t=i[51]!=null&&typeof i[51].id=="object"&&i[51].id.type==="concept";i[53]=t;const n=i[51]!=null&&typeof i[51].id=="object"&&i[51].id.type==="label";i[54]=n}function rn(i){const e=i[5].find(function(...t){return i[38](i[51],...t)});i[55]=e}function an(i){let e,l=i[55].text+"",t,n,o,s,r=i[55].embeddings.length>0&&on(i);return{c(){e=T("div"),t=G(l),n=Y(),r&&r.c(),o=de(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);t=K(f,l),f.forEach(m),n=Q(a),r&&r.l(a),o=de(),this.h()},h(){D(e,"class","w-full flex-grow truncate")},m(a,f){N(a,e,f),v(e,t),N(a,n,f),r&&r.m(a,f),N(a,o,f),s=!0},p(a,f){(!s||f[0]&32|f[1]&1048576)&&l!==(l=a[55].text+"")&&ce(t,l),a[55].embeddings.length>0?r?(r.p(a,f),f[0]&32|f[1]&1048576&&p(r,1)):(r=on(a),r.c(),p(r,1),r.m(o.parentNode,o)):r&&(ie(),$(r,1,1,()=>{r=null}),se())},i(a){s||(p(r),s=!0)},o(a){$(r),s=!1},d(a){a&&m(e),a&&m(n),r&&r.d(a),a&&m(o)}}}function on(i){let e,l,t,n,o,s;return l=new Ge({props:{$$slots:{default:[Xa]},$$scope:{ctx:i}}}),{c(){e=T("div"),H(l.$$.fragment)},l(r){e=V(r,"DIV",{});var a=S(e);O(l.$$.fragment,a),a.forEach(m)},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=$e(t=Se.call(null,e,{text:`Computed embeddings: ${i[55].embeddings.join(", ")}`})),o=!0)},p(r,a){i=r;const f={};a[1]&33554432&&(f.$$scope={dirty:a,ctx:i}),l.$set(f),t&&Pe(t.update)&&a[0]&32|a[1]&1048576&&t.update.call(null,{text:`Computed embeddings: ${i[55].embeddings.join(", ")}`})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,s()}}}function Xa(i){let e,l;return e=new Es({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function xa(i){rn(i);let e,l,t=i[55]&&an(i);return{c(){e=T("div"),t&&t.c(),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);t&&t.l(o),o.forEach(m),this.h()},h(){D(e,"class","flex h-full w-full items-center justify-between gap-x-1")},m(n,o){N(n,e,o),t&&t.m(e,null),l=!0},p(n,o){rn(n),n[55]?t?(t.p(n,o),o[0]&32|o[1]&1048576&&p(t,1)):(t=an(n),t.c(),p(t,1),t.m(e,null)):t&&(ie(),$(t,1,1,()=>{t=null}),se())},i(n){l||(p(t),l=!0)},o(n){$(t),l=!1},d(n){n&&m(e),t&&t.d()}}}function eo(i){let e,l,t=i[51].text+"",n,o,s=i[51].description&&fn(i);return{c(){e=T("div"),l=T("div"),n=G(t),o=Y(),s&&s.c(),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);l=V(a,"DIV",{});var f=S(l);n=K(f,t),f.forEach(m),o=Q(a),s&&s.l(a),a.forEach(m),this.h()},h(){D(e,"class","flex justify-between gap-x-8"),oe(e,"isSignal",i[52]),oe(e,"isConcept",i[53]),oe(e,"isLabel",i[54])},m(r,a){N(r,e,a),v(e,l),v(l,n),v(e,o),s&&s.m(e,null)},p(r,a){a[0]&8|a[1]&524288&&t!==(t=r[51].text+"")&&ce(n,t),r[51].description?s?s.p(r,a):(s=fn(r),s.c(),s.m(e,null)):s&&(s.d(1),s=null),a[0]&8|a[1]&524288&&oe(e,"isSignal",r[52]),a[0]&8|a[1]&524288&&oe(e,"isConcept",r[53]),a[0]&8|a[1]&524288&&oe(e,"isLabel",r[54])},i:X,o:X,d(r){r&&m(e),s&&s.d()}}}function to(i){let e,l,t,n,o,s;return l=new Ge({props:{$$slots:{default:[ro]},$$scope:{ctx:i}}}),{c(){e=T("div"),H(l.$$.fragment),t=Y(),n=T("div"),o=G("Compute embeddings to enable concept search."),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),t=Q(a),n=V(a,"DIV",{class:!0});var f=S(n);o=K(f,"Compute embeddings to enable concept search."),f.forEach(m),a.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-concept flex items-center")},m(r,a){N(r,e,a),R(l,e,null),v(e,t),v(e,n),v(n,o),s=!0},p(r,a){const f={};a[1]&33554432&&(f.$$scope={dirty:a,ctx:r}),l.$set(f)},i(r){s||(p(l.$$.fragment,r),s=!0)},o(r){$(l.$$.fragment,r),s=!1},d(r){r&&m(e),L(l)}}}function lo(i){let e,l,t,n,o,s,r;return l=new Ge({props:{$$slots:{default:[ao]},$$scope:{ctx:i}}}),{c(){e=T("div"),H(l.$$.fragment),t=Y(),n=T("div"),o=G(`Semantic search:
              `),s=G(i[1]),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),t=Q(f),n=V(f,"DIV",{class:!0});var u=S(n);o=K(u,`Semantic search:
              `),s=K(u,i[1]),u.forEach(m),f.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){N(a,e,f),R(l,e,null),v(e,t),v(e,n),v(n,o),v(n,s),r=!0},p(a,f){const u={};f[1]&33554432&&(u.$$scope={dirty:f,ctx:a}),l.$set(u),(!r||f[0]&2)&&ce(s,a[1])},i(a){r||(p(l.$$.fragment,a),r=!0)},o(a){$(l.$$.fragment,a),r=!1},d(a){a&&m(e),L(l)}}}function no(i){let e,l,t,n,o,s,r;return l=new Ge({props:{$$slots:{default:[oo]},$$scope:{ctx:i}}}),{c(){e=T("div"),H(l.$$.fragment),t=Y(),n=T("div"),o=G(`Keyword search:
              `),s=G(i[1]),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),t=Q(f),n=V(f,"DIV",{class:!0});var u=S(n);o=K(u,`Keyword search:
              `),s=K(u,i[1]),u.forEach(m),f.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){N(a,e,f),R(l,e,null),v(e,t),v(e,n),v(n,o),v(n,s),r=!0},p(a,f){const u={};f[1]&33554432&&(u.$$scope={dirty:f,ctx:a}),l.$set(u),(!r||f[0]&2)&&ce(s,a[1])},i(a){r||(p(l.$$.fragment,a),r=!0)},o(a){$(l.$$.fragment,a),r=!1},d(a){a&&m(e),L(l)}}}function io(i){let e,l,t,n,o,s=i[1]!=""?":":"",r,a,f,u;return l=new Ge({props:{$$slots:{default:[fo]},$$scope:{ctx:i}}}),{c(){e=T("div"),H(l.$$.fragment),t=Y(),n=T("div"),o=G("New concept"),r=G(s),a=Y(),f=G(i[1]),this.h()},l(_){e=V(_,"DIV",{class:!0});var c=S(e);O(l.$$.fragment,c),t=Q(c),n=V(c,"DIV",{class:!0});var d=S(n);o=K(d,"New concept"),r=K(d,s),a=Q(d),f=K(d,i[1]),d.forEach(m),c.forEach(m),this.h()},h(){D(n,"class","ml-2"),D(e,"class","new-concept flex flex-row items-center justify-items-center")},m(_,c){N(_,e,c),R(l,e,null),v(e,t),v(e,n),v(n,o),v(n,r),v(n,a),v(n,f),u=!0},p(_,c){const d={};c[1]&33554432&&(d.$$scope={dirty:c,ctx:_}),l.$set(d),(!u||c[0]&2)&&s!==(s=_[1]!=""?":":"")&&ce(r,s),(!u||c[0]&2)&&ce(f,_[1])},i(_){u||(p(l.$$.fragment,_),u=!0)},o(_){$(l.$$.fragment,_),u=!1},d(_){_&&m(e),L(l)}}}function so(i){let e;return{c(){e=T("div")},l(l){e=V(l,"DIV",{}),S(e).forEach(m)},m(l,t){N(l,e,t)},p:X,i:X,o:X,d(l){l&&m(e)}}}function fn(i){let e,l=i[51].description+"",t;return{c(){e=T("div"),t=G(l),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);t=K(o,l),o.forEach(m),this.h()},h(){D(e,"class","truncate text-xs text-gray-500")},m(n,o){N(n,e,o),v(e,t)},p(n,o){o[0]&8|o[1]&524288&&l!==(l=n[51].description+"")&&ce(t,l)},d(n){n&&m(e)}}}function ro(i){let e,l;return e=new Vi({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function ao(i){let e,l;return e=new Ai({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function oo(i){let e,l;return e=new Ai({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function fo(i){let e,l;return e=new Wt({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function uo(i){sn(i);let e,l,t,n;const o=[so,io,no,lo,to,eo],s=[];function r(a,f){return a[51]==null?0:a[51].id==="new-concept"?1:a[51].id==="keyword-search"?2:a[51].id==="semantic-search"?3:a[51].id==="compute-embedding"&&a[2]&&a[0]?4:5}return e=r(i),l=s[e]=o[e](i),{c(){l.c(),t=de()},l(a){l.l(a),t=de()},m(a,f){s[e].m(a,f),N(a,t,f),n=!0},p(a,f){sn(a);let u=e;e=r(a),e===u?s[e].p(a,f):(ie(),$(s[u],1,1,()=>{s[u]=null}),se(),l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){s[e].d(a),a&&m(t)}}}function co(i){var k;let e,l,t,n,o,s,r,a,f,u,_,c,d,h;n=new Pi({props:{class:"ml-2 mr-px",size:16}}),r=new gr({props:{size:"xl",class:"w-48",disabled:i[0]==null,selectedId:i[0]?Be(i[0]):(k=i[5][0])==null?void 0:k.id,items:i[5],$$slots:{default:[xa,({item:g})=>({51:g}),({item:g})=>[0,g?1048576:0]]},$$scope:{ctx:i}}}),r.$on("select",i[16]);function b(g){i[41](g)}let w={size:"xl",class:"w-full",items:i[3],shouldFilterItem:mo,placeholder:i[6],$$slots:{default:[uo,({item:g})=>({50:g}),({item:g})=>[0,g?524288:0]]},$$scope:{ctx:i}};return i[1]!==void 0&&(w.value=i[1]),u=new Fi({props:w}),i[40](u),He.push(()=>Ue(u,"value",b)),u.$on("select",i[15]),{c(){e=T("div"),l=T("div"),t=T("div"),H(n.$$.fragment),o=Y(),s=T("div"),H(r.$$.fragment),a=Y(),f=T("div"),H(u.$$.fragment),this.h()},l(g){e=V(g,"DIV",{class:!0});var E=S(e);l=V(E,"DIV",{class:!0});var y=S(l);t=V(y,"DIV",{class:!0});var M=S(t);O(n.$$.fragment,M),M.forEach(m),o=Q(y),s=V(y,"DIV",{class:!0});var C=S(s);O(r.$$.fragment,C),C.forEach(m),a=Q(y),f=V(y,"DIV",{class:!0});var I=S(f);O(u.$$.fragment,I),I.forEach(m),y.forEach(m),E.forEach(m),this.h()},h(){D(t,"class","search-icon flex items-center svelte-18z5kej"),D(s,"class","embedding-dropdown rounded border-r border-gray-200"),D(f,"class","search-container w-full flex-grow"),D(l,"class","flex w-full rounded border border-gray-200"),D(e,"class","flex h-full w-full flex-grow items-center")},m(g,E){N(g,e,E),v(e,l),v(l,t),R(n,t,null),v(l,o),v(l,s),R(r,s,null),v(l,a),v(l,f),R(u,f,null),c=!0,d||(h=$e(Se.call(null,t,{text:"Select the field to search over."})),d=!0)},p(g,E){var C;const y={};E[0]&1&&(y.disabled=g[0]==null),E[0]&33&&(y.selectedId=g[0]?Be(g[0]):(C=g[5][0])==null?void 0:C.id),E[0]&32&&(y.items=g[5]),E[0]&32|E[1]&34603008&&(y.$$scope={dirty:E,ctx:g}),r.$set(y);const M={};E[0]&8&&(M.items=g[3]),E[0]&64&&(M.placeholder=g[6]),E[0]&15|E[1]&34078720&&(M.$$scope={dirty:E,ctx:g}),!_&&E[0]&2&&(_=!0,M.value=g[1],Ye(()=>_=!1)),u.$set(M)},i(g){c||(p(n.$$.fragment,g),p(r.$$.fragment,g),p(u.$$.fragment,g),c=!0)},o(g){$(n.$$.fragment,g),$(r.$$.fragment,g),$(u.$$.fragment,g),c=!1},d(g){g&&m(e),L(n),L(r),i[40](null),L(u),d=!1,h()}}}const mo=(i,e)=>i.text.toLowerCase().includes(e.toLowerCase())||i.id==="new-concept"||i.id==="compute-embedding";function ho(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,B,x,Z,F=X,j=()=>(F(),F=Te(t,me=>l(36,Z=me)),t),A;i.$$.on_destroy.push(()=>F());const ee=qe();be(i,ee,me=>l(37,A=me));const U=Ze();be(i,U,me=>l(31,y=me));const W=Qt();be(i,W,me=>l(35,x=me));let J;function P(me,Me,Ke,We){if(Ke==null||Me==null||me==null)return[];const tt=Ke?lt(Ke):[],Ce=[];for(const ze of tt){if(ze.dtype==null||ze.dtype==="embedding"||ze.dtype==="binary"||!ki(ze.path,me))continue;const Oe=$s(ze);if((Oe==null?void 0:Oe.signal_name)==="concept_score"||(We==null?void 0:We.some(Wi=>Wi.name===(Oe==null?void 0:Oe.signal_name))))continue;const Gt=di(ze.path),Kt=Je(ze.path.slice(me.length));if($i(ze.dtype)){Ce.push({id:{type:"field",path:ze.path,sort:"DESC",isSignal:Oe!=null},text:Kt,description:`Sort descending by ${Gt}`});continue}if(ze.dtype==="string"||ze.dtype==="string_span"){if(Oe==null)continue;Ce.push({id:{type:"field",path:ze.path,op:"exists",isSignal:Oe!=null},text:Kt,description:`Find documents with ${Gt}`});continue}}return Ce}const te=vi();be(i,te,me=>l(44,M=me));const ue=wi();be(i,ue,me=>l(34,B=me));const fe=(me,Me)=>`${Be(me||"")}_${Me}`;let re={};const ae=ps();be(i,ae,me=>l(33,I=me));const le=mt();be(i,le,me=>l(32,C=me));let q=[],z="",ne;function De(){f!=null&&(l(17,re[fe(J,f)]=!0,re),M.mutate([n,o,{leaf_path:zt(J||[]),signal:{signal_name:f}}]))}let he;const Ne=(me,Me)=>{J==null||f==null||(ee.addSearch({path:J,type:"concept",concept_namespace:me,concept_name:Me,embedding:f}),he.clear())},je=me=>{ee.addFilter({path:[me,"label"],op:"equals",value:"true"})},st=me=>{if(J!=null){if(me.detail.selectedId==="new-concept"){z===ne.id&&l(1,z="");const Me=z.split("/",2);let Ke="",We="";Me.length===2?[Ke,We]=Me:[We]=Me,Xe({command:xe.CreateConcept,namespace:Ke,conceptName:We,dataset:{namespace:n,name:o},path:J,onCreate:tt=>Ne(tt.detail.namespace,tt.detail.name)})}else if(me.detail.selectedId==="keyword-search"){if(z=="")return;ee.addSearch({path:J,type:"keyword",query:z})}else if(me.detail.selectedId=="semantic-search"){if(z==""||f==null)return;ee.addSearch({path:J,type:"semantic",query:z,embedding:f})}else if(me.detail.selectedId=="compute-embedding")De();else if(me.detail.selectedId.type==="concept")Ne(me.detail.selectedId.namespace,me.detail.selectedId.name);else if(me.detail.selectedId.type==="label")je(me.detail.selectedId.name);else if(me.detail.selectedId.type==="field"){const Me=me.detail.selectedId;if(Me.sort!=null)ee.setSortBy(Me.path),ee.setSortOrder(Me.sort);else if(Me.op!=null)ee.addFilter({path:Me.path,op:Me.op});else throw new Error(`Unknown search type ${me.detail.selectedId}`)}else throw new Error(`Unknown search type ${me.detail.selectedId}`);he.clear()}},_t=me=>{l(0,J=me.detail.selectedItem.path)};let Zt=[];const ji=(me,Me)=>Me===me,Ui=(me,Me)=>Me.id===me.id;function Yi(me){He[me?"unshift":"push"](()=>{he=me,l(4,he)})}function Qi(me){z=me,l(1,z)}return i.$$.update=()=>{var me,Me,Ke,We,tt;i.$$.dirty[1]&64&&j(l(7,t=ot(A.namespace,A.datasetName))),i.$$.dirty[1]&64&&(n=A.namespace),i.$$.dirty[1]&64&&(o=A.datasetName),i.$$.dirty[1]&32&&l(19,s=(Ke=(Me=(me=Z.data)==null?void 0:me.ui)==null?void 0:Me.media_paths)==null?void 0:Ke.map(Ce=>Array.isArray(Ce)?Ce:[Ce])),i.$$.dirty[0]&524289|i.$$.dirty[1]&1&&J==null&&s!=null&&l(0,J=bs(y,s)),i.$$.dirty[0]&1|i.$$.dirty[1]&64&&l(20,r=Ft(A,J)),i.$$.dirty[0]&1|i.$$.dirty[1]&9&&l(22,a=P(J,y.stats,y.schema,B.data)),i.$$.dirty[0]&1|i.$$.dirty[1]&57&&l(2,f=vs(Z.data,x,y,J,(B.data||[]).map(Ce=>Ce.name))),i.$$.dirty[0]&1|i.$$.dirty[1]&1&&l(30,u=vt(y.schema,J)),i.$$.dirty[0]&1073741828&&l(25,_=u!=null&&!!u.includes(f||"")),i.$$.dirty[0]&33685509&&l(28,c=!_&&re[fe(J,f)]),i.$$.dirty[0]&33554432&&l(6,d=_?"Search by keyword, field or concept.":"Search by keyword or field. Compute embedding to enable concept search."),i.$$.dirty[1]&2&&l(29,h=(tt=(We=C.data)==null?void 0:We.user)==null?void 0:tt.id),i.$$.dirty[0]&570425344|i.$$.dirty[1]&4&&l(21,b=_?ws(I.data||[],h):[]),i.$$.dirty[0]&2&&l(18,ne={id:"new-concept",text:z}),i.$$.dirty[0]&2&&l(27,w={id:"keyword-search",text:z}),i.$$.dirty[0]&2&&l(26,k={id:"semantic-search",text:z}),i.$$.dirty[0]&268435456&&l(24,g={id:"compute-embedding",text:"Compute embedding",disabled:c}),i.$$.dirty[1]&1&&l(23,E=y.schema!=null?fi(y.schema):[]),i.$$.dirty[0]&267649030|i.$$.dirty[1]&6&&l(3,q=I!=null&&I.data?[...z!=""?[w]:[],...z!=""&&f&&_?[k]:[],..._?[ne]:[g],...E.map(Ce=>({id:{type:"label",name:Ce},text:Ce,description:`Find documents labeled "${Ce}"`})),...a,...b.flatMap(Ce=>Ce.concepts.map(ze=>({id:{namespace:ze.namespace,name:ze.name,type:"concept"},text:ks(ze.namespace,ze.name,C.data),description:ze.metadata.description||void 0,disabled:r.some(Oe=>Oe.type==="concept"&&Oe.concept_namespace===ze.namespace&&Oe.concept_name===ze.name)})))]:[]),i.$$.dirty[0]&524288|i.$$.dirty[1]&1&&l(5,Zt=(s||[]).map(Ce=>({id:Be(Ce),text:Je(Ce),path:Ce,embeddings:vt(y.schema,Ce)})))},[J,z,f,q,he,Zt,d,t,ee,U,W,te,ue,ae,le,st,_t,re,ne,s,r,b,a,E,g,_,k,w,c,h,u,y,C,I,B,x,Z,A,ji,Ui,Yi,Qi]}class _o extends we{constructor(e){super(),ke(this,e,ho,co,ve,{},null,[-1,-1])}}function un(i){let e,l;return e=new xi({props:{light:!0,flipped:!0,$$slots:{default:[go]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&767|n[1]&1&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function cn(i){let e,l;return e=new it({props:{text:"Sort by"}}),e.$on("click",i[20]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function dn(i){let e,l;return e=new it({props:{text:"Filter"}}),e.$on("click",i[21]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function mn(i){let e,l,t,n,o,s;return l=new it({props:{disabled:!i[7],text:"Compute embedding"}}),l.$on("click",i[22]),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=$e(t=Se.call(null,e,{text:i[7]?"":"User does not have access to compute embeddings over this dataset."})),o=!0)},p(r,a){const f={};a[0]&128&&(f.disabled=!r[7]),l.$set(f),t&&Pe(t.update)&&a[0]&128&&t.update.call(null,{text:r[7]?"":"User does not have access to compute embeddings over this dataset."})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,s()}}}function hn(i){let e,l,t,n,o,s;return l=new it({props:{text:"Compute concept",disabled:!i[7]||i[9].length===0}}),l.$on("click",i[23]),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=$e(t=Se.call(null,e,{text:i[7]?i[9].length===0?"No embeddings are computed for this field. Compute embeddings before using concepts.":"":"User does not have access to compute concepts over this dataset."})),o=!0)},p(r,a){const f={};a[0]&640&&(f.disabled=!r[7]||r[9].length===0),l.$set(f),t&&Pe(t.update)&&a[0]&640&&t.update.call(null,{text:r[7]?r[9].length===0?"No embeddings are computed for this field. Compute embeddings before using concepts.":"":"User does not have access to compute concepts over this dataset."})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,s()}}}function _n(i){let e,l,t,n,o,s;return l=new it({props:{text:"Compute signal",disabled:!i[7]}}),l.$on("click",i[24]),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=$e(t=Se.call(null,e,{text:i[7]?"":"User does not have access to compute signals over this dataset."})),o=!0)},p(r,a){const f={};a[0]&128&&(f.disabled=!r[7]),l.$set(f),t&&Pe(t.update)&&a[0]&128&&t.update.call(null,{text:r[7]?"":"User does not have access to compute signals over this dataset."})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,s()}}}function gn(i){let e,l;return e=new it({props:{text:"Preview signal"}}),e.$on("click",i[25]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function pn(i){let e,l,t,n,o,s;return l=new it({props:{disabled:!i[6],text:"Delete signal"}}),l.$on("click",i[26]),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){D(e,"class","w-full")},m(r,a){N(r,e,a),R(l,e,null),n=!0,o||(s=$e(t=Se.call(null,e,{text:i[6]?"":"User does not have access to delete signals for this dataset."})),o=!0)},p(r,a){const f={};a[0]&64&&(f.disabled=!r[6]),l.$set(f),t&&Pe(t.update)&&a[0]&64&&t.update.call(null,{text:r[6]?"":"User does not have access to delete signals for this dataset."})},i(r){n||(p(l.$$.fragment,r),n=!0)},o(r){$(l.$$.fragment,r),n=!1},d(r){r&&m(e),L(l),o=!1,s()}}}function go(i){let e=wt(i[0]),l,t=Dt(i[0]),n,o,s,r,a,f,u,_=e&&cn(i),c=t&&dn(i),d=!i[2]&&mn(i),h=!i[2]&&hn(i),b=!i[2]&&_n(i),w=!i[2]&&gn(i),k=i[1]&&pn(i);return{c(){_&&_.c(),l=Y(),c&&c.c(),n=Y(),d&&d.c(),o=Y(),h&&h.c(),s=Y(),b&&b.c(),r=Y(),w&&w.c(),a=Y(),k&&k.c(),f=de()},l(g){_&&_.l(g),l=Q(g),c&&c.l(g),n=Q(g),d&&d.l(g),o=Q(g),h&&h.l(g),s=Q(g),b&&b.l(g),r=Q(g),w&&w.l(g),a=Q(g),k&&k.l(g),f=de()},m(g,E){_&&_.m(g,E),N(g,l,E),c&&c.m(g,E),N(g,n,E),d&&d.m(g,E),N(g,o,E),h&&h.m(g,E),N(g,s,E),b&&b.m(g,E),N(g,r,E),w&&w.m(g,E),N(g,a,E),k&&k.m(g,E),N(g,f,E),u=!0},p(g,E){E[0]&1&&(e=wt(g[0])),e?_?(_.p(g,E),E[0]&1&&p(_,1)):(_=cn(g),_.c(),p(_,1),_.m(l.parentNode,l)):_&&(ie(),$(_,1,1,()=>{_=null}),se()),E[0]&1&&(t=Dt(g[0])),t?c?(c.p(g,E),E[0]&1&&p(c,1)):(c=dn(g),c.c(),p(c,1),c.m(n.parentNode,n)):c&&(ie(),$(c,1,1,()=>{c=null}),se()),g[2]?d&&(ie(),$(d,1,1,()=>{d=null}),se()):d?(d.p(g,E),E[0]&4&&p(d,1)):(d=mn(g),d.c(),p(d,1),d.m(o.parentNode,o)),g[2]?h&&(ie(),$(h,1,1,()=>{h=null}),se()):h?(h.p(g,E),E[0]&4&&p(h,1)):(h=hn(g),h.c(),p(h,1),h.m(s.parentNode,s)),g[2]?b&&(ie(),$(b,1,1,()=>{b=null}),se()):b?(b.p(g,E),E[0]&4&&p(b,1)):(b=_n(g),b.c(),p(b,1),b.m(r.parentNode,r)),g[2]?w&&(ie(),$(w,1,1,()=>{w=null}),se()):w?(w.p(g,E),E[0]&4&&p(w,1)):(w=gn(g),w.c(),p(w,1),w.m(a.parentNode,a)),g[1]?k?(k.p(g,E),E[0]&2&&p(k,1)):(k=pn(g),k.c(),p(k,1),k.m(f.parentNode,f)):k&&(ie(),$(k,1,1,()=>{k=null}),se())},i(g){u||(p(_),p(c),p(d),p(h),p(b),p(w),p(k),u=!0)},o(g){$(_),$(c),$(d),$(h),$(b),$(w),$(k),u=!1},d(g){_&&_.d(g),g&&m(l),c&&c.d(g),g&&m(n),d&&d.d(g),g&&m(o),h&&h.d(g),g&&m(s),b&&b.d(g),g&&m(r),w&&w.d(g),g&&m(a),k&&k.d(g),g&&m(f)}}}function po(i){let e,l,t,n=Be(i[0].path)+"",o,s,r,a,f;return{c(){e=T("p"),l=G("Confirm deleting "),t=T("code"),o=G(n),s=G(" ?"),r=Y(),a=T("p"),f=G("This is a permanent action and cannot be undone."),this.h()},l(u){e=V(u,"P",{class:!0});var _=S(e);l=K(_,"Confirm deleting "),t=V(_,"CODE",{});var c=S(t);o=K(c,n),c.forEach(m),s=K(_," ?"),_.forEach(m),r=Q(u),a=V(u,"P",{class:!0});var d=S(a);f=K(d,"This is a permanent action and cannot be undone."),d.forEach(m),this.h()},h(){D(e,"class","!text-lg"),D(a,"class","mt-2")},m(u,_){N(u,e,_),v(e,l),v(e,t),v(t,o),v(e,s),N(u,r,_),N(u,a,_),v(a,f)},p(u,_){_[0]&1&&n!==(n=Be(u[0].path)+"")&&ce(o,n)},d(u){u&&m(e),u&&m(r),u&&m(a)}}}function bo(i){let e,l,t,n,o=i[8]&&un(i);function s(a){i[27](a)}let r={danger:!0,modalHeading:"Delete signal",primaryButtonText:"Delete",primaryButtonIcon:i[10].isLoading?tl:void 0,secondaryButtonText:"Cancel",$$slots:{default:[po]},$$scope:{ctx:i}};return i[3]!==void 0&&(r.open=i[3]),l=new Yt({props:r}),He.push(()=>Ue(l,"open",s)),l.$on("click:button--secondary",i[28]),l.$on("open",i[29]),l.$on("close",i[30]),l.$on("submit",i[15]),{c(){o&&o.c(),e=Y(),H(l.$$.fragment)},l(a){o&&o.l(a),e=Q(a),O(l.$$.fragment,a)},m(a,f){o&&o.m(a,f),N(a,e,f),R(l,a,f),n=!0},p(a,f){a[8]?o?(o.p(a,f),f[0]&256&&p(o,1)):(o=un(a),o.c(),p(o,1),o.m(e.parentNode,e)):o&&(ie(),$(o,1,1,()=>{o=null}),se());const u={};f[0]&1024&&(u.primaryButtonIcon=a[10].isLoading?tl:void 0),f[0]&1|f[1]&1&&(u.$$scope={dirty:f,ctx:a}),!t&&f[0]&8&&(t=!0,u.open=a[3],Ye(()=>t=!1)),l.$set(u)},i(a){n||(p(o),p(l.$$.fragment,a),n=!0)},o(a){$(o),$(l.$$.fragment,a),n=!1},d(a){o&&o.d(a),a&&m(e),L(l,a)}}}function vo(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h,b,{field:w}=e,k=!1;const g=qe();be(i,g,P=>l(19,b=P));const E=Ze();be(i,E,P=>l(18,h=P));const y=Ss();be(i,y,P=>l(10,c=P));const M=mt();be(i,M,P=>l(17,d=P));function C(){c.mutate([t,n,{signal_path:w.path}],{onSuccess:()=>{l(3,k=!1),g.deleteSignal(w.path)}})}const I=()=>g.addSortBy(w.path),B=()=>Xe({command:xe.EditFilter,namespace:t,datasetName:n,path:w.path}),x=()=>Xe({command:xe.ComputeEmbedding,namespace:t,datasetName:n,path:w==null?void 0:w.path}),Z=()=>Xe({command:xe.ComputeConcept,namespace:t,datasetName:n,path:w==null?void 0:w.path}),F=()=>Xe({command:xe.ComputeSignal,namespace:t,datasetName:n,path:w==null?void 0:w.path}),j=()=>Xe({command:xe.PreviewConcept,namespace:t,datasetName:n,path:w==null?void 0:w.path}),A=()=>l(3,k=!0);function ee(P){k=P,l(3,k)}const U=()=>l(3,k=!1);function W(P){pt.call(this,i,P)}function J(P){pt.call(this,i,P)}return i.$$set=P=>{"field"in P&&l(0,w=P.field)},i.$$.update=()=>{var P,te,ue;i.$$.dirty[0]&524288&&l(5,t=b.namespace),i.$$.dirty[0]&524288&&l(4,n=b.datasetName),i.$$.dirty[0]&1&&l(2,o=nt(w)),i.$$.dirty[0]&1&&l(1,s=Ht(w)),i.$$.dirty[0]&262145&&l(9,r=vt(h.schema,w.path)),i.$$.dirty[0]&262145&&l(16,a=Ei(((P=h.selectRowsSchema)==null?void 0:P.data)||null,w.path)),i.$$.dirty[0]&65543&&l(8,f=(wt(w)||Dt(w)||!o||s)&&!a),i.$$.dirty[0]&131072&&l(7,u=(te=d.data)==null?void 0:te.access.dataset.compute_signals),i.$$.dirty[0]&131072&&l(6,_=(ue=d.data)==null?void 0:ue.access.dataset.delete_signals)},[w,s,o,k,n,t,_,u,f,r,c,g,E,y,M,C,a,d,h,b,I,B,x,Z,F,j,A,ee,U,W,J]}class wo extends we{constructor(e){super(),ke(this,e,vo,bo,ve,{field:0},null,[-1,-1])}}function ko(i){let e,l,t,n,o;const s=[i[3],{type:i[0]?"green":"blue"},{icon:i[2]}];let r={};for(let a=0;a<s.length;a+=1)r=pe(r,s[a]);return l=new Ge({props:r}),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),f.forEach(m),this.h()},h(){D(e,"class","signal-badge")},m(a,f){N(a,e,f),R(l,e,null),t=!0,n||(o=$e(Se.call(null,e,{text:i[1]})),n=!0)},p(a,[f]){const u=f&13?Re(s,[f&8&&oi(a[3]),f&1&&{type:a[0]?"green":"blue"},f&4&&{icon:a[2]}]):{};l.$set(u)},i(a){t||(p(l.$$.fragment,a),t=!0)},o(a){$(l.$$.fragment,a),t=!1},d(a){a&&m(e),L(l),n=!1,o()}}}function $o(i,e,l){const t=["isPreview"];let n=ye(e,t),{isPreview:o=!1}=e;const s=o?"Signal is in preview mode and has not been computed for the whole dataset.":"Generated by a signal.",r=o?Ws:Sr;return i.$$set=a=>{e=pe(pe({},e),Ie(a)),l(3,n=ye(e,t)),"isPreview"in a&&l(0,o=a.isPreview)},[o,s,r,n]}class Eo extends we{constructor(e){super(),ke(this,e,$o,ko,ve,{isPreview:0})}}function bn(i,e,l){const t=i.slice();t[7]=e[l][0],t[8]=e[l][1];const n=t[2](t[7]);t[9]=n;const o=`${t[8]/t[1]*100}%`;t[10]=o;const s=Ee(t[8]);return t[11]=s,t}function vn(i){let e,l,t=i[9]+"",n,o,s,r,a,f=i[11]+"",u,_,c,d,h;function b(){return i[6](i[7])}return{c(){e=T("button"),l=T("div"),n=G(t),s=Y(),r=T("div"),a=T("div"),u=G(f),c=Y(),this.h()},l(w){e=V(w,"BUTTON",{class:!0});var k=S(e);l=V(k,"DIV",{title:!0,class:!0});var g=S(l);n=K(g,t),g.forEach(m),s=Q(k),r=V(k,"DIV",{class:!0});var E=S(r);a=V(E,"DIV",{title:!0,class:!0});var y=S(a);u=K(y,f),y.forEach(m),E.forEach(m),c=Q(k),k.forEach(m),this.h()},h(){D(l,"title",o=i[9]),D(l,"class","w-48 flex-none truncate px-2"),D(a,"title",_=i[11]),D(a,"class","histogram-bar my-px bg-indigo-200 pl-2 text-xs leading-5"),ft(a,"width",i[10]),D(r,"class","w-36 border-l border-gray-300 pl-2"),D(e,"class","flex items-center p-0 text-left text-xs text-black hover:bg-gray-200")},m(w,k){N(w,e,k),v(e,l),v(l,n),v(e,s),v(e,r),v(r,a),v(a,u),v(e,c),d||(h=Fe(e,"click",b),d=!0)},p(w,k){i=w,k&1&&t!==(t=i[9]+"")&&ce(n,t),k&1&&o!==(o=i[9])&&D(l,"title",o),k&1&&f!==(f=i[11]+"")&&ce(u,f),k&1&&_!==(_=i[11])&&D(a,"title",_),k&3&&ft(a,"width",i[10])},d(w){w&&m(e),d=!1,h()}}}function So(i){let e,l=i[0],t=[];for(let n=0;n<l.length;n+=1)t[n]=vn(bn(i,l,n));return{c(){e=T("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);for(let s=0;s<t.length;s+=1)t[s].l(o);o.forEach(m),this.h()},h(){D(e,"class","histogram")},m(n,o){N(n,e,o);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,[o]){if(o&15){l=n[0];let s;for(s=0;s<l.length;s+=1){const r=bn(n,l,s);t[s]?t[s].p(r,o):(t[s]=vn(r),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},i:X,o:X,d(n){n&&m(e),Ae(t,n)}}}function yo(i,e,l){let t,{field:n}=e,{counts:o}=e,{bins:s}=e;function r(u){if(u==null)return Ee(u);if(s==null||n.bins!=null)return Ee(u);const[_,c]=s[u.toString()];return _==null?`< ${Ee(c)}`:c==null?`≥ ${Ee(_)}`:`${Ee(_)} .. ${Ee(c)}`}const a=dt(),f=u=>a("row-click",{value:u});return i.$$set=u=>{"field"in u&&l(4,n=u.field),"counts"in u&&l(0,o=u.counts),"bins"in u&&l(5,s=u.bins)},i.$$.update=()=>{i.$$.dirty&1&&l(1,t=Math.max(...o.map(([u,_])=>_)))},[o,t,r,a,n,s,f]}class Io extends we{constructor(e){super(),ke(this,e,yo,So,ve,{field:4,counts:0,bins:5})}}function Do(i){let e,l,t,n,o,s,r,a,f,u,_,c=Ee(i[4].total_count)+"",d,h,b,w,k,g,E,y,M,C,I,B,x=Ee(i[4].approx_count_distinct)+"",Z,F,j,A,ee,U;s=new ct({props:{class:"inline"}}),g=new ct({props:{class:"inline"}});let W=i[4].avg_text_length&&wn(i),J=i[4].min_val&&i[4].max_val&&kn(i);return{c(){e=T("table"),l=T("tbody"),t=T("tr"),n=T("td"),o=T("span"),H(s.$$.fragment),r=Y(),a=T("span"),f=G("Total count"),u=Y(),_=T("td"),d=G(c),h=Y(),b=T("tr"),w=T("td"),k=T("span"),H(g.$$.fragment),E=Y(),y=T("span"),M=G("Unique values"),C=Y(),I=T("td"),B=G("~"),Z=G(x),F=Y(),W&&W.c(),j=Y(),J&&J.c(),this.h()},l(P){e=V(P,"TABLE",{class:!0});var te=S(e);l=V(te,"TBODY",{});var ue=S(l);t=V(ue,"TR",{});var fe=S(t);n=V(fe,"TD",{class:!0});var re=S(n);o=V(re,"SPAN",{});var ae=S(o);O(s.$$.fragment,ae),ae.forEach(m),r=Q(re),a=V(re,"SPAN",{});var le=S(a);f=K(le,"Total count"),le.forEach(m),re.forEach(m),u=Q(fe),_=V(fe,"TD",{class:!0});var q=S(_);d=K(q,c),q.forEach(m),fe.forEach(m),h=Q(ue),b=V(ue,"TR",{});var z=S(b);w=V(z,"TD",{class:!0});var ne=S(w);k=V(ne,"SPAN",{});var De=S(k);O(g.$$.fragment,De),De.forEach(m),E=Q(ne),y=V(ne,"SPAN",{});var he=S(y);M=K(he,"Unique values"),he.forEach(m),ne.forEach(m),C=Q(z),I=V(z,"TD",{class:!0});var Ne=S(I);B=K(Ne,"~"),Z=K(Ne,x),Ne.forEach(m),z.forEach(m),F=Q(ue),W&&W.l(ue),j=Q(ue),J&&J.l(ue),ue.forEach(m),te.forEach(m),this.h()},h(){D(n,"class","svelte-1tctrjz"),D(_,"class","svelte-1tctrjz"),D(w,"class","svelte-1tctrjz"),D(I,"class","svelte-1tctrjz"),D(e,"class","stats-table w-full svelte-1tctrjz")},m(P,te){N(P,e,te),v(e,l),v(l,t),v(t,n),v(n,o),R(s,o,null),v(n,r),v(n,a),v(a,f),v(t,u),v(t,_),v(_,d),v(l,h),v(l,b),v(b,w),v(w,k),R(g,k,null),v(w,E),v(w,y),v(y,M),v(b,C),v(b,I),v(I,B),v(I,Z),v(l,F),W&&W.m(l,null),v(l,j),J&&J.m(l,null),A=!0,ee||(U=[$e(Se.call(null,o,{text:"Total number of rows where the value is defined."})),$e(Se.call(null,k,{text:"An approximation of the total number of unique values."}))],ee=!0)},p(P,te){(!A||te&16)&&c!==(c=Ee(P[4].total_count)+"")&&ce(d,c),(!A||te&16)&&x!==(x=Ee(P[4].approx_count_distinct)+"")&&ce(Z,x),P[4].avg_text_length?W?(W.p(P,te),te&16&&p(W,1)):(W=wn(P),W.c(),p(W,1),W.m(l,j)):W&&(ie(),$(W,1,1,()=>{W=null}),se()),P[4].min_val&&P[4].max_val?J?(J.p(P,te),te&16&&p(J,1)):(J=kn(P),J.c(),p(J,1),J.m(l,null)):J&&(ie(),$(J,1,1,()=>{J=null}),se())},i(P){A||(p(s.$$.fragment,P),p(g.$$.fragment,P),p(W),p(J),A=!0)},o(P){$(s.$$.fragment,P),$(g.$$.fragment,P),$(W),$(J),A=!1},d(P){P&&m(e),L(s),L(g),W&&W.d(),J&&J.d(),ee=!1,Qe(U)}}}function To(i){let e,l;return e=new Le({props:{paragraph:!0,width:"50%"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Vo(i){let e,l,t=i[2].error.message+"",n;return{c(){e=T("p"),l=G("Error: "),n=G(t)},l(o){e=V(o,"P",{});var s=S(e);l=K(s,"Error: "),n=K(s,t),s.forEach(m)},m(o,s){N(o,e,s),v(e,l),v(e,n)},p(o,s){s&4&&t!==(t=o[2].error.message+"")&&ce(n,t)},i:X,o:X,d(o){o&&m(e)}}}function wn(i){let e,l,t,n,o,s,r,a,f,u=Ee(i[4].avg_text_length)+"",_,c,d,h;return n=new ct({props:{class:"inline"}}),{c(){e=T("tr"),l=T("td"),t=T("span"),H(n.$$.fragment),o=Y(),s=T("span"),r=G("Average text length"),a=Y(),f=T("td"),_=G(u),this.h()},l(b){e=V(b,"TR",{});var w=S(e);l=V(w,"TD",{class:!0});var k=S(l);t=V(k,"SPAN",{});var g=S(t);O(n.$$.fragment,g),g.forEach(m),o=Q(k),s=V(k,"SPAN",{});var E=S(s);r=K(E,"Average text length"),E.forEach(m),k.forEach(m),a=Q(w),f=V(w,"TD",{class:!0});var y=S(f);_=K(y,u),y.forEach(m),w.forEach(m),this.h()},h(){D(l,"class","svelte-1tctrjz"),D(f,"class","svelte-1tctrjz")},m(b,w){N(b,e,w),v(e,l),v(l,t),R(n,t,null),v(l,o),v(l,s),v(s,r),v(e,a),v(e,f),v(f,_),c=!0,d||(h=$e(Se.call(null,t,{text:"The average length of the text in characters."})),d=!0)},p(b,w){(!c||w&16)&&u!==(u=Ee(b[4].avg_text_length)+"")&&ce(_,u)},i(b){c||(p(n.$$.fragment,b),c=!0)},o(b){$(n.$$.fragment,b),c=!1},d(b){b&&m(e),L(n),d=!1,h()}}}function kn(i){let e,l,t,n,o,s,r,a,f,u=Ee(i[4].min_val)+"",_,c,d=Ee(i[4].max_val)+"",h,b,w,k;return n=new ct({props:{class:"inline"}}),{c(){e=T("tr"),l=T("td"),t=T("span"),H(n.$$.fragment),o=Y(),s=T("span"),r=G("Range"),a=Y(),f=T("td"),_=G(u),c=G(" .. "),h=G(d),this.h()},l(g){e=V(g,"TR",{});var E=S(e);l=V(E,"TD",{class:!0});var y=S(l);t=V(y,"SPAN",{});var M=S(t);O(n.$$.fragment,M),M.forEach(m),o=Q(y),s=V(y,"SPAN",{});var C=S(s);r=K(C,"Range"),C.forEach(m),y.forEach(m),a=Q(E),f=V(E,"TD",{class:!0});var I=S(f);_=K(I,u),c=K(I," .. "),h=K(I,d),I.forEach(m),E.forEach(m),this.h()},h(){D(l,"class","svelte-1tctrjz"),D(f,"class","svelte-1tctrjz")},m(g,E){N(g,e,E),v(e,l),v(l,t),R(n,t,null),v(l,o),v(l,s),v(s,r),v(e,a),v(e,f),v(f,_),v(f,c),v(f,h),b=!0,w||(k=$e(Se.call(null,t,{text:"The minimum and maximum value across the dataset"})),w=!0)},p(g,E){(!b||E&16)&&u!==(u=Ee(g[4].min_val)+"")&&ce(_,u),(!b||E&16)&&d!==(d=Ee(g[4].max_val)+"")&&ce(h,d)},i(g){b||(p(n.$$.fragment,g),b=!0)},o(g){$(n.$$.fragment,g),b=!1},d(g){g&&m(e),L(n),w=!1,k()}}}function No(i){let e,l,t;return l=new Io({props:{counts:i[5],bins:i[3],field:i[0]}}),l.$on("row-click",i[13]),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=S(e);O(l.$$.fragment,o),o.forEach(m),this.h()},h(){D(e,"class","mt-4")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p(n,o){const s={};o&32&&(s.counts=n[5]),o&8&&(s.bins=n[3]),o&1&&(s.field=n[0]),l.$set(s)},i(n){t||(p(l.$$.fragment,n),t=!0)},o(n){$(l.$$.fragment,n),t=!1},d(n){n&&m(e),L(l)}}}function Mo(i){let e,l;return e=new Le({props:{paragraph:!0,width:"50%"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Co(i){let e,l,t=i[1].error.message+"",n;return{c(){e=T("p"),l=G("Error: "),n=G(t)},l(o){e=V(o,"P",{});var s=S(e);l=K(s,"Error: "),n=K(s,t),s.forEach(m)},m(o,s){N(o,e,s),v(e,l),v(e,n)},p(o,s){s&2&&t!==(t=o[1].error.message+"")&&ce(n,t)},i:X,o:X,d(o){o&&m(e)}}}function zo(i){let e,l,t,n,o,s,r;const a=[Vo,To,Do],f=[];function u(h,b){return h[2].error?0:h[4]==null?1:2}l=u(i),t=f[l]=a[l](i);const _=[Co,Mo,No],c=[];function d(h,b){return h[1].error?0:h[5]==null?1:h[5].length>0?2:-1}return~(o=d(i))&&(s=c[o]=_[o](i)),{c(){e=T("div"),t.c(),n=Y(),s&&s.c(),this.h()},l(h){e=V(h,"DIV",{class:!0});var b=S(e);t.l(b),n=Q(b),s&&s.l(b),b.forEach(m),this.h()},h(){D(e,"class","p-4")},m(h,b){N(h,e,b),f[l].m(e,null),v(e,n),~o&&c[o].m(e,null),r=!0},p(h,[b]){let w=l;l=u(h),l===w?f[l].p(h,b):(ie(),$(f[w],1,1,()=>{f[w]=null}),se(),t=f[l],t?t.p(h,b):(t=f[l]=a[l](h),t.c()),p(t,1),t.m(e,n));let k=o;o=d(h),o===k?~o&&c[o].p(h,b):(s&&(ie(),$(c[k],1,1,()=>{c[k]=null}),se()),~o?(s=c[o],s?s.p(h,b):(s=c[o]=_[o](h),s.c()),p(s,1),s.m(e,null)):s=null)},i(h){r||(p(t),p(s),r=!0)},o(h){$(t),$(s),r=!1},d(h){h&&m(e),f[l].d(),~o&&c[o].d()}}}function Fo(i,e,l){let t,n,o,s,r,a=X,f=()=>(a(),a=Te(n,M=>l(1,r=M)),n),u,_=X,c=()=>(_(),_=Te(t,M=>l(2,u=M)),t),d;i.$$.on_destroy.push(()=>a()),i.$$.on_destroy.push(()=>_());let{field:h}=e;const b=qe();be(i,b,M=>l(12,d=M));let w,k,g=null;function E(M){if(M==null)return;if(g!=null){const[I,B]=g[M.toString()];if(I!=null){const x={path:h.path,op:"greater_equal",value:I};b.addFilter(x)}if(B!=null){const x={path:h.path,op:"less",value:B};b.addFilter(x)}return}const C={path:h.path,op:"equals",value:M};b.addFilter(C)}const y=M=>E(M.detail.value);return i.$$set=M=>{"field"in M&&l(0,h=M.field)},i.$$.update=()=>{var M;if(i.$$.dirty&4097&&c(l(7,t=Si(d.namespace,d.datasetName,{leaf_path:h.path}))),i.$$.dirty&1&&l(10,w=$i(h.dtype)&&!h.categorical?"value":"count"),i.$$.dirty&1024&&l(11,k=w==="value"?"ASC":"DESC"),i.$$.dirty&7169&&f(l(6,n=yi(d.namespace,d.datasetName,{leaf_path:h.path,filters:d.query.filters,sort_by:w,sort_order:k}))),i.$$.dirty&2&&l(5,o=r.data!=null?r.data.counts:null),i.$$.dirty&4&&l(4,s=u.data!=null?u.data:null),i.$$.dirty&2)if(((M=r.data)==null?void 0:M.bins)!=null){l(3,g={});for(const[C,I,B]of Object.values(r.data.bins))l(3,g[C]=[I,B],g)}else l(3,g=null)},[h,r,u,g,s,o,n,t,b,E,w,k,d,y]}class Po extends we{constructor(e){super(),ke(this,e,Fo,zo,ve,{field:0})}}function $n(i,e,l){const t=i.slice();return t[37]=e[l],t}function En(i,e,l){const t=i.slice();return t[40]=e[l],t}function Sn(i,e,l){const t=i.slice();return t[43]=e[l],t}function yn(i,e,l){const t=i.slice();return t[46]=e[l],t}function Ao(i){let e,l="{}",t;return{c(){e=T("span"),t=G(l),this.h()},l(n){e=V(n,"SPAN",{class:!0});var o=S(e);t=K(o,l),o.forEach(m),this.h()},h(){D(e,"class","font-mono")},m(n,o){N(n,e,o),v(e,t)},p:X,i:X,o:X,d(n){n&&m(e)}}}function Bo(i){let e,l,t,n;var o=at[i[1].repeated_field.dtype];function s(r){return{props:{title:r[1].dtype||void 0}}}return o&&(l=rt(o,s(i))),{c(){e=T("div"),l&&H(l.$$.fragment),t=G("[]"),this.h()},l(r){e=V(r,"DIV",{class:!0});var a=S(e);l&&O(l.$$.fragment,a),t=K(a,"[]"),a.forEach(m),this.h()},h(){D(e,"class","flex")},m(r,a){N(r,e,a),l&&R(l,e,null),v(e,t),n=!0},p(r,a){const f={};if(a[0]&2&&(f.title=r[1].dtype||void 0),a[0]&2&&o!==(o=at[r[1].repeated_field.dtype])){if(l){ie();const u=l;$(u.$$.fragment,1,0,()=>{L(u,1)}),se()}o?(l=rt(o,s(r)),H(l.$$.fragment),p(l.$$.fragment,1),R(l,e,t)):l=null}else o&&l.$set(f)},i(r){n||(l&&p(l.$$.fragment,r),n=!0)},o(r){l&&$(l.$$.fragment,r),n=!1},d(r){r&&m(e),l&&L(l)}}}function Ho(i){let e,l,t;var n=at[i[1].dtype];function o(s){return{props:{title:s[1].dtype}}}return n&&(e=rt(n,o(i))),{c(){e&&H(e.$$.fragment),l=de()},l(s){e&&O(e.$$.fragment,s),l=de()},m(s,r){e&&R(e,s,r),N(s,l,r),t=!0},p(s,r){const a={};if(r[0]&2&&(a.title=s[1].dtype),r[0]&2&&n!==(n=at[s[1].dtype])){if(e){ie();const f=e;$(f.$$.fragment,1,0,()=>{L(f,1)}),se()}n?(e=rt(n,o(s)),H(e.$$.fragment),p(e.$$.fragment,1),R(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(s){t||(e&&p(e.$$.fragment,s),t=!0)},o(s){e&&$(e.$$.fragment,s),t=!1},d(s){s&&m(l),e&&L(e,s)}}}function In(i){let e,l;return e=new Et({props:{interactive:!0,type:"green",$$slots:{default:[Oo]},$$scope:{ctx:i}}}),e.$on("click",i[31]),e.$on("remove",i[32]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&32768|n[1]&262144&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ro(i){let e,l;return e=new Hi({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Lo(i){let e,l;return e=new Bi({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Oo(i){let e,l,t,n,o,s,r,a;const f=[Lo,Ro],u=[];function _(c,d){return c[15]=="ASC"?0:1}return s=_(i),r=u[s]=f[s](i),{c(){e=T("div"),l=T("div"),t=G("Sorted"),n=Y(),o=T("span"),r.c(),this.h()},l(c){e=V(c,"DIV",{class:!0});var d=S(e);l=V(d,"DIV",{class:!0});var h=S(l);t=K(h,"Sorted"),h.forEach(m),n=Q(d),o=V(d,"SPAN",{});var b=S(o);r.l(b),b.forEach(m),d.forEach(m),this.h()},h(){D(l,"class","mr-1"),D(e,"class","flex flex-row")},m(c,d){N(c,e,d),v(e,l),v(l,t),v(e,n),v(e,o),u[s].m(o,null),a=!0},p(c,d){let h=s;s=_(c),s!==h&&(ie(),$(u[h],1,1,()=>{u[h]=null}),se(),r=u[s],r||(r=u[s]=f[s](c),r.c()),p(r,1),r.m(o,null))},i(c){a||(p(r),a=!0)},o(c){$(r),a=!1},d(c){c&&m(e),u[s].d()}}}function Dn(i){let e,l,t=i[7],n=[];for(let s=0;s<t.length;s+=1)n[s]=Tn(yn(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=de()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,r){if(r[0]&129){t=s[7];let a;for(a=0;a<t.length;a+=1){const f=yn(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Tn(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(ie(),a=t.length;a<n.length;a+=1)o(a);se()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){Ae(n,s),s&&m(e)}}}function Tn(i){let e,l;return e=new Li({props:{schema:i[0],filter:i[46],hidePath:!0}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.schema=t[0]),n[0]&128&&(o.filter=t[46]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Vn(i){let e,l;return e=new Oi({props:{search:i[43]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&8192&&(o.search=t[43]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Nn(i){var t;let e,l;return e=new Mi({props:{embedding:(t=i[40].signal)==null?void 0:t.signal_name}}),{c(){H(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){var r;const s={};o[0]&131072&&(s.embedding=(r=n[40].signal)==null?void 0:r.signal_name),e.$set(s)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){$(e.$$.fragment,n),l=!1},d(n){L(e,n)}}}function Mn(i){let e,l,t,n,o,s,r;return l=new Ge({props:{type:"cyan",icon:Vi}}),l.$on("click",i[33]),n=new Eo({props:{isPreview:!0}}),n.$on("click",i[34]),{c(){e=T("div"),H(l.$$.fragment),t=Y(),H(n.$$.fragment),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);O(l.$$.fragment,f),f.forEach(m),t=Q(a),O(n.$$.fragment,a),this.h()},h(){D(e,"class","compute-signal-preview pointer-events-auto")},m(a,f){N(a,e,f),R(l,e,null),N(a,t,f),R(n,a,f),o=!0,s||(r=$e(Se.call(null,e,{text:`Compute signal over the column and save the result.

This may be expensive.`})),s=!0)},p:X,i(a){o||(p(l.$$.fragment,a),p(n.$$.fragment,a),o=!0)},o(a){$(l.$$.fragment,a),$(n.$$.fragment,a),o=!1},d(a){a&&m(e),L(l),a&&m(t),L(n,a),s=!1,r()}}}function Cn(i){let e,l,t,n,o,s,r;return t=new Js({}),{c(){e=T("button"),l=T("div"),H(t.$$.fragment),this.h()},l(a){e=V(a,"BUTTON",{});var f=S(e);l=V(f,"DIV",{class:!0});var u=S(l);O(t.$$.fragment,u),u.forEach(m),f.forEach(m),this.h()},h(){D(l,"class","transition"),oe(l,"rotate-180",i[20]),oe(e,"bg-slate-300",i[20])},m(a,f){N(a,e,f),v(e,l),R(t,l,null),o=!0,s||(r=[$e(n=Se.call(null,e,{text:i[20]?"Close statistics":"See statistics"})),Fe(e,"click",i[35])],s=!0)},p(a,f){(!o||f[0]&1048576)&&oe(l,"rotate-180",a[20]),n&&Pe(n.update)&&f[0]&1048576&&n.update.call(null,{text:a[20]?"Close statistics":"See statistics"}),(!o||f[0]&1048576)&&oe(e,"bg-slate-300",a[20])},i(a){o||(p(t.$$.fragment,a),o=!0)},o(a){$(t.$$.fragment,a),o=!1},d(a){a&&m(e),L(t),s=!1,Qe(r)}}}function zn(i){let e,l,t,n;return l=new Po({props:{field:i[1]}}),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(o){e=V(o,"DIV",{class:!0});var s=S(e);O(l.$$.fragment,s),s.forEach(m),this.h()},h(){D(e,"class","px-2")},m(o,s){N(o,e,s),R(l,e,null),n=!0},p(o,s){const r={};s[0]&2&&(r.field=o[1]),l.$set(r)},i(o){n||(p(l.$$.fragment,o),o&&Nt(()=>{n&&(t||(t=bt(e,$t,{},!0)),t.run(1))}),n=!0)},o(o){$(l.$$.fragment,o),o&&(t||(t=bt(e,$t,{},!1)),t.run(0)),n=!1},d(o){o&&m(e),L(l),o&&t&&t.end()}}}function Fn(i){let e,l,t=i[18],n=[];for(let s=0;s<t.length;s+=1)n[s]=Pn($n(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=de()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,r){if(r[0]&262415){t=s[18];let a;for(a=0;a<t.length;a+=1){const f=$n(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Pn(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(ie(),a=t.length;a<n.length;a+=1)o(a);se()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){Ae(n,s),s&&m(e)}}}function Pn(i){let e,l;return e=new qi({props:{schema:i[0],field:i[37],indent:i[3]+1,sourceField:i[8]&&nt(i[37])?i[1]:i[2]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.schema=t[0]),n[0]&262144&&(o.field=t[37]),n[0]&8&&(o.indent=t[3]+1),n[0]&262406&&(o.sourceField=t[8]&&nt(t[37])?t[1]:t[2]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function qo(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,B,x;const Z=[Ho,Bo,Ao],F=[];function j(q,z){return q[1].dtype?0:q[1].repeated_field&&q[1].repeated_field.dtype?1:2}n=j(i),o=F[n]=Z[n](i);let A=i[16]&&In(i),ee=i[14]&&Dn(i),U=i[13],W=[];for(let q=0;q<U.length;q+=1)W[q]=Vn(Sn(i,U,q));const J=q=>$(W[q],1,1,()=>{W[q]=null});let P=i[17],te=[];for(let q=0;q<P.length;q+=1)te[q]=Nn(En(i,P,q));const ue=q=>$(te[q],1,1,()=>{te[q]=null});let fe=i[4]&&i[21]&&Mn(i),re=i[11]&&Cn(i);g=new wo({props:{field:i[1]}});let ae=i[20]&&zn(i),le=i[18].length&&Fn(i);return{c(){e=T("div"),l=T("div"),t=T("div"),o.c(),r=Y(),a=T("button"),f=G(i[19]),_=Y(),A&&A.c(),c=Y(),ee&&ee.c(),d=Y();for(let q=0;q<W.length;q+=1)W[q].c();h=Y();for(let q=0;q<te.length;q+=1)te[q].c();b=Y(),fe&&fe.c(),w=Y(),re&&re.c(),k=Y(),H(g.$$.fragment),E=Y(),ae&&ae.c(),y=Y(),M=T("div"),le&&le.c(),this.h()},l(q){e=V(q,"DIV",{class:!0});var z=S(e);l=V(z,"DIV",{class:!0});var ne=S(l);t=V(ne,"DIV",{class:!0});var De=S(t);o.l(De),De.forEach(m),r=Q(ne),a=V(ne,"BUTTON",{class:!0});var he=S(a);f=K(he,i[19]),he.forEach(m),_=Q(ne),A&&A.l(ne),c=Q(ne),ee&&ee.l(ne),d=Q(ne);for(let je=0;je<W.length;je+=1)W[je].l(ne);h=Q(ne);for(let je=0;je<te.length;je+=1)te[je].l(ne);b=Q(ne),fe&&fe.l(ne),w=Q(ne),re&&re.l(ne),k=Q(ne),O(g.$$.fragment,ne),ne.forEach(m),E=Q(z),ae&&ae.l(z),y=Q(z),M=V(z,"DIV",{});var Ne=S(M);le&&le.l(Ne),Ne.forEach(m),z.forEach(m),this.h()},h(){D(t,"class","rounded-md bg-blue-200 p-0.5"),oe(t,"bg-blue-200",i[5]),ft(t,"margin-left",i[3]*1.5+"rem"),D(a,"class","ml-2 grow cursor-pointer truncate whitespace-nowrap text-left text-gray-900"),a.disabled=u=!i[11],oe(a,"cursor-default",!i[11]),D(l,"class","flex w-full flex-row items-center gap-x-2 border-gray-300 px-4 hover:bg-gray-100"),oe(l,"bg-blue-50",i[5]),oe(l,"bg-emerald-100",i[4]),oe(l,"bg-teal-100",i[9]),oe(l,"hover:bg-blue-100",i[5]),D(e,"class","border-gray-300"),oe(e,"border-b",i[8])},m(q,z){N(q,e,z),v(e,l),v(l,t),F[n].m(t,null),v(l,r),v(l,a),v(a,f),v(l,_),A&&A.m(l,null),v(l,c),ee&&ee.m(l,null),v(l,d);for(let ne=0;ne<W.length;ne+=1)W[ne]&&W[ne].m(l,null);v(l,h);for(let ne=0;ne<te.length;ne+=1)te[ne]&&te[ne].m(l,null);v(l,b),fe&&fe.m(l,null),v(l,w),re&&re.m(l,null),v(l,k),R(g,l,null),v(e,E),ae&&ae.m(e,null),v(e,y),v(e,M),le&&le.m(M,null),I=!0,B||(x=[$e(s=Se.call(null,t,{text:i[12]})),Fe(a,"click",i[30])],B=!0)},p(q,z){let ne=n;if(n=j(q),n===ne?F[n].p(q,z):(ie(),$(F[ne],1,1,()=>{F[ne]=null}),se(),o=F[n],o?o.p(q,z):(o=F[n]=Z[n](q),o.c()),p(o,1),o.m(t,null)),s&&Pe(s.update)&&z[0]&4096&&s.update.call(null,{text:q[12]}),(!I||z[0]&32)&&oe(t,"bg-blue-200",q[5]),z[0]&8&&ft(t,"margin-left",q[3]*1.5+"rem"),(!I||z[0]&524288)&&ce(f,q[19]),(!I||z[0]&2048&&u!==(u=!q[11]))&&(a.disabled=u),(!I||z[0]&2048)&&oe(a,"cursor-default",!q[11]),q[16]?A?(A.p(q,z),z[0]&65536&&p(A,1)):(A=In(q),A.c(),p(A,1),A.m(l,c)):A&&(ie(),$(A,1,1,()=>{A=null}),se()),q[14]?ee?(ee.p(q,z),z[0]&16384&&p(ee,1)):(ee=Dn(q),ee.c(),p(ee,1),ee.m(l,d)):ee&&(ie(),$(ee,1,1,()=>{ee=null}),se()),z[0]&8192){U=q[13];let he;for(he=0;he<U.length;he+=1){const Ne=Sn(q,U,he);W[he]?(W[he].p(Ne,z),p(W[he],1)):(W[he]=Vn(Ne),W[he].c(),p(W[he],1),W[he].m(l,h))}for(ie(),he=U.length;he<W.length;he+=1)J(he);se()}if(z[0]&131072){P=q[17];let he;for(he=0;he<P.length;he+=1){const Ne=En(q,P,he);te[he]?(te[he].p(Ne,z),p(te[he],1)):(te[he]=Nn(Ne),te[he].c(),p(te[he],1),te[he].m(l,b))}for(ie(),he=P.length;he<te.length;he+=1)ue(he);se()}q[4]&&q[21]?fe?(fe.p(q,z),z[0]&2097168&&p(fe,1)):(fe=Mn(q),fe.c(),p(fe,1),fe.m(l,w)):fe&&(ie(),$(fe,1,1,()=>{fe=null}),se()),q[11]?re?(re.p(q,z),z[0]&2048&&p(re,1)):(re=Cn(q),re.c(),p(re,1),re.m(l,k)):re&&(ie(),$(re,1,1,()=>{re=null}),se());const De={};z[0]&2&&(De.field=q[1]),g.$set(De),(!I||z[0]&32)&&oe(l,"bg-blue-50",q[5]),(!I||z[0]&16)&&oe(l,"bg-emerald-100",q[4]),(!I||z[0]&512)&&oe(l,"bg-teal-100",q[9]),(!I||z[0]&32)&&oe(l,"hover:bg-blue-100",q[5]),q[20]?ae?(ae.p(q,z),z[0]&1048576&&p(ae,1)):(ae=zn(q),ae.c(),p(ae,1),ae.m(e,y)):ae&&(ie(),$(ae,1,1,()=>{ae=null}),se()),q[18].length?le?(le.p(q,z),z[0]&262144&&p(le,1)):(le=Fn(q),le.c(),p(le,1),le.m(M,null)):le&&(ie(),$(le,1,1,()=>{le=null}),se()),(!I||z[0]&256)&&oe(e,"border-b",q[8])},i(q){if(!I){p(o),p(A),p(ee);for(let z=0;z<U.length;z+=1)p(W[z]);for(let z=0;z<P.length;z+=1)p(te[z]);p(fe),p(re),p(g.$$.fragment,q),p(ae),p(le),q&&Nt(()=>{I&&(C||(C=bt(M,$t,{},!0)),C.run(1))}),I=!0}},o(q){$(o),$(A),$(ee),W=W.filter(Boolean);for(let z=0;z<W.length;z+=1)$(W[z]);te=te.filter(Boolean);for(let z=0;z<te.length;z+=1)$(te[z]);$(fe),$(re),$(g.$$.fragment,q),$(ae),$(le),q&&(C||(C=bt(M,$t,{},!1)),C.run(0)),I=!1},d(q){q&&m(e),F[n].d(),A&&A.d(),ee&&ee.d(),Ae(W,q),Ae(te,q),fe&&fe.d(),re&&re.d(),L(g),ae&&ae.d(),le&&le.d(),q&&C&&C.end(),B=!1,Qe(x)}}}function jo(i,e,l){let t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,B,x,{schema:Z}=e,{field:F}=e,{sourceField:j=void 0}=e,{indent:A=0}=e;const ee=vi();be(i,ee,le=>l(22,x=le));const U=qe();be(i,U,le=>l(10,I=le));const W=Ze();be(i,W,le=>l(29,B=le));function J(le){return le!=null&&le.repeated_field?J(le.repeated_field):le!=null&&le.fields?[...Object.values(le.fields).filter(q=>q.path.at(-1)!==ys)].filter(q=>{var z,ne,De,he;return!(q.dtype==="embedding"||q.signal!=null&&lt(q).some(Ne=>Ne.dtype==="embedding")||((z=q.signal)==null?void 0:z.signal_name)==="sentences"||((ne=q.signal)==null?void 0:ne.signal_name)==="substring_search"||((De=q.signal)==null?void 0:De.signal_name)==="semantic_similarity"||((he=q.signal)==null?void 0:he.signal_name)==="concept_labels")}):[]}const P=()=>{C&&(a?U.removeExpandedColumn(r):U.addExpandedColumn(r))},te=()=>h==="ASC"?yt(U,I.query.sort_order="DESC",I):yt(U,I.query.sort_order="ASC",I),ue=()=>U.removeSortBy(r),fe=()=>F.signal&&k&&j&&x.mutate([I.namespace,I.datasetName,{leaf_path:j.path,signal:F.signal}]),re=()=>{var le;return F.signal&&k&&Xe({command:xe.EditPreviewConcept,namespace:I.namespace,datasetName:I.datasetName,path:j==null?void 0:j.path,signalName:(le=F.signal)==null?void 0:le.signal_name,value:F.signal})},ae=()=>{a?U.removeExpandedColumn(r):U.addExpandedColumn(r)};return i.$$set=le=>{"schema"in le&&l(0,Z=le.schema),"field"in le&&l(1,F=le.field),"sourceField"in le&&l(2,j=le.sourceField),"indent"in le&&l(3,A=le.indent)},i.$$.update=()=>{var le,q,z;i.$$.dirty[0]&2&&l(5,t=nt(F)),i.$$.dirty[0]&2&&l(21,n=Ht(F)),i.$$.dirty[0]&2&&l(9,o=Rt(F)),i.$$.dirty[0]&544&&l(8,s=!t&&!o),i.$$.dirty[0]&2&&l(6,r=F.path),i.$$.dirty[0]&1088&&l(20,a=I.expandedStats[Be(r)]||!1),i.$$.dirty[0]&64&&l(28,f=r.at(-1)===kt),i.$$.dirty[0]&268435520&&l(19,u=f?r.at(-2):r.at(-1)),i.$$.dirty[0]&2&&l(18,_=J(F)),i.$$.dirty[0]&258&&l(17,c=s?lt(F).filter(ne=>ne.signal!=null&&lt(ne).some(De=>De.dtype==="embedding")):[]),i.$$.dirty[0]&1088&&l(16,d=(le=I.query.sort_by)==null?void 0:le.some(ne=>et(ne,r))),i.$$.dirty[0]&1024&&l(15,h=I.query.sort_order),i.$$.dirty[0]&1088&&l(7,b=((q=I.query.filters)==null?void 0:q.filter(ne=>et(ne.path,r)))||[]),i.$$.dirty[0]&128&&l(14,w=b.length>0),i.$$.dirty[0]&536870976&&l(4,k=Ei(((z=B.selectRowsSchema)==null?void 0:z.data)||null,r)),i.$$.dirty[0]&1088&&l(13,g=Ft(I,r)),i.$$.dirty[0]&32&&l(26,E=t?". Generated by a signal":""),i.$$.dirty[0]&2&&l(27,y=F.dtype??(F.repeated_field&&F.repeated_field.dtype?`${F.repeated_field.dtype}[]`:"object")),i.$$.dirty[0]&201326592&&l(12,M=`${y}${E}`),i.$$.dirty[0]&18&&l(11,C=wt(F)&&!k)},[Z,F,j,A,k,t,r,b,s,o,I,C,M,g,w,h,d,c,_,u,a,n,x,ee,U,W,E,y,f,B,P,te,ue,fe,re,ae]}class qi extends we{constructor(e){super(),ke(this,e,jo,qo,ve,{schema:0,field:1,sourceField:2,indent:3},null,[-1,-1])}}function An(i,e,l){const t=i.slice();return t[3]=e[l],t}function Uo(i){let e=[],l=new Map,t,n,o=Object.keys(i[0].data.schema.fields);const s=r=>r[3];for(let r=0;r<o.length;r+=1){let a=An(i,o,r),f=s(a);l.set(f,e[r]=Bn(f,a))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=de()},l(r){for(let a=0;a<e.length;a+=1)e[a].l(r);t=de()},m(r,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,a);N(r,t,a),n=!0},p(r,a){a&1&&(o=Object.keys(r[0].data.schema.fields),ie(),e=Tt(e,a,s,1,r,o,l,t.parentNode,Vt,Bn,t,An),se())},i(r){if(!n){for(let a=0;a<o.length;a+=1)p(e[a]);n=!0}},o(r){for(let a=0;a<e.length;a+=1)$(e[a]);n=!1},d(r){for(let a=0;a<e.length;a+=1)e[a].d(r);r&&m(t)}}}function Yo(i){let e,l;return e=new Le({props:{paragraph:!0,lines:3}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Bn(i,e){let l,t,n;return t=new qi({props:{schema:e[0].data.schema,field:e[0].data.schema.fields[e[3]]}}),{key:i,first:null,c(){l=de(),H(t.$$.fragment),this.h()},l(o){l=de(),O(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,s){N(o,l,s),R(t,o,s),n=!0},p(o,s){e=o;const r={};s&1&&(r.schema=e[0].data.schema),s&1&&(r.field=e[0].data.schema.fields[e[3]]),t.$set(r)},i(o){n||(p(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){o&&m(l),L(t,o)}}}function Qo(i){let e,l,t,n;const o=[Yo,Uo],s=[];function r(a,f){var u,_;return(u=a[0])!=null&&u.isLoading?0:(_=a[0])!=null&&_.isSuccess&&a[0].data.schema.fields!=null?1:-1}return~(l=r(i))&&(t=s[l]=o[l](i)),{c(){e=T("div"),t&&t.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);t&&t.l(f),f.forEach(m),this.h()},h(){D(e,"class","schema flex h-full flex-col overflow-y-auto")},m(a,f){N(a,e,f),~l&&s[l].m(e,null),n=!0},p(a,[f]){let u=l;l=r(a),l===u?~l&&s[l].p(a,f):(t&&(ie(),$(s[u],1,1,()=>{s[u]=null}),se()),~l?(t=s[l],t?t.p(a,f):(t=s[l]=o[l](a),t.c()),p(t,1),t.m(e,null)):t=null)},i(a){n||(p(t),n=!0)},o(a){$(t),n=!1},d(a){a&&m(e),~l&&s[l].d()}}}function Wo(i,e,l){let t,n;const o=Ze();return be(i,o,s=>l(2,n=s)),i.$$.update=()=>{i.$$.dirty&4&&l(0,t=n.selectRowsSchema)},[t,o,n]}class Zo extends we{constructor(e){super(),ke(this,e,Wo,Qo,ve,{})}}function Hn(i,e,l){const t=i.slice();t[5]=e[l];const n=nt(t[5]);t[6]=n;const o=Rt(t[5]);return t[7]=o,t}function Go(i){let e,l="{}",t;return{c(){e=T("span"),t=G(l),this.h()},l(n){e=V(n,"SPAN",{class:!0});var o=S(e);t=K(o,l),o.forEach(m),this.h()},h(){D(e,"class","font-mono")},m(n,o){N(n,e,o),v(e,t)},p:X,i:X,o:X,d(n){n&&m(e)}}}function Ko(i){let e,l,t;var n=at[i[5].dtype];function o(s){return{props:{title:s[5].dtype}}}return n&&(e=rt(n,o(i))),{c(){e&&H(e.$$.fragment),l=de()},l(s){e&&O(e.$$.fragment,s),l=de()},m(s,r){e&&R(e,s,r),N(s,l,r),t=!0},p(s,r){const a={};if(r&2&&(a.title=s[5].dtype),r&2&&n!==(n=at[s[5].dtype])){if(e){ie();const f=e;$(f.$$.fragment,1,0,()=>{L(f,1)}),se()}n?(e=rt(n,o(s)),H(e.$$.fragment),p(e.$$.fragment,1),R(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(s){t||(e&&p(e.$$.fragment,s),t=!0)},o(s){e&&$(e.$$.fragment,s),t=!1},d(s){s&&m(l),e&&L(e,s)}}}function Rn(i){let e;return{c(){e=G("[]")},l(l){e=K(l,"[]")},m(l,t){N(l,e,t)},d(l){l&&m(e)}}}function Ln(i){let e,l,t,n,o,s,r,a,f,u=i[5].path.indexOf(kt)>=0,_,c,d=Be(i[5].path)+"",h,b,w;function k(...I){return i[3](i[5],...I)}function g(...I){return i[4](i[5],...I)}t=new Is({props:{labelText:"Download",hideLabel:!0,checked:i[0].find(k)!=null}}),t.$on("change",g);const E=[Ko,Go],y=[];function M(I,B){return I[5].dtype?0:1}r=M(i),a=y[r]=E[r](i);let C=u&&Rn();return{c(){e=T("div"),l=T("div"),H(t.$$.fragment),n=Y(),o=T("div"),s=T("div"),a.c(),f=Y(),C&&C.c(),_=Y(),c=T("div"),h=G(d),b=Y(),this.h()},l(I){e=V(I,"DIV",{class:!0});var B=S(e);l=V(B,"DIV",{class:!0});var x=S(l);O(t.$$.fragment,x),x.forEach(m),n=Q(B),o=V(B,"DIV",{class:!0});var Z=S(o);s=V(Z,"DIV",{class:!0});var F=S(s);a.l(F),f=Q(F),C&&C.l(F),F.forEach(m),Z.forEach(m),_=Q(B),c=V(B,"DIV",{class:!0});var j=S(c);h=K(j,d),j.forEach(m),b=Q(B),B.forEach(m),this.h()},h(){D(l,"class","mr-2"),D(s,"class","inline-flex items-center rounded-md p-0.5"),oe(s,"bg-blue-200",i[6]),oe(s,"bg-teal-100",i[7]),D(o,"class","flex w-10"),D(c,"class","flex-grow"),D(e,"class","flex items-center")},m(I,B){N(I,e,B),v(e,l),R(t,l,null),v(e,n),v(e,o),v(o,s),y[r].m(s,null),v(s,f),C&&C.m(s,null),v(e,_),v(e,c),v(c,h),v(e,b),w=!0},p(I,B){i=I;const x={};B&3&&(x.checked=i[0].find(k)!=null),t.$set(x);let Z=r;r=M(i),r===Z?y[r].p(i,B):(ie(),$(y[Z],1,1,()=>{y[Z]=null}),se(),a=y[r],a?a.p(i,B):(a=y[r]=E[r](i),a.c()),p(a,1),a.m(s,f)),B&2&&(u=i[5].path.indexOf(kt)>=0),u?C||(C=Rn(),C.c(),C.m(s,null)):C&&(C.d(1),C=null),(!w||B&2)&&oe(s,"bg-blue-200",i[6]),(!w||B&2)&&oe(s,"bg-teal-100",i[7]),(!w||B&2)&&d!==(d=Be(i[5].path)+"")&&ce(h,d)},i(I){w||(p(t.$$.fragment,I),p(a),w=!0)},o(I){$(t.$$.fragment,I),$(a),w=!1},d(I){I&&m(e),L(t),y[r].d(),C&&C.d()}}}function Jo(i){let e,l,t=i[1],n=[];for(let s=0;s<t.length;s+=1)n[s]=Ln(Hn(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},l(s){for(let r=0;r<n.length;r+=1)n[r].l(s);e=de()},m(s,r){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(s,r);N(s,e,r),l=!0},p(s,[r]){if(r&7){t=s[1];let a;for(a=0;a<t.length;a+=1){const f=Hn(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Ln(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(ie(),a=t.length;a<n.length;a+=1)o(a);se()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){Ae(n,s),s&&m(e)}}}function Xo(i,e,l){let{fields:t}=e,{checkedFields:n}=e;function o(a,f){f.target.checked?(n.push(a),l(0,n)):l(0,n=n.filter(_=>!et(_.path,a.path)))}const s=(a,f)=>et(f.path,a.path),r=(a,f)=>o(a,f);return i.$$set=a=>{"fields"in a&&l(1,t=a.fields),"checkedFields"in a&&l(0,n=a.checkedFields)},[n,t,o,s,r]}class ht extends we{constructor(e){super(),ke(this,e,Xo,Jo,ve,{fields:1,checkedFields:0})}}function On(i,e,l){const t=i.slice();return t[29]=e[l],t}function xo(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,B,x,Z,F,j;function A(U){i[23](U)}let ee={invalid:i[8]!=i[9]};return i[8]!==void 0&&(ee.value=i[8]),E=new Ms({props:ee}),He.push(()=>Ue(E,"value",A)),B=new Zs({}),{c(){e=T("div"),l=T("section"),t=T("div"),n=G("Delete this dataset"),o=Y(),s=T("div"),r=T("p"),a=G("This action cannot be undone."),f=Y(),u=T("p"),_=G(`This will permanently delete the
                  `),c=T("span"),d=G(i[9]),h=G(` dataset and all its files. Please type
                  `),b=T("span"),w=G(i[9]),k=G(" to confirm."),g=Y(),H(E.$$.fragment),M=Y(),C=T("button"),I=G(`I understand, delete this dataset
                `),H(B.$$.fragment),this.h()},l(U){e=V(U,"DIV",{class:!0});var W=S(e);l=V(W,"SECTION",{class:!0});var J=S(l);t=V(J,"DIV",{class:!0});var P=S(t);n=K(P,"Delete this dataset"),P.forEach(m),o=Q(J),s=V(J,"DIV",{class:!0});var te=S(s);r=V(te,"P",{class:!0});var ue=S(r);a=K(ue,"This action cannot be undone."),ue.forEach(m),f=Q(te),u=V(te,"P",{});var fe=S(u);_=K(fe,`This will permanently delete the
                  `),c=V(fe,"SPAN",{class:!0});var re=S(c);d=K(re,i[9]),re.forEach(m),h=K(fe,` dataset and all its files. Please type
                  `),b=V(fe,"SPAN",{class:!0});var ae=S(b);w=K(ae,i[9]),ae.forEach(m),k=K(fe," to confirm."),fe.forEach(m),te.forEach(m),g=Q(J),O(E.$$.fragment,J),M=Q(J),C=V(J,"BUTTON",{class:!0});var le=S(C);I=K(le,`I understand, delete this dataset
                `),O(B.$$.fragment,le),le.forEach(m),J.forEach(m),W.forEach(m),this.h()},h(){D(t,"class","text-lg text-gray-700"),D(r,"class","mb-2"),D(c,"class","font-bold"),D(b,"class","font-bold"),D(s,"class","mb-4 text-sm text-gray-500"),D(C,"class","mt-2 flex cursor-pointer flex-row justify-between p-4 text-left outline-red-400 hover:bg-gray-200"),C.disabled=x=i[8]!=i[9],oe(C,"cursor-not-allowed",i[8]!=i[9]),oe(C,"outline",i[8]==i[9]),oe(C,"opacity-50",i[8]!=i[9]),D(l,"class","flex flex-col gap-y-1"),D(e,"class","flex flex-col gap-y-6")},m(U,W){N(U,e,W),v(e,l),v(l,t),v(t,n),v(l,o),v(l,s),v(s,r),v(r,a),v(s,f),v(s,u),v(u,_),v(u,c),v(c,d),v(u,h),v(u,b),v(b,w),v(u,k),v(l,g),R(E,l,null),v(l,M),v(l,C),v(C,I),R(B,C,null),Z=!0,F||(j=Fe(C,"click",i[24]),F=!0)},p(U,W){(!Z||W[0]&512)&&ce(d,U[9]),(!Z||W[0]&512)&&ce(w,U[9]);const J={};W[0]&768&&(J.invalid=U[8]!=U[9]),!y&&W[0]&256&&(y=!0,J.value=U[8],Ye(()=>y=!1)),E.$set(J),(!Z||W[0]&768&&x!==(x=U[8]!=U[9]))&&(C.disabled=x),(!Z||W[0]&768)&&oe(C,"cursor-not-allowed",U[8]!=U[9]),(!Z||W[0]&768)&&oe(C,"outline",U[8]==U[9]),(!Z||W[0]&768)&&oe(C,"opacity-50",U[8]!=U[9])},i(U){Z||(p(E.$$.fragment,U),p(B.$$.fragment,U),Z=!0)},o(U){$(E.$$.fragment,U),$(B.$$.fragment,U),Z=!1},d(U){U&&m(e),L(E),L(B),F=!1,j()}}}function ef(i){let e,l,t,n;const o=[lf,tf],s=[];function r(a,f){return a[6].isFetching?0:1}return e=r(i),l=s[e]=o[e](i),{c(){l.c(),t=de()},l(a){l.l(a),t=de()},m(a,f){s[e].m(a,f),N(a,t,f),n=!0},p(a,f){let u=e;e=r(a),e===u?s[e].p(a,f):(ie(),$(s[u],1,1,()=>{s[u]=null}),se(),l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){s[e].d(a),a&&m(t)}}}function tf(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y,M,C,I,B,x,Z,F,j,A;const ee=[sf,nf],U=[];function W(ae,le){return ae[3]!=null?0:1}f=W(i),u=U[f]=ee[f](i);const J=[af,rf],P=[];function te(ae,le){return ae[11].isFetching?0:1}y=te(i),M=P[y]=J[y](i);const ue=[uf,ff],fe=[];function re(ae,le){return ae[3]!=null&&ae[4]!=null?0:1}return F=re(i),j=fe[F]=ue[F](i),{c(){e=T("div"),l=T("section"),t=T("div"),n=G("Media fields"),o=Y(),s=T("div"),r=G("These fields will be presented differently from the rest of the metadata fields."),a=Y(),u.c(),_=Y(),c=T("section"),d=T("div"),h=G("Preferred embedding"),b=Y(),w=T("div"),k=G("This embedding will be used by default when indexing and querying the data."),g=Y(),E=T("div"),M.c(),C=Y(),I=T("section"),B=T("div"),x=G("Render as markdown"),Z=Y(),j.c(),this.h()},l(ae){e=V(ae,"DIV",{class:!0});var le=S(e);l=V(le,"SECTION",{class:!0});var q=S(l);t=V(q,"DIV",{class:!0});var z=S(t);n=K(z,"Media fields"),z.forEach(m),o=Q(q),s=V(q,"DIV",{class:!0});var ne=S(s);r=K(ne,"These fields will be presented differently from the rest of the metadata fields."),ne.forEach(m),a=Q(q),u.l(q),q.forEach(m),_=Q(le),c=V(le,"SECTION",{class:!0});var De=S(c);d=V(De,"DIV",{class:!0});var he=S(d);h=K(he,"Preferred embedding"),he.forEach(m),b=Q(De),w=V(De,"DIV",{class:!0});var Ne=S(w);k=K(Ne,"This embedding will be used by default when indexing and querying the data."),Ne.forEach(m),g=Q(De),E=V(De,"DIV",{class:!0});var je=S(E);M.l(je),je.forEach(m),De.forEach(m),C=Q(le),I=V(le,"SECTION",{class:!0});var st=S(I);B=V(st,"DIV",{class:!0});var _t=S(B);x=K(_t,"Render as markdown"),_t.forEach(m),Z=Q(st),j.l(st),st.forEach(m),le.forEach(m),this.h()},h(){D(t,"class","text-lg text-gray-700"),D(s,"class","text-sm text-gray-500"),D(l,"class","flex flex-col gap-y-1"),D(d,"class","text-lg text-gray-700"),D(w,"class","text-sm text-gray-500"),D(E,"class","w-60"),D(c,"class","flex flex-col gap-y-1"),D(B,"class","text-lg text-gray-700"),D(I,"class","flex flex-col gap-y-1"),D(e,"class","flex flex-col gap-y-6")},m(ae,le){N(ae,e,le),v(e,l),v(l,t),v(t,n),v(l,o),v(l,s),v(s,r),v(l,a),U[f].m(l,null),v(e,_),v(e,c),v(c,d),v(d,h),v(c,b),v(c,w),v(w,k),v(c,g),v(c,E),P[y].m(E,null),v(e,C),v(e,I),v(I,B),v(B,x),v(I,Z),fe[F].m(I,null),A=!0},p(ae,le){let q=f;f=W(ae),f===q?U[f].p(ae,le):(ie(),$(U[q],1,1,()=>{U[q]=null}),se(),u=U[f],u?u.p(ae,le):(u=U[f]=ee[f](ae),u.c()),p(u,1),u.m(l,null));let z=y;y=te(ae),y===z?P[y].p(ae,le):(ie(),$(P[z],1,1,()=>{P[z]=null}),se(),M=P[y],M?M.p(ae,le):(M=P[y]=J[y](ae),M.c()),p(M,1),M.m(E,null));let ne=F;F=re(ae),F===ne?fe[F].p(ae,le):(ie(),$(fe[ne],1,1,()=>{fe[ne]=null}),se(),j=fe[F],j?j.p(ae,le):(j=fe[F]=ue[F](ae),j.c()),p(j,1),j.m(I,null))},i(ae){A||(p(u),p(M),p(j),A=!0)},o(ae){$(u),$(M),$(j),A=!1},d(ae){ae&&m(e),U[f].d(),P[y].d(),fe[F].d()}}}function lf(i){let e,l;return e=new Le({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function nf(i){let e,l;return e=new Ut({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function sf(i){let e,l,t;function n(s){i[21](s)}let o={fields:i[5]};return i[3]!==void 0&&(o.checkedFields=i[3]),e=new ht({props:o}),He.push(()=>Ue(e,"checkedFields",n)),{c(){H(e.$$.fragment)},l(s){O(e.$$.fragment,s)},m(s,r){R(e,s,r),t=!0},p(s,r){const a={};r[0]&32&&(a.fields=s[5]),!l&&r[0]&8&&(l=!0,a.checkedFields=s[3],Ye(()=>l=!1)),e.$set(a)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){L(e,s)}}}function rf(i){var t;let e,l;return e=new mi({props:{selected:((t=i[6].data)==null?void 0:t.preferred_embedding)||void 0,$$slots:{default:[of]},$$scope:{ctx:i}}}),e.$on("change",i[16]),{c(){H(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){var r;const s={};o[0]&64&&(s.selected=((r=n[6].data)==null?void 0:r.preferred_embedding)||void 0),o[0]&2048|o[1]&2&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){$(e.$$.fragment,n),l=!1},d(n){L(e,n)}}}function af(i){let e,l;return e=new Ut({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function qn(i){let e,l;return e=new At({props:{value:i[29].name}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&2048&&(o.value=t[29].name),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function of(i){let e,l,t,n;e=new At({props:{value:void 0,text:"None"}});let o=i[11].data||[],s=[];for(let a=0;a<o.length;a+=1)s[a]=qn(On(i,o,a));const r=a=>$(s[a],1,1,()=>{s[a]=null});return{c(){H(e.$$.fragment),l=Y();for(let a=0;a<s.length;a+=1)s[a].c();t=de()},l(a){O(e.$$.fragment,a),l=Q(a);for(let f=0;f<s.length;f+=1)s[f].l(a);t=de()},m(a,f){R(e,a,f),N(a,l,f);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,f);N(a,t,f),n=!0},p(a,f){if(f[0]&2048){o=a[11].data||[];let u;for(u=0;u<o.length;u+=1){const _=On(a,o,u);s[u]?(s[u].p(_,f),p(s[u],1)):(s[u]=qn(_),s[u].c(),p(s[u],1),s[u].m(t.parentNode,t))}for(ie(),u=o.length;u<s.length;u+=1)r(u);se()}},i(a){if(!n){p(e.$$.fragment,a);for(let f=0;f<o.length;f+=1)p(s[f]);n=!0}},o(a){$(e.$$.fragment,a),s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)$(s[f]);n=!1},d(a){L(e,a),a&&m(l),Ae(s,a),a&&m(t)}}}function ff(i){let e,l;return e=new Ut({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function uf(i){let e,l,t;function n(s){i[22](s)}let o={fields:i[3]};return i[4]!==void 0&&(o.checkedFields=i[4]),e=new ht({props:o}),He.push(()=>Ue(e,"checkedFields",n)),{c(){H(e.$$.fragment)},l(s){O(e.$$.fragment,s)},m(s,r){R(e,s,r),t=!0},p(s,r){const a={};r[0]&8&&(a.fields=s[3]),!l&&r[0]&16&&(l=!0,a.checkedFields=s[4],Ye(()=>l=!1)),e.$set(a)},i(s){t||(p(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){L(e,s)}}}function cf(i){let e,l,t,n,o,s,r,a;t=new Ns({props:{items:[{title:"Fields",value:"fields"},{title:"Administration",value:"administration"}],item:i[7]}}),t.$on("select",i[20]);const f=[ef,xo],u=[];function _(c,d){return c[7]==="fields"?0:c[7]==="administration"?1:-1}return~(s=_(i))&&(r=u[s]=f[s](i)),{c(){e=T("div"),l=T("div"),H(t.$$.fragment),n=Y(),o=T("div"),r&&r.c(),this.h()},l(c){e=V(c,"DIV",{class:!0});var d=S(e);l=V(d,"DIV",{class:!0});var h=S(l);O(t.$$.fragment,h),h.forEach(m),n=Q(d),o=V(d,"DIV",{class:!0});var b=S(o);r&&r.l(b),b.forEach(m),d.forEach(m),this.h()},h(){D(l,"class","-ml-4 mr-4 w-96 grow-0"),D(o,"class","flex w-full flex-col gap-y-6 rounded border border-gray-300 bg-white p-4"),D(e,"class","flex flex-row")},m(c,d){N(c,e,d),v(e,l),R(t,l,null),v(e,n),v(e,o),~s&&u[s].m(o,null),a=!0},p(c,d){const h={};d[0]&128&&(h.item=c[7]),t.$set(h);let b=s;s=_(c),s===b?~s&&u[s].p(c,d):(r&&(ie(),$(u[b],1,1,()=>{u[b]=null}),se()),~s?(r=u[s],r?r.p(c,d):(r=u[s]=f[s](c),r.c()),p(r,1),r.m(o,null)):r=null)},i(c){a||(p(t.$$.fragment,c),p(r),a=!0)},o(c){$(t.$$.fragment,c),$(r),a=!1},d(c){c&&m(e),L(t),~s&&u[s].d()}}}function df(i){let e,l,t,n,o,s;return e=new Ot({props:{label:"Changes",title:"Dataset settings"}}),t=new qt({props:{hasForm:!0,$$slots:{default:[cf]},$$scope:{ctx:i}}}),o=new jt({props:{danger:i[7]==="administration",primaryButtonText:"Save",secondaryButtonText:"Cancel",primaryButtonDisabled:i[7]==="administration"}}),o.$on("click:button--secondary",close),{c(){H(e.$$.fragment),l=Y(),H(t.$$.fragment),n=Y(),H(o.$$.fragment)},l(r){O(e.$$.fragment,r),l=Q(r),O(t.$$.fragment,r),n=Q(r),O(o.$$.fragment,r)},m(r,a){R(e,r,a),N(r,l,a),R(t,r,a),N(r,n,a),R(o,r,a),s=!0},p(r,a){const f={};a[0]&7166|a[1]&2&&(f.$$scope={dirty:a,ctx:r}),t.$set(f);const u={};a[0]&128&&(u.danger=r[7]==="administration"),a[0]&128&&(u.primaryButtonDisabled=r[7]==="administration"),o.$set(u)},i(r){s||(p(e.$$.fragment,r),p(t.$$.fragment,r),p(o.$$.fragment,r),s=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),$(o.$$.fragment,r),s=!1},d(r){L(e,r),r&&m(l),L(t,r),r&&m(n),L(o,r)}}}function mf(i){let e,l;return e=new Lt({props:{open:i[0],$$slots:{default:[df]},$$scope:{ctx:i}}}),e.$on("submit",i[17]),e.$on("close",i[25]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.open=t[0]),n[0]&7166|n[1]&2&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function hf(i,e,l){let t,n,o,s,r,a=X,f=()=>(a(),a=Te(t,P=>l(6,r=P)),t),u,_,c;i.$$.on_destroy.push(()=>a());let{namespace:d}=e,{name:h}=e,{open:b=!1}=e,{schema:w}=e;const k=Qt();be(i,k,P=>l(28,u=P));const g=wi();be(i,g,P=>l(11,_=P));const E=Ds();be(i,E,P=>l(27,s=P));let y="fields",M=null,C=null,I=u.embedding;function B(P){I=P.target.value,I===""&&(I=void 0)}function x(){if(M==null)return;const P={ui:{media_paths:M.map(te=>te.path),markdown_paths:C==null?void 0:C.map(te=>te.path)},preferred_embedding:I};s.mutate([d,h,P],{onSuccess:()=>{l(0,b=!1)}})}let Z="";const F=Ts();be(i,F,P=>l(12,c=P));const j=P=>l(7,y=P.detail);function A(P){M=P,l(3,M),l(6,r),l(5,o),l(19,w)}function ee(P){C=P,l(4,C),l(6,r),l(5,o),l(19,w)}function U(P){Z=P,l(8,Z)}const W=()=>c.mutate([d,h],{onSuccess:()=>Mt("/")}),J=()=>l(0,b=!1);return i.$$set=P=>{"namespace"in P&&l(1,d=P.namespace),"name"in P&&l(2,h=P.name),"open"in P&&l(0,b=P.open),"schema"in P&&l(19,w=P.schema)},i.$$.update=()=>{var P,te,ue,fe;if(i.$$.dirty[0]&6&&f(l(10,t=ot(d,h))),i.$$.dirty[0]&6&&l(9,n=Vs(d,h)),i.$$.dirty[0]&524288&&l(5,o=Pt(w).filter(re=>re.dtype==="string"&&!et(re.path,[It])&&!nt(re))),i.$$.dirty[0]&104&&M==null){const re=(((te=(P=r.data)==null?void 0:P.ui)==null?void 0:te.media_paths)||[]).map(ae=>Array.isArray(ae)?ae:[ae]);l(3,M=o.filter(ae=>re.some(le=>et(ae.path,le))))}if(i.$$.dirty[0]&112&&C==null){const re=(((fe=(ue=r.data)==null?void 0:ue.ui)==null?void 0:fe.markdown_paths)||[]).map(ae=>Array.isArray(ae)?ae:[ae]);l(4,C=o.filter(ae=>re.some(le=>et(ae.path,le))))}},[b,d,h,M,C,o,r,y,Z,n,t,_,c,k,g,E,B,x,F,w,j,A,ee,U,W,J]}class _f extends we{constructor(e){super(),ke(this,e,hf,mf,ve,{namespace:1,name:2,open:0,schema:19},null,[-1,-1])}}function jn(i){let e,l,t,n,o,s,r;function a(u){i[16](u)}let f={fields:i[6]};return i[2]!==void 0&&(f.checkedFields=i[2]),o=new ht({props:f}),He.push(()=>Ue(o,"checkedFields",a)),{c(){e=T("section"),l=T("h4"),t=G("Label fields"),n=Y(),H(o.$$.fragment),this.h()},l(u){e=V(u,"SECTION",{});var _=S(e);l=V(_,"H4",{class:!0});var c=S(l);t=K(c,"Label fields"),c.forEach(m),n=Q(_),O(o.$$.fragment,_),_.forEach(m),this.h()},h(){D(l,"class","svelte-1ge817j")},m(u,_){N(u,e,_),v(e,l),v(l,t),v(e,n),R(o,e,null),r=!0},p(u,_){const c={};_&64&&(c.fields=u[6]),!s&&_&4&&(s=!0,c.checkedFields=u[2],Ye(()=>s=!1)),o.$set(c)},i(u){r||(p(o.$$.fragment,u),r=!0)},o(u){$(o.$$.fragment,u),r=!1},d(u){u&&m(e),L(o)}}}function Un(i){let e,l,t,n,o,s,r;function a(u){i[17](u)}let f={fields:i[7]};return i[3]!==void 0&&(f.checkedFields=i[3]),o=new ht({props:f}),He.push(()=>Ue(o,"checkedFields",a)),{c(){e=T("section"),l=T("h4"),t=G("Enriched fields"),n=Y(),H(o.$$.fragment),this.h()},l(u){e=V(u,"SECTION",{});var _=S(e);l=V(_,"H4",{class:!0});var c=S(l);t=K(c,"Enriched fields"),c.forEach(m),n=Q(_),O(o.$$.fragment,_),_.forEach(m),this.h()},h(){D(l,"class","svelte-1ge817j")},m(u,_){N(u,e,_),v(e,l),v(l,t),v(e,n),R(o,e,null),r=!0},p(u,_){const c={};_&128&&(c.fields=u[7]),!s&&_&8&&(s=!0,c.checkedFields=u[3],Ye(()=>s=!1)),o.$set(c)},i(u){r||(p(o.$$.fragment,u),r=!0)},o(u){$(o.$$.fragment,u),r=!1},d(u){u&&m(e),L(o)}}}function Yn(i){let e,l;return{c(){e=T("p"),l=G("No fields selected. Please select at least one field to download."),this.h()},l(t){e=V(t,"P",{class:!0});var n=S(e);l=K(n,"No fields selected. Please select at least one field to download."),n.forEach(m),this.h()},h(){D(e,"class","text-gray-600")},m(t,n){N(t,e,n),v(e,l)},d(t){t&&m(e)}}}function gf(i){let e,l;return e=new zi({props:{value:JSON.stringify(i[9].data,null,2),readonly:!0,rows:30,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&512&&(o.value=JSON.stringify(t[9].data,null,2)),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function pf(i){let e,l;return e=new Le({props:{paragraph:!0}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function bf(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E;function y(j){i[15](j)}let M={fields:i[8]};i[1]!==void 0&&(M.checkedFields=i[1]),s=new ht({props:M}),He.push(()=>Ue(s,"checkedFields",y));let C=i[6].length>0&&jn(i),I=i[7].length>0&&Un(i),B=i[4].length===0&&Yn();const x=[pf,gf],Z=[];function F(j,A){return j[9]&&j[9].isFetching?0:j[5]&&j[9]?1:-1}return~(k=F(i))&&(g=Z[k]=x[k](i)),{c(){e=T("div"),l=T("section"),t=T("h4"),n=G("Source fields"),o=Y(),H(s.$$.fragment),a=Y(),C&&C.c(),f=Y(),I&&I.c(),u=Y(),_=T("section"),c=T("h4"),d=G("Download preview"),h=Y(),B&&B.c(),b=Y(),w=T("div"),g&&g.c(),this.h()},l(j){e=V(j,"DIV",{class:!0});var A=S(e);l=V(A,"SECTION",{});var ee=S(l);t=V(ee,"H4",{class:!0});var U=S(t);n=K(U,"Source fields"),U.forEach(m),o=Q(ee),O(s.$$.fragment,ee),ee.forEach(m),a=Q(A),C&&C.l(A),f=Q(A),I&&I.l(A),A.forEach(m),u=Q(j),_=V(j,"SECTION",{});var W=S(_);c=V(W,"H4",{class:!0});var J=S(c);d=K(J,"Download preview"),J.forEach(m),h=Q(W),B&&B.l(W),b=Q(W),w=V(W,"DIV",{class:!0});var P=S(w);g&&g.l(P),P.forEach(m),W.forEach(m),this.h()},h(){D(t,"class","svelte-1ge817j"),D(e,"class","flex flex-wrap gap-x-12"),D(c,"class","svelte-1ge817j"),D(w,"class","preview svelte-1ge817j")},m(j,A){N(j,e,A),v(e,l),v(l,t),v(t,n),v(l,o),R(s,l,null),v(e,a),C&&C.m(e,null),v(e,f),I&&I.m(e,null),N(j,u,A),N(j,_,A),v(_,c),v(c,d),v(_,h),B&&B.m(_,null),v(_,b),v(_,w),~k&&Z[k].m(w,null),E=!0},p(j,A){const ee={};A&256&&(ee.fields=j[8]),!r&&A&2&&(r=!0,ee.checkedFields=j[1],Ye(()=>r=!1)),s.$set(ee),j[6].length>0?C?(C.p(j,A),A&64&&p(C,1)):(C=jn(j),C.c(),p(C,1),C.m(e,f)):C&&(ie(),$(C,1,1,()=>{C=null}),se()),j[7].length>0?I?(I.p(j,A),A&128&&p(I,1)):(I=Un(j),I.c(),p(I,1),I.m(e,null)):I&&(ie(),$(I,1,1,()=>{I=null}),se()),j[4].length===0?B||(B=Yn(),B.c(),B.m(_,b)):B&&(B.d(1),B=null);let U=k;k=F(j),k===U?~k&&Z[k].p(j,A):(g&&(ie(),$(Z[U],1,1,()=>{Z[U]=null}),se()),~k?(g=Z[k],g?g.p(j,A):(g=Z[k]=x[k](j),g.c()),p(g,1),g.m(w,null)):g=null)},i(j){E||(p(s.$$.fragment,j),p(C),p(I),p(g),E=!0)},o(j){$(s.$$.fragment,j),$(C),$(I),$(g),E=!1},d(j){j&&m(e),L(s),C&&C.d(),I&&I.d(),j&&m(u),j&&m(_),B&&B.d(),~k&&Z[k].d()}}}function vf(i){let e,l,t,n,o,s;return e=new Ot({props:{title:"Download data"}}),t=new qt({props:{hasForm:!0,$$slots:{default:[bf]},$$scope:{ctx:i}}}),o=new jt({props:{primaryButtonText:"Download",primaryButtonDisabled:i[4].length===0,secondaryButtonText:"Cancel"}}),o.$on("click:button--secondary",i[12]),{c(){H(e.$$.fragment),l=Y(),H(t.$$.fragment),n=Y(),H(o.$$.fragment)},l(r){O(e.$$.fragment,r),l=Q(r),O(t.$$.fragment,r),n=Q(r),O(o.$$.fragment,r)},m(r,a){R(e,r,a),N(r,l,a),R(t,r,a),N(r,n,a),R(o,r,a),s=!0},p(r,a){const f={};a&2098174&&(f.$$scope={dirty:a,ctx:r}),t.$set(f);const u={};a&16&&(u.primaryButtonDisabled=r[4].length===0),o.$set(u)},i(r){s||(p(e.$$.fragment,r),p(t.$$.fragment,r),p(o.$$.fragment,r),s=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),$(o.$$.fragment,r),s=!1},d(r){L(e,r),r&&m(l),L(t,r),r&&m(n),L(o,r)}}}function wf(i){let e,l;return e=new Lt({props:{size:"lg",open:i[0],$$slots:{default:[vf]},$$scope:{ctx:i}}}),e.$on("submit",i[11]),e.$on("close",i[18]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,[n]){const o={};n&1&&(o.open=t[0]),n&2098174&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function kf(i,e,l){let t,n,o,s,r,a,f,u=X,_=()=>(u(),u=Te(r,Z=>l(9,f=Z)),r);i.$$.on_destroy.push(()=>u());let{open:c=!1}=e,{schema:d}=e;const h=dt(),b=qe();be(i,b,Z=>l(14,a=Z));let w=[],k=[],g=[];function E(Z){const F=lt(Z),A=Pt(Z).filter(W=>["embedding"].indexOf(W.dtype)===-1).filter(W=>!nt(W)&&!Rt(W)),ee=F.filter(W=>W.label!=null),U=F.filter(W=>Ht(W)).filter(W=>!lt(W).some(J=>J.dtype==="embedding"));return{sourceFields:A,enrichedFields:U,labelFields:ee}}async function y(){const Z=a.namespace,F=a.datasetName,j={combine_columns:!1,columns:s.map(U=>U.path)},A=`/api/v1/datasets/${Z}/${F}/select_rows_download?url_safe_options=${encodeURIComponent(JSON.stringify(j))}`,ee=document.createElement("a");ee.download=`${Z}_${F}.json`,ee.href=A,document.body.appendChild(ee),ee.click(),ee.remove()}function M(){l(0,c=!1),h("close")}function C(Z){w=Z,l(1,w)}function I(Z){k=Z,l(2,k)}function B(Z){g=Z,l(3,g)}const x=()=>l(0,c=!1);return i.$$set=Z=>{"open"in Z&&l(0,c=Z.open),"schema"in Z&&l(13,d=Z.schema)},i.$$.update=()=>{i.$$.dirty&8192&&l(8,{sourceFields:t,enrichedFields:n,labelFields:o}=E(d),t,(l(7,n),l(13,d)),(l(6,o),l(13,d))),i.$$.dirty&14&&l(4,s=[...w,...k,...g]),i.$$.dirty&16400&&_(l(5,r=s.length>0?Ii(a.namespace,a.datasetName,{columns:s.map(Z=>Z.path),limit:3,combine_columns:!1}):null))},[c,w,k,g,s,r,o,n,t,f,b,y,M,d,a,C,I,B,x]}class $f extends we{constructor(e){super(),ke(this,e,kf,wf,ve,{open:0,schema:13})}}function Qn(i,e,l){const t=i.slice();t[12]=e[l];const n=t[3](t[12]);t[13]=n;const o=t[4](t[12]);return t[14]=o,t}function Ef(i){let e,l,t,n,o,s,r,a,f;r=new _i({props:{size:"small",tooltipPosition:"left",icon:gi,iconDescription:"Sort dataset by concept score"}}),r.$on("click",i[5]);let u=i[2].data.rows,_=[];for(let d=0;d<u.length;d+=1)_[d]=Wn(Qn(i,u,d));const c=d=>$(_[d],1,1,()=>{_[d]=null});return{c(){e=T("div"),l=T("div"),t=T("div"),n=G("Items with highest score"),o=Y(),s=T("div"),H(r.$$.fragment),a=Y();for(let d=0;d<_.length;d+=1)_[d].c();this.h()},l(d){e=V(d,"DIV",{class:!0});var h=S(e);l=V(h,"DIV",{class:!0});var b=S(l);t=V(b,"DIV",{});var w=S(t);n=K(w,"Items with highest score"),w.forEach(m),o=Q(b),s=V(b,"DIV",{});var k=S(s);O(r.$$.fragment,k),k.forEach(m),b.forEach(m),a=Q(h);for(let g=0;g<_.length;g+=1)_[g].l(h);h.forEach(m),this.h()},h(){D(l,"class","flex h-8 justify-between text-lg"),D(e,"class","flex flex-col gap-y-4")},m(d,h){N(d,e,h),v(e,l),v(l,t),v(t,n),v(l,o),v(l,s),R(r,s,null),v(e,a);for(let b=0;b<_.length;b+=1)_[b]&&_[b].m(e,null);f=!0},p(d,h){if(h&29){u=d[2].data.rows;let b;for(b=0;b<u.length;b+=1){const w=Qn(d,u,b);_[b]?(_[b].p(w,h),p(_[b],1)):(_[b]=Wn(w),_[b].c(),p(_[b],1),_[b].m(e,null))}for(ie(),b=u.length;b<_.length;b+=1)c(b);se()}},i(d){if(!f){p(r.$$.fragment,d);for(let h=0;h<u.length;h+=1)p(_[h]);f=!0}},o(d){$(r.$$.fragment,d),_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)$(_[h]);f=!1},d(d){d&&m(e),L(r),Ae(_,d)}}}function Sf(i){let e,l;return e=new Le({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Wn(i){let e,l,t,n,o,s,r,a,f,u=Ee(i[14])+"",_,c,d;return t=new Ci({props:{text:i[13],row:i[12],spanPaths:i[0].spanPaths,valuePaths:i[0].valuePaths,embeddings:[]}}),{c(){e=T("div"),l=T("div"),H(t.$$.fragment),n=Y(),o=T("div"),s=T("div"),r=G("Max score"),a=Y(),f=T("div"),_=G(u),c=Y(),this.h()},l(h){e=V(h,"DIV",{class:!0});var b=S(e);l=V(b,"DIV",{class:!0});var w=S(l);O(t.$$.fragment,w),w.forEach(m),n=Q(b),o=V(b,"DIV",{class:!0});var k=S(o);s=V(k,"DIV",{class:!0});var g=S(s);r=K(g,"Max score"),g.forEach(m),a=Q(k),f=V(k,"DIV",{class:!0});var E=S(f);_=K(E,u),E.forEach(m),k.forEach(m),c=Q(b),b.forEach(m),this.h()},h(){D(l,"class","flex-grow"),D(s,"class","text-sm text-gray-500"),D(f,"class","text-lg"),D(o,"class","flex flex-none flex-col items-end"),D(e,"class","flex gap-x-4 rounded border border-gray-300 px-4 py-2")},m(h,b){N(h,e,b),v(e,l),R(t,l,null),v(e,n),v(e,o),v(o,s),v(s,r),v(o,a),v(o,f),v(f,_),v(e,c),d=!0},p(h,b){const w={};b&4&&(w.text=h[13]),b&4&&(w.row=h[12]),b&1&&(w.spanPaths=h[0].spanPaths),b&1&&(w.valuePaths=h[0].valuePaths),t.$set(w),(!d||b&4)&&u!==(u=Ee(h[14])+"")&&ce(_,u)},i(h){d||(p(t.$$.fragment,h),d=!0)},o(h){$(t.$$.fragment,h),d=!1},d(h){h&&m(e),L(t)}}}function yf(i){let e,l,t,n;const o=[Sf,Ef],s=[];function r(a,f){return a[2].isFetching?0:a[2].data?1:-1}return~(e=r(i))&&(l=s[e]=o[e](i)),{c(){l&&l.c(),t=de()},l(a){l&&l.l(a),t=de()},m(a,f){~e&&s[e].m(a,f),N(a,t,f),n=!0},p(a,[f]){let u=e;e=r(a),e===u?~e&&s[e].p(a,f):(l&&(ie(),$(s[u],1,1,()=>{s[u]=null}),se()),~e?(l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){~e&&s[e].d(a),a&&m(t)}}}const If=5;function Df(i,e,l){let t,n,o,s,r=X,a=()=>(r(),r=Te(t,k=>l(2,s=k)),t);i.$$.on_destroy.push(()=>r());let{schema:f}=e,{namespace:u}=e,{datasetName:_}=e,{mediaPath:c}=e,{scorePath:d}=e;function h(k){return ut.value(gt(k,c),"string")}function b(k){const g=d.slice(0,d.length-2),E=gt(k,g);let y=0;for(const M of E){const C=ut.value(gt(M,["score"]),"float32");y=Math.max(y,C)}return y}function w(){const k=Ti(u,_);k.query.sort_by=[d],k.query.sort_order="DESC",k.insightsOpen=!1,Mt(Di(u,_,k))}return i.$$set=k=>{"schema"in k&&l(6,f=k.schema),"namespace"in k&&l(7,u=k.namespace),"datasetName"in k&&l(8,_=k.datasetName),"mediaPath"in k&&l(9,c=k.mediaPath),"scorePath"in k&&l(10,d=k.scorePath)},i.$$.update=()=>{i.$$.dirty&1984&&a(l(1,t=Ii(u,_,{columns:[c,d],limit:If,combine_columns:!0,sort_by:[d]},f))),i.$$.dirty&1088&&l(11,n=[ci(f,d)]),i.$$.dirty&2112&&l(0,o=pi(f,n))},[o,t,s,h,b,w,f,u,_,c,d,n]}class Tf extends we{constructor(e){super(),ke(this,e,Df,yf,ve,{schema:6,namespace:7,datasetName:8,mediaPath:9,scorePath:10})}}function Vf(i){let e,l;return e=new Le({props:{lines:1,width:"200px"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Nf(i){let e,l;return{c(){e=T("div"),l=G(i[9]),this.h()},l(t){e=V(t,"DIV",{class:!0});var n=S(e);l=K(n,i[9]),n.forEach(m),this.h()},h(){D(e,"class","text-sm text-gray-500")},m(t,n){N(t,e,n),v(e,l)},p(t,n){n&512&&ce(l,t[9])},i:X,o:X,d(t){t&&m(e)}}}function Mf(i){let e,l=i[7].toFixed(2)+"",t,n,o=Ee(i[3])+"",s,r;return{c(){e=T("div"),t=G(l),n=G("% ("),s=G(o),r=G(" items)"),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=S(e);t=K(f,l),n=K(f,"% ("),s=K(f,o),r=K(f," items)"),f.forEach(m),this.h()},h(){D(e,"class","text-lg font-bold")},m(a,f){N(a,e,f),v(e,t),v(e,n),v(e,s),v(e,r)},p(a,f){f&128&&l!==(l=a[7].toFixed(2)+"")&&ce(t,l),f&8&&o!==(o=Ee(a[3])+"")&&ce(s,o)},i:X,o:X,d(a){a&&m(e)}}}function Cf(i){let e,l;return e=new Le({props:{lines:1,width:"200px"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function zf(i){let e,l,t,n,o=i[13].namespace+"",s,r,a=i[13].concept_name+"",f,u,_,c,d,h,b,w,k,g,E,y;const M=[Nf,Vf],C=[];function I(F,j){return F[9]?0:1}c=I(i),d=C[c]=M[c](i);const B=[Cf,Mf],x=[];function Z(F,j){return F[6].isFetching?0:1}return w=Z(i),k=x[w]=B[w](i),{c(){e=T("div"),l=T("div"),t=T("div"),n=T("span"),s=G(o),r=G(" / "),f=G(a),_=Y(),d.c(),h=Y(),b=T("div"),k.c(),this.h()},l(F){e=V(F,"DIV",{slot:!0,class:!0});var j=S(e);l=V(j,"DIV",{class:!0});var A=S(l);t=V(A,"DIV",{class:!0});var ee=S(t);n=V(ee,"SPAN",{});var U=S(n);s=K(U,o),r=K(U," / "),f=K(U,a),U.forEach(m),ee.forEach(m),_=Q(A),d.l(A),A.forEach(m),h=Q(j),b=V(j,"DIV",{class:!0});var W=S(b);k.l(W),W.forEach(m),j.forEach(m),this.h()},h(){D(t,"class","text-lg"),D(l,"class","w-full flex-grow"),D(b,"class","flex-none"),D(e,"slot","above"),D(e,"class","flex w-full items-center")},m(F,j){N(F,e,j),v(e,l),v(l,t),v(t,n),v(n,s),v(n,r),v(n,f),v(l,_),C[c].m(l,null),v(e,h),v(e,b),x[w].m(b,null),g=!0,E||(y=$e(u=Se.call(null,n,{text:`version: ${i[8]}`})),E=!0)},p(F,j){u&&Pe(u.update)&&j&256&&u.update.call(null,{text:`version: ${F[8]}`});let A=c;c=I(F),c===A?C[c].p(F,j):(ie(),$(C[A],1,1,()=>{C[A]=null}),se(),d=C[c],d?d.p(F,j):(d=C[c]=M[c](F),d.c()),p(d,1),d.m(l,null));let ee=w;w=Z(F),w===ee?x[w].p(F,j):(ie(),$(x[ee],1,1,()=>{x[ee]=null}),se(),k=x[w],k?k.p(F,j):(k=x[w]=B[w](F),k.c()),p(k,1),k.m(b,null))},i(F){g||(p(d),p(k),g=!0)},o(F){$(d),$(k),g=!1},d(F){F&&m(e),C[c].d(),x[w].d(),E=!1,y()}}}function Ff(i){let e,l;return e=new Le({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Pf(i){let e,l;return e=new Tf({props:{schema:i[0],namespace:i[1],datasetName:i[2],mediaPath:i[12],scorePath:i[4]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.schema=t[0]),n&2&&(o.namespace=t[1]),n&4&&(o.datasetName=t[2]),n&4096&&(o.mediaPath=t[12]),n&16&&(o.scorePath=t[4]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Af(i){let e,l,t,n;const o=[Pf,Ff],s=[];function r(a,f){return a[5].data?0:1}return l=r(i),t=s[l]=o[l](i),{c(){e=T("div"),t.c(),this.h()},l(a){e=V(a,"DIV",{slot:!0});var f=S(e);t.l(f),f.forEach(m),this.h()},h(){D(e,"slot","below")},m(a,f){N(a,e,f),s[l].m(e,null),n=!0},p(a,f){let u=l;l=r(a),l===u?s[l].p(a,f):(ie(),$(s[u],1,1,()=>{s[u]=null}),se(),t=s[l],t?t.p(a,f):(t=s[l]=o[l](a),t.c()),p(t,1),t.m(e,null))},i(a){n||(p(t),n=!0)},o(a){$(t),n=!1},d(a){a&&m(e),s[l].d()}}}function Bf(i){let e,l;return e=new Gs({props:{$$slots:{below:[Af],above:[zf]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,[n]){const o={};n&70655&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}const Hf="In concept",Rf="Not in concept";function Lf(i,e,l){let t,n,o,s,r,a,f,u,_,c,d=X,h=()=>(d(),d=Te(s,I=>l(5,c=I)),s),b,w=X,k=()=>(w(),w=Te(o,I=>l(6,b=I)),o);i.$$.on_destroy.push(()=>d()),i.$$.on_destroy.push(()=>w());let{field:g}=e,{schema:E}=e,{namespace:y}=e,{datasetName:M}=e,C=g.signal;return i.$$set=I=>{"field"in I&&l(14,g=I.field),"schema"in I&&l(0,E=I.schema),"namespace"in I&&l(1,y=I.namespace),"datasetName"in I&&l(2,M=I.datasetName)},i.$$.update=()=>{var I,B,x,Z,F,j,A;i.$$.dirty&16384&&l(4,t=[...g.path,kt,"score"]),i.$$.dirty&16384&&l(12,n=g.parent.path),i.$$.dirty&22&&k(l(11,o=yi(y,M,{leaf_path:t}))),i.$$.dirty&32&&l(9,r=(B=(I=c.data)==null?void 0:I.metadata)==null?void 0:B.description),i.$$.dirty&64&&l(15,a=((Z=(x=b.data)==null?void 0:x.counts.find(([ee,U])=>ee===Rf))==null?void 0:Z[1])||0),i.$$.dirty&64&&l(3,f=((j=(F=b.data)==null?void 0:F.counts.find(([ee,U])=>ee===Hf))==null?void 0:j[1])||0),i.$$.dirty&32&&l(8,u=(A=c.data)==null?void 0:A.version),i.$$.dirty&32776&&l(7,_=f/(f+a)*100)},h(l(10,s=hi(C.namespace,C.concept_name))),[E,y,M,f,t,c,b,_,u,r,s,o,n,C,g,a]}class Of extends we{constructor(e){super(),ke(this,e,Lf,Bf,ve,{field:14,schema:0,namespace:1,datasetName:2})}}function Zn(i,e,l){const t=i.slice();return t[9]=e[l],t}function qf(i){let e,l;return e=new Le({props:{paragraph:!0,lines:2,width:"200px"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function jf(i){let e,l=Ee(i[5])+"",t,n,o,s,r,a;return{c(){e=T("div"),t=G(l),n=G(" items"),o=Y(),s=T("div"),r=G(i[6]),a=G(" chars on average")},l(f){e=V(f,"DIV",{});var u=S(e);t=K(u,l),n=K(u," items"),u.forEach(m),o=Q(f),s=V(f,"DIV",{});var _=S(s);r=K(_,i[6]),a=K(_," chars on average"),_.forEach(m)},m(f,u){N(f,e,u),v(e,t),v(e,n),N(f,o,u),N(f,s,u),v(s,r),v(s,a)},p(f,u){u&32&&l!==(l=Ee(f[5])+"")&&ce(t,l),u&64&&ce(r,f[6])},i:X,o:X,d(f){f&&m(e),f&&m(o),f&&m(s)}}}function Gn(i){let e,l;return e=new Of({props:{schema:i[2],namespace:i[3],datasetName:i[4],field:i[9]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&4&&(o.schema=t[2]),n&8&&(o.namespace=t[3]),n&16&&(o.datasetName=t[4]),n&1&&(o.field=t[9]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Uf(i){let e,l,t,n,o,s,r,a,f,u;const _=[jf,qf],c=[];function d(k,g){return k[5]&&k[6]?0:1}r=d(i),a=c[r]=_[r](i);let h=i[0],b=[];for(let k=0;k<h.length;k+=1)b[k]=Gn(Zn(i,h,k));const w=k=>$(b[k],1,1,()=>{b[k]=null});return{c(){e=T("div"),l=T("div"),t=T("div"),n=G(i[1]),o=Y(),s=T("div"),a.c(),f=Y();for(let k=0;k<b.length;k+=1)b[k].c();this.h()},l(k){e=V(k,"DIV",{class:!0});var g=S(e);l=V(g,"DIV",{class:!0});var E=S(l);t=V(E,"DIV",{class:!0});var y=S(t);n=K(y,i[1]),y.forEach(m),o=Q(E),s=V(E,"DIV",{class:!0});var M=S(s);a.l(M),M.forEach(m),E.forEach(m),f=Q(g);for(let C=0;C<b.length;C+=1)b[C].l(g);g.forEach(m),this.h()},h(){D(t,"class","flex-grow text-2xl font-semibold text-slate-900"),D(s,"class","flex-none text-sm text-gray-500"),D(l,"class","sticky top-0 flex rounded-xl border border-gray-300 bg-slate-50/80 px-4 py-3 backdrop-blur-sm"),D(e,"class","relative flex flex-col gap-y-4")},m(k,g){N(k,e,g),v(e,l),v(l,t),v(t,n),v(l,o),v(l,s),c[r].m(s,null),v(e,f);for(let E=0;E<b.length;E+=1)b[E]&&b[E].m(e,null);u=!0},p(k,[g]){(!u||g&2)&&ce(n,k[1]);let E=r;if(r=d(k),r===E?c[r].p(k,g):(ie(),$(c[E],1,1,()=>{c[E]=null}),se(),a=c[r],a?a.p(k,g):(a=c[r]=_[r](k),a.c()),p(a,1),a.m(s,null)),g&29){h=k[0];let y;for(y=0;y<h.length;y+=1){const M=Zn(k,h,y);b[y]?(b[y].p(M,g),p(b[y],1)):(b[y]=Gn(M),b[y].c(),p(b[y],1),b[y].m(e,null))}for(ie(),y=h.length;y<b.length;y+=1)w(y);se()}},i(k){if(!u){p(a);for(let g=0;g<h.length;g+=1)p(b[g]);u=!0}},o(k){$(a),b=b.filter(Boolean);for(let g=0;g<b.length;g+=1)$(b[g]);u=!1},d(k){k&&m(e),c[r].d(),Ae(b,k)}}}function Yf(i,e,l){let t,n,o,s,r=X,a=()=>(r(),r=Te(t,h=>l(8,s=h)),t);i.$$.on_destroy.push(()=>r());let{concepts:f}=e,{mediaPath:u}=e,{schema:_}=e,{namespace:c}=e,{datasetName:d}=e;return i.$$set=h=>{"concepts"in h&&l(0,f=h.concepts),"mediaPath"in h&&l(1,u=h.mediaPath),"schema"in h&&l(2,_=h.schema),"namespace"in h&&l(3,c=h.namespace),"datasetName"in h&&l(4,d=h.datasetName)},i.$$.update=()=>{var h,b;i.$$.dirty&26&&a(l(7,t=Si(c,d,{leaf_path:u}))),i.$$.dirty&256&&l(6,n=(h=s.data)==null?void 0:h.avg_text_length),i.$$.dirty&256&&l(5,o=(b=s.data)==null?void 0:b.total_count)},[f,u,_,c,d,o,n,t,s]}class Qf extends we{constructor(e){super(),ke(this,e,Yf,Uf,ve,{concepts:0,mediaPath:1,schema:2,namespace:3,datasetName:4})}}function Kn(i,e,l){const t=i.slice();t[8]=e[l];const n=t[5](t[8]);return t[9]=n,t}function Jn(i){let e,l;return e=new Qf({props:{mediaPath:i[8],schema:i[0],namespace:i[1],datasetName:i[2],concepts:i[9]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&8&&(o.mediaPath=t[8]),n&1&&(o.schema=t[0]),n&2&&(o.namespace=t[1]),n&4&&(o.datasetName=t[2]),n&8&&(o.concepts=t[9]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Wf(i){let e,l,t=i[3],n=[];for(let s=0;s<t.length;s+=1)n[s]=Jn(Kn(i,t,s));const o=s=>$(n[s],1,1,()=>{n[s]=null});return{c(){e=T("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=V(s,"DIV",{class:!0});var r=S(e);for(let a=0;a<n.length;a+=1)n[a].l(r);r.forEach(m),this.h()},h(){D(e,"class","flex flex-col gap-y-6")},m(s,r){N(s,e,r);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);l=!0},p(s,[r]){if(r&47){t=s[3];let a;for(a=0;a<t.length;a+=1){const f=Kn(s,t,a);n[a]?(n[a].p(f,r),p(n[a],1)):(n[a]=Jn(f),n[a].c(),p(n[a],1),n[a].m(e,null))}for(ie(),a=t.length;a<n.length;a+=1)o(a);se()}},i(s){if(!l){for(let r=0;r<t.length;r+=1)p(n[r]);l=!0}},o(s){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)$(n[r]);l=!1},d(s){s&&m(e),Ae(n,s)}}}function Zf(i,e,l){let t,n,o,s,r=X,a=()=>(r(),r=Te(n,d=>l(6,s=d)),n);i.$$.on_destroy.push(()=>r());let{schema:f}=e,{namespace:u}=e,{datasetName:_}=e;function c(d){return t.filter(h=>ki(h.path,d))}return i.$$set=d=>{"schema"in d&&l(0,f=d.schema),"namespace"in d&&l(1,u=d.namespace),"datasetName"in d&&l(2,_=d.datasetName)},i.$$.update=()=>{var d,h;i.$$.dirty&1&&(t=lt(f).filter(b=>{var w;return((w=b.signal)==null?void 0:w.signal_name)=="concept_score"})),i.$$.dirty&6&&a(l(4,n=ot(u,_))),i.$$.dirty&64&&l(3,o=(((h=(d=s.data)==null?void 0:d.ui)==null?void 0:h.media_paths)||[]).map(b=>Array.isArray(b)?b:[b]))},[f,u,_,o,n,c,s]}class Gf extends we{constructor(e){super(),ke(this,e,Zf,Wf,ve,{schema:0,namespace:1,datasetName:2})}}function Xn(i){let e,l,t,n,o,s,r,a;function f(d){i[24](d)}let u={schema:i[12].data,namespace:i[0],name:i[1]};i[4]!==void 0&&(u.open=i[4]),e=new _f({props:u}),He.push(()=>Ue(e,"open",f));function _(d){i[25](d)}let c={schema:i[12].data};return i[5]!==void 0&&(c.open=i[5]),n=new $f({props:c}),He.push(()=>Ue(n,"open",_)),r=new Lt({props:{size:"lg",open:i[3].insightsOpen,$$slots:{default:[Jf]},$$scope:{ctx:i}}}),r.$on("close",i[26]),r.$on("submit",i[27]),{c(){H(e.$$.fragment),t=Y(),H(n.$$.fragment),s=Y(),H(r.$$.fragment)},l(d){O(e.$$.fragment,d),t=Q(d),O(n.$$.fragment,d),s=Q(d),O(r.$$.fragment,d)},m(d,h){R(e,d,h),N(d,t,h),R(n,d,h),N(d,s,h),R(r,d,h),a=!0},p(d,h){const b={};h[0]&4096&&(b.schema=d[12].data),h[0]&1&&(b.namespace=d[0]),h[0]&2&&(b.name=d[1]),!l&&h[0]&16&&(l=!0,b.open=d[4],Ye(()=>l=!1)),e.$set(b);const w={};h[0]&4096&&(w.schema=d[12].data),!o&&h[0]&32&&(o=!0,w.open=d[5],Ye(()=>o=!1)),n.$set(w);const k={};h[0]&8&&(k.open=d[3].insightsOpen),h[0]&4107|h[1]&1&&(k.$$scope={dirty:h,ctx:d}),r.$set(k)},i(d){a||(p(e.$$.fragment,d),p(n.$$.fragment,d),p(r.$$.fragment,d),a=!0)},o(d){$(e.$$.fragment,d),$(n.$$.fragment,d),$(r.$$.fragment,d),a=!1},d(d){L(e,d),d&&m(t),L(n,d),d&&m(s),L(r,d)}}}function xn(i){let e,l;return e=new Gf({props:{schema:i[12].data,namespace:i[0],datasetName:i[1]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&4096&&(o.schema=t[12].data),n[0]&1&&(o.namespace=t[0]),n[0]&2&&(o.datasetName=t[1]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Kf(i){let e,l,t=i[3].insightsOpen&&xn(i);return{c(){t&&t.c(),e=de()},l(n){t&&t.l(n),e=de()},m(n,o){t&&t.m(n,o),N(n,e,o),l=!0},p(n,o){n[3].insightsOpen?t?(t.p(n,o),o[0]&8&&p(t,1)):(t=xn(n),t.c(),p(t,1),t.m(e.parentNode,e)):t&&(ie(),$(t,1,1,()=>{t=null}),se())},i(n){l||(p(t),l=!0)},o(n){$(t),l=!1},d(n){t&&t.d(n),n&&m(e)}}}function Jf(i){let e,l,t,n,o,s;return e=new Ot({props:{title:"Insights"}}),t=new qt({props:{$$slots:{default:[Kf]},$$scope:{ctx:i}}}),o=new jt({props:{primaryButtonText:"Close"}}),{c(){H(e.$$.fragment),l=Y(),H(t.$$.fragment),n=Y(),H(o.$$.fragment)},l(r){O(e.$$.fragment,r),l=Q(r),O(t.$$.fragment,r),n=Q(r),O(o.$$.fragment,r)},m(r,a){R(e,r,a),N(r,l,a),R(t,r,a),N(r,n,a),R(o,r,a),s=!0},p(r,a){const f={};a[0]&4107|a[1]&1&&(f.$$scope={dirty:a,ctx:r}),t.$set(f)},i(r){s||(p(e.$$.fragment,r),p(t.$$.fragment,r),p(o.$$.fragment,r),s=!0)},o(r){$(e.$$.fragment,r),$(t.$$.fragment,r),$(o.$$.fragment,r),s=!1},d(r){L(e,r),r&&m(l),L(t,r),r&&m(n),L(o,r)}}}function ei(i){let e,l;return e=new Yt({props:{open:!0,modalHeading:"Dataset config",primaryButtonText:"Ok",secondaryButtonText:"Cancel",$$slots:{default:[eu]},$$scope:{ctx:i}}}),e.$on("click:button--secondary",i[28]),e.$on("close",i[29]),e.$on("submit",i[30]),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&8192|n[1]&1&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Xf(i){let e,l;return e=new zi({props:{value:`${i[13].data}`,readonly:!0,rows:15,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&8192&&(o.value=`${t[13].data}`),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function xf(i){let e,l;return e=new Le({}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:X,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function eu(i){let e,l,t,n,o,s,r,a,f,u;const _=[xf,Xf],c=[];function d(h,b){var w,k;return(w=h[13])!=null&&w.isFetching?0:(k=h[13])!=null&&k.data?1:-1}return~(r=d(i))&&(a=c[r]=_[r](i)),{c(){e=T("div"),l=G(`This dataset configuration represents the transformations that created the dataset,
        including signals, embeddings, and user settings. This can be used with lilac.load to
        generate the dataset with the same view as presented.`),t=Y(),n=T("div"),o=G("config.yml"),s=Y(),a&&a.c(),f=de(),this.h()},l(h){e=V(h,"DIV",{class:!0});var b=S(e);l=K(b,`This dataset configuration represents the transformations that created the dataset,
        including signals, embeddings, and user settings. This can be used with lilac.load to
        generate the dataset with the same view as presented.`),b.forEach(m),t=Q(h),n=V(h,"DIV",{class:!0});var w=S(n);o=K(w,"config.yml"),w.forEach(m),s=Q(h),a&&a.l(h),f=de(),this.h()},h(){D(e,"class","mb-4 text-sm"),D(n,"class","font-mono text-xs")},m(h,b){N(h,e,b),v(e,l),N(h,t,b),N(h,n,b),v(n,o),N(h,s,b),~r&&c[r].m(h,b),N(h,f,b),u=!0},p(h,b){let w=r;r=d(h),r===w?~r&&c[r].p(h,b):(a&&(ie(),$(c[w],1,1,()=>{c[w]=null}),se()),~r?(a=c[r],a?a.p(h,b):(a=c[r]=_[r](h),a.c()),p(a,1),a.m(f.parentNode,f)):a=null)},i(h){u||(p(a),u=!0)},o(h){$(a),u=!1},d(h){h&&m(e),h&&m(t),h&&m(n),h&&m(s),~r&&c[r].d(h),h&&m(f)}}}function tu(i){let e,l,t,n,o,s,r,a,f,u,_;t=new Zo({}),r=new Ja({});let c=i[12].data&&Xn(i),d=i[2]&&ei(i);return{c(){e=T("div"),l=T("div"),H(t.$$.fragment),o=Y(),s=T("div"),H(r.$$.fragment),a=Y(),c&&c.c(),f=Y(),d&&d.c(),u=de(),this.h()},l(h){e=V(h,"DIV",{class:!0});var b=S(e);l=V(b,"DIV",{class:!0});var w=S(l);O(t.$$.fragment,w),w.forEach(m),o=Q(b),s=V(b,"DIV",{class:!0});var k=S(s);O(r.$$.fragment,k),k.forEach(m),b.forEach(m),a=Q(h),c&&c.l(h),f=Q(h),d&&d.l(h),u=de(),this.h()},h(){D(l,"class",n=Xt(`schema-container relative h-full ${i[11]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1xlsh2v"),D(s,"class","h-full w-2/3 flex-grow"),D(e,"class","flex h-full w-full")},m(h,b){N(h,e,b),v(e,l),R(t,l,null),v(e,o),v(e,s),R(r,s,null),N(h,a,b),c&&c.m(h,b),N(h,f,b),d&&d.m(h,b),N(h,u,b),_=!0},p(h,b){(!_||b[0]&2048&&n!==(n=Xt(`schema-container relative h-full ${h[11]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1xlsh2v"))&&D(l,"class",n),h[12].data?c?(c.p(h,b),b[0]&4096&&p(c,1)):(c=Xn(h),c.c(),p(c,1),c.m(f.parentNode,f)):c&&(ie(),$(c,1,1,()=>{c=null}),se()),h[2]?d?(d.p(h,b),b[0]&4&&p(d,1)):(d=ei(h),d.c(),p(d,1),d.m(u.parentNode,u)):d&&(ie(),$(d,1,1,()=>{d=null}),se())},i(h){_||(p(t.$$.fragment,h),p(r.$$.fragment,h),p(c),p(d),_=!0)},o(h){$(t.$$.fragment,h),$(r.$$.fragment,h),$(c),$(d),_=!1},d(h){h&&m(e),L(t),L(r),h&&m(a),c&&c.d(h),h&&m(f),d&&d.d(h),h&&m(u)}}}function lu(i){let e,l,t=i[3].namespace+"",n,o,s=i[3].datasetName+"",r,a,f;return{c(){e=T("div"),l=T("a"),n=G(t),o=G("/"),r=G(s),this.h()},l(u){e=V(u,"DIV",{class:!0});var _=S(e);l=V(_,"A",{class:!0,href:!0});var c=S(l);n=K(c,t),o=K(c,"/"),r=K(c,s),c.forEach(m),_.forEach(m),this.h()},h(){D(l,"class","font-semibold text-black"),D(l,"href",i[8]),D(e,"class","dataset-name svelte-1xlsh2v")},m(u,_){N(u,e,_),v(e,l),v(l,n),v(l,o),v(l,r),a||(f=Fe(l,"click",i[21]),a=!0)},p(u,_){_[0]&8&&t!==(t=u[3].namespace+"")&&ce(n,t),_[0]&8&&s!==(s=u[3].datasetName+"")&&ce(r,s),_[0]&256&&D(l,"href",u[8])},d(u){u&&m(e),a=!1,f()}}}function nu(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b;return t=new jr({}),s=new Ge({props:{type:"outline",$$slots:{default:[lu]},$$scope:{ctx:i}}}),f=new ct({}),c=new Dr({}),{c(){e=T("div"),l=T("button"),H(t.$$.fragment),o=Y(),H(s.$$.fragment),r=Y(),a=T("button"),H(f.$$.fragment),u=Y(),_=T("button"),H(c.$$.fragment),this.h()},l(w){e=V(w,"DIV",{slot:!0,class:!0});var k=S(e);l=V(k,"BUTTON",{class:!0});var g=S(l);O(t.$$.fragment,g),g.forEach(m),o=Q(k),O(s.$$.fragment,k),r=Q(k),a=V(k,"BUTTON",{});var E=S(a);O(f.$$.fragment,E),E.forEach(m),u=Q(k),_=V(k,"BUTTON",{});var y=S(_);O(c.$$.fragment,y),y.forEach(m),k.forEach(m),this.h()},h(){D(l,"class","mr-2"),oe(l,"bg-blue-100",!i[11]),oe(l,"outline-blue-400",!i[11]),oe(l,"outline",!i[11]),D(e,"slot","header-subtext"),D(e,"class","flex flex-row items-center gap-x-1")},m(w,k){N(w,e,k),v(e,l),R(t,l,null),v(e,o),R(s,e,null),v(e,r),v(e,a),R(f,a,null),v(e,u),v(e,_),R(c,_,null),d=!0,h||(b=[$e(n=Se.call(null,l,{text:i[11]?"Show Schema":"Hide Schema"})),Fe(l,"click",i[15]),Fe(l,"keypress",i[15]),Fe(a,"click",i[22]),$e(Se.call(null,a,{text:"Dataset information"})),$e(Se.call(null,_,{text:"Dataset insights"})),Fe(_,"click",i[23])],h=!0)},p(w,k){n&&Pe(n.update)&&k[0]&2048&&n.update.call(null,{text:w[11]?"Show Schema":"Hide Schema"}),(!d||k[0]&2048)&&oe(l,"bg-blue-100",!w[11]),(!d||k[0]&2048)&&oe(l,"outline-blue-400",!w[11]),(!d||k[0]&2048)&&oe(l,"outline",!w[11]);const g={};k[0]&264|k[1]&1&&(g.$$scope={dirty:k,ctx:w}),s.$set(g)},i(w){d||(p(t.$$.fragment,w),p(s.$$.fragment,w),p(f.$$.fragment,w),p(c.$$.fragment,w),d=!0)},o(w){$(t.$$.fragment,w),$(s.$$.fragment,w),$(f.$$.fragment,w),$(c.$$.fragment,w),d=!1},d(w){w&&m(e),L(t),L(s),L(f),L(c),h=!1,Qe(b)}}}function iu(i){let e,l,t;return l=new _o({}),{c(){e=T("div"),H(l.$$.fragment),this.h()},l(n){e=V(n,"DIV",{slot:!0,class:!0});var o=S(e);O(l.$$.fragment,o),o.forEach(m),this.h()},h(){D(e,"slot","header-center"),D(e,"class","flex w-full items-center")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p:X,i(n){t||(p(l.$$.fragment,n),t=!0)},o(n){$(l.$$.fragment,n),t=!1},d(n){n&&m(e),L(l)}}}function ti(i){let e,l,t,n;return{c(){e=T("div"),l=G("Copied!"),this.h()},l(o){e=V(o,"DIV",{class:!0});var s=S(e);l=K(s,"Copied!"),s.forEach(m),this.h()},h(){D(e,"class","absolute right-12 z-50 mt-2 rounded border border-neutral-300 bg-neutral-50 px-4 py-1 text-xs")},m(o,s){N(o,e,s),v(e,l),n=!0},i(o){n||(t&&t.end(1),n=!0)},o(o){t=Xi(e,Xs,{}),n=!1},d(o){o&&m(e),o&&t&&t.end()}}}function su(i){let e,l,t,n,o,s,r,a,f,u,_,c,d,h,b,w,k,g,E,y=i[6]&&ti();return r=new Ks({}),u=new kr({}),h=new ir({}),{c(){e=T("div"),l=T("div"),t=T("div"),n=T("div"),y&&y.c(),o=Y(),s=T("button"),H(r.$$.fragment),a=Y(),f=T("button"),H(u.$$.fragment),_=Y(),c=T("div"),d=T("button"),H(h.$$.fragment),this.h()},l(M){e=V(M,"DIV",{slot:!0});var C=S(e);l=V(C,"DIV",{class:!0});var I=S(l);t=V(I,"DIV",{class:!0});var B=S(t);n=V(B,"DIV",{class:!0});var x=S(n);y&&y.l(x),o=Q(x),s=V(x,"BUTTON",{});var Z=S(s);O(r.$$.fragment,Z),Z.forEach(m),x.forEach(m),a=Q(B),f=V(B,"BUTTON",{});var F=S(f);O(u.$$.fragment,F),F.forEach(m),_=Q(B),c=V(B,"DIV",{class:!0});var j=S(c);d=V(j,"BUTTON",{});var A=S(d);O(h.$$.fragment,A),A.forEach(m),j.forEach(m),B.forEach(m),I.forEach(m),C.forEach(m),this.h()},h(){D(n,"class","relative"),d.disabled=b=!i[9],D(c,"class","mr-2"),oe(c,"opacity-40",!i[9]),D(t,"class","flex"),D(l,"class","flex h-full flex-col"),D(e,"slot","header-right")},m(M,C){N(M,e,C),v(e,l),v(l,t),v(t,n),y&&y.m(n,null),v(n,o),v(n,s),R(r,s,null),v(t,a),v(t,f),R(u,f,null),v(t,_),v(t,c),v(c,d),R(h,d,null),k=!0,g||(E=[$e(Se.call(null,s,{text:"Copy the URL"})),Fe(s,"click",i[18]),$e(Se.call(null,f,{text:"Download data"})),Fe(f,"click",i[19]),$e(Se.call(null,d,{text:"Dataset settings"})),Fe(d,"click",i[20]),$e(w=Se.call(null,c,{text:i[9]?"":"User does not have access to update settings of this dataset."}))],g=!0)},p(M,C){M[6]?y?C[0]&64&&p(y,1):(y=ti(),y.c(),p(y,1),y.m(n,o)):y&&(ie(),$(y,1,1,()=>{y=null}),se()),(!k||C[0]&512&&b!==(b=!M[9]))&&(d.disabled=b),w&&Pe(w.update)&&C[0]&512&&w.update.call(null,{text:M[9]?"":"User does not have access to update settings of this dataset."}),(!k||C[0]&512)&&oe(c,"opacity-40",!M[9])},i(M){k||(p(y),p(r.$$.fragment,M),p(u.$$.fragment,M),p(h.$$.fragment,M),k=!0)},o(M){$(y),$(r.$$.fragment,M),$(u.$$.fragment,M),$(h.$$.fragment,M),k=!1},d(M){M&&m(e),y&&y.d(),L(r),L(u),L(h),g=!1,Qe(E)}}}function ru(i){let e,l;return e=new es({props:{$$slots:{"header-right":[su],"header-center":[iu],"header-subtext":[nu],default:[tu]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&15231|n[1]&1&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function au(i,e,l){let t,n,o,s,r,a,f,u,_=X,c=()=>(_(),_=Te(n,re=>l(12,u=re)),n),d,h=X,b=()=>(h(),h=Te(r,re=>l(13,d=re)),r);i.$$.on_destroy.push(()=>_()),i.$$.on_destroy.push(()=>h());let{namespace:w}=e,{datasetName:k}=e;const g=qe();be(i,g,re=>l(3,f=re));function E(){yt(g,f.schemaCollapsed=!f.schemaCollapsed,f)}let y=!1,M=!1;const C=mt();be(i,C,re=>l(17,a=re));let I=!1,B=!1;const x=()=>navigator.clipboard.writeText(location.href).then(()=>{l(6,I=!0),setTimeout(()=>l(6,I=!1),2e3)},()=>{throw Error("Error copying link to clipboard.")}),Z=()=>l(5,M=!0),F=()=>l(4,y=!0),j=()=>Mt(s),A=()=>l(2,B=!0),ee=()=>g.setInsightsOpen(!0);function U(re){y=re,l(4,y)}function W(re){M=re,l(5,M)}const J=()=>g.setInsightsOpen(!1),P=()=>g.setInsightsOpen(!1),te=()=>l(2,B=!1),ue=()=>l(2,B=!1),fe=()=>l(2,B=!1);return i.$$set=re=>{"namespace"in re&&l(0,w=re.namespace),"datasetName"in re&&l(1,k=re.datasetName)},i.$$.update=()=>{var re;i.$$.dirty[0]&8&&l(11,t=f.schemaCollapsed),i.$$.dirty[0]&8&&c(l(10,n=Bt(f.namespace,f.datasetName))),i.$$.dirty[0]&131072&&l(9,o=(re=a.data)==null?void 0:re.access.dataset.update_settings),i.$$.dirty[0]&3&&l(8,s=Di(w,k)),i.$$.dirty[0]&7&&b(l(7,r=B?Cs(w,k,"yaml"):null))},[w,k,B,f,y,M,I,r,s,o,n,t,u,d,g,E,C,a,x,Z,F,j,A,ee,U,W,J,P,te,ue,fe]}class ou extends we{constructor(e){super(),ke(this,e,au,ru,ve,{namespace:0,datasetName:1},null,[-1,-1])}}function fu(i){let e;return{c(){e=G("Page not found! Please specify a dataset.")},l(l){e=K(l,"Page not found! Please specify a dataset.")},m(l,t){N(l,e,t)},p:X,i:X,o:X,d(l){l&&m(e)}}}function uu(i){let e=i[2],l,t,n=li(i);return{c(){n.c(),l=de()},l(o){n.l(o),l=de()},m(o,s){n.m(o,s),N(o,l,s),t=!0},p(o,s){s&4&&ve(e,e=o[2])?(ie(),$(n,1,1,X),se(),n=li(o),n.c(),p(n,1),n.m(l.parentNode,l)):n.p(o,s)},i(o){t||(p(n),t=!0)},o(o){$(n),t=!1},d(o){o&&m(l),n.d(o)}}}function li(i){let e,l;return e=new ou({props:{namespace:i[0],datasetName:i[1]}}),{c(){H(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.namespace=t[0]),n&2&&(o.datasetName=t[1]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function cu(i){let e,l,t,n;const o=[uu,fu],s=[];function r(a,f){return a[2]&&a[0]&&a[1]?0:1}return e=r(i),l=s[e]=o[e](i),{c(){l.c(),t=de()},l(a){l.l(a),t=de()},m(a,f){s[e].m(a,f),N(a,t,f),n=!0},p(a,[f]){let u=e;e=r(a),e===u?s[e].p(a,f):(ie(),$(s[u],1,1,()=>{s[u]=null}),se(),l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){$(l),n=!1},d(a){s[e].d(a),a&&m(t)}}}function du(i,e,l){let t,n,o,s,r,a,f,u,_=X,c=()=>(_(),_=Te(f,A=>l(10,u=A)),f),d,h=X,b=()=>(h(),h=Te(t,A=>l(11,d=A)),t),w,k=X,g=()=>(k(),k=Te(a,A=>l(12,w=A)),a),E,y=X,M=()=>(y(),y=Te(s,A=>l(13,E=A)),s),C,I=X,B=()=>(I(),I=Te(o,A=>l(14,C=A)),o),x;i.$$.on_destroy.push(()=>_()),i.$$.on_destroy.push(()=>h()),i.$$.on_destroy.push(()=>k()),i.$$.on_destroy.push(()=>y()),i.$$.on_destroy.push(()=>I());let Z,F;const j=zs();return be(i,j,A=>l(15,x=A)),i.$$.update=()=>{if(i.$$.dirty&32771&&x.page==="datasets")if(x.identifier==""||x.identifier==null)l(0,Z=void 0),l(1,F=void 0);else{const[A,ee]=x.identifier.split("/");(Z!=A||F!=ee)&&(l(0,Z=A),l(1,F=ee))}if(i.$$.dirty&3&&b(l(2,t=Z&&F?Rs(Z,F):null)),i.$$.dirty&7&&t!=null){const A=Ti(Z,F);Fs("datasets",`${Z}/${F}`,t,j,ee=>Hs(ee,A),ee=>Bs(ee,A))}i.$$.dirty&4&&t!=null&&Ps(t),i.$$.dirty&3&&l(8,n=Z&&F?Ls(Z,F):null),i.$$.dirty&256&&n!=null&&As(n),i.$$.dirty&3&&B(l(6,o=Z&&F?ot(Z,F):null)),i.$$.dirty&16640&&n&&C!=null&&C.data&&n.setSettings(C.data),i.$$.dirty&3&&M(l(5,s=Z&&F?Bt(Z,F):null)),i.$$.dirty&8448&&n&&E!=null&&E.data&&n.setSchema(E.data),i.$$.dirty&8192&&l(9,r=E!=null&&E.data?Os("string",E.data):null),i.$$.dirty&515&&g(l(4,a=Z&&F&&r?qs(Z,F,r.map(A=>A.path)):null)),i.$$.dirty&4352&&n&&w!=null&&w.data&&!w.isFetching&&n.setStats(w.data),i.$$.dirty&2051&&c(l(3,f=Z&&F&&d?js(Z,F,Us(d)):null)),i.$$.dirty&1280&&n&&u!=null&&u.data&&n.setSelectRowsSchema(u)},[Z,F,t,f,a,s,o,j,n,r,u,d,w,E,C,x]}class Iu extends we{constructor(e){super(),ke(this,e,du,cu,ve,{})}}export{Iu as component};
