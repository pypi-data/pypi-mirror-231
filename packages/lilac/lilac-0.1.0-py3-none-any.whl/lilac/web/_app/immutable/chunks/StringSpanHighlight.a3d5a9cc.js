import{S as te,i as le,s as ie,E as O,k as L,a as U,l as I,m as E,c as W,h,F as Me,G as V,n as P,b as B,a0 as k,al as ze,H as F,g as C,v as Q,d as A,f as Z,L as ce,M as Ie,N as q,ah as pt,Q as x,D as kt,I as St,J as wt,K as Et,q as z,r as D,u as Y,y as ae,z as se,A as oe,B as re,R as J,w as Tt,Z as G,_ as K,$ as fe,a1 as j,a7 as ve,V as yt,a2 as ht,a3 as De,C as Nt,W as mt,X as Ct,p as ee,ag as Vt,an as Pt,a4 as Bt,O as Re,ai as Ht,e as Se,a8 as Oe}from"./index.8706e7a3.js";import{W as Lt,aE as Fe,d as It,h as _t,L as At,aD as Be,a3 as bt,aj as gt,ar as Mt,ah as ge,a6 as ke,bg as zt,at as Dt,ag as Rt,aB as Ot,bB as Ft,B as vt,bv as Yt}from"./Commands.c3f29aef.js";import{f as Ye,g as jt}from"./notificationsStore.2895bc3e.js";const Ut=i=>({}),je=i=>({});function Ue(i){let e,t,l,a;const f=i[20].labelText,o=kt(f,i,i[19],je),n=o||Wt(i);let r=i[5]&&We(i);return{c(){e=L("div"),t=L("label"),n&&n.c(),l=U(),r&&r.c(),this.h()},l(s){e=I(s,"DIV",{});var u=E(e);t=I(u,"LABEL",{for:!0});var d=E(t);n&&n.l(d),d.forEach(h),l=W(u),r&&r.l(u),u.forEach(h),this.h()},h(){P(t,"for",i[14]),V(t,"bx--label",!0),V(t,"bx--visually-hidden",i[11]),V(t,"bx--label--disabled",i[7]),V(e,"bx--text-area__label-wrapper",!0)},m(s,u){B(s,e,u),k(e,t),n&&n.m(t,null),k(e,l),r&&r.m(e,null),a=!0},p(s,u){o?o.p&&(!a||u[0]&524288)&&St(o,f,s,s[19],a?Et(f,s[19],u,Ut):wt(s[19]),je):n&&n.p&&(!a||u[0]&1024)&&n.p(s,a?u:[-1,-1]),(!a||u[0]&16384)&&P(t,"for",s[14]),(!a||u[0]&2048)&&V(t,"bx--visually-hidden",s[11]),(!a||u[0]&128)&&V(t,"bx--label--disabled",s[7]),s[5]?r?r.p(s,u):(r=We(s),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(s){a||(C(n,s),a=!0)},o(s){A(n,s),a=!1},d(s){s&&h(e),n&&n.d(s),r&&r.d()}}}function Wt(i){let e;return{c(){e=z(i[10])},l(t){e=D(t,i[10])},m(t,l){B(t,e,l)},p(t,l){l[0]&1024&&Y(e,t[10])},d(t){t&&h(e)}}}function We(i){let e,t=i[0].length+"",l,a,f;return{c(){e=L("div"),l=z(t),a=z("/"),f=z(i[5]),this.h()},l(o){e=I(o,"DIV",{});var n=E(e);l=D(n,t),a=D(n,"/"),f=D(n,i[5]),n.forEach(h),this.h()},h(){V(e,"bx--label",!0),V(e,"bx--label--disabled",i[7])},m(o,n){B(o,e,n),k(e,l),k(e,a),k(e,f)},p(o,n){n[0]&1&&t!==(t=o[0].length+"")&&Y(l,t),n[0]&32&&Y(f,o[5]),n[0]&128&&V(e,"bx--label--disabled",o[7])},d(o){o&&h(e)}}}function Xe(i){let e,t;return e=new Lt({props:{class:"bx--text-area__invalid-icon"}}),{c(){ae(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,a){oe(e,l,a),t=!0},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function qe(i){let e,t;return{c(){e=L("div"),t=z(i[9]),this.h()},l(l){e=I(l,"DIV",{});var a=E(e);t=D(a,i[9]),a.forEach(h),this.h()},h(){V(e,"bx--form__helper-text",!0),V(e,"bx--form__helper-text--disabled",i[7])},m(l,a){B(l,e,a),k(e,t)},p(l,a){a[0]&512&&Y(t,l[9]),a[0]&128&&V(e,"bx--form__helper-text--disabled",l[7])},d(l){l&&h(e)}}}function Ge(i){let e,t;return{c(){e=L("div"),t=z(i[13]),this.h()},l(l){e=I(l,"DIV",{id:!0});var a=E(e);t=D(a,i[13]),a.forEach(h),this.h()},h(){P(e,"id",i[16]),V(e,"bx--form-requirement",!0)},m(l,a){B(l,e,a),k(e,t)},p(l,a){a[0]&8192&&Y(t,l[13]),a[0]&65536&&P(e,"id",l[16])},d(l){l&&h(e)}}}function Xt(i){let e,t,l,a,f,o,n,r,s,u,d,c,b,T,m=(i[10]||i[17].labelText)&&!i[11]&&Ue(i),g=i[12]&&Xe(),y=[{"aria-invalid":o=i[12]||void 0},{"aria-describedby":n=i[12]?i[16]:void 0},{disabled:i[7]},{id:i[14]},{name:i[15]},{cols:i[3]},{rows:i[4]},{placeholder:i[2]},{readOnly:i[8]},{maxlength:r=i[5]??void 0},i[18]],H={};for(let v=0;v<y.length;v+=1)H=O(H,y[v]);let w=!i[12]&&i[9]&&qe(i),N=i[12]&&Ge(i);return{c(){e=L("div"),m&&m.c(),t=U(),l=L("div"),g&&g.c(),a=U(),f=L("textarea"),u=U(),w&&w.c(),d=U(),N&&N.c(),this.h()},l(v){e=I(v,"DIV",{});var S=E(e);m&&m.l(S),t=W(S),l=I(S,"DIV",{"data-invalid":!0});var R=E(l);g&&g.l(R),a=W(R),f=I(R,"TEXTAREA",{"aria-invalid":!0,"aria-describedby":!0,id:!0,name:!0,cols:!0,rows:!0,placeholder:!0,maxlength:!0}),E(f).forEach(h),R.forEach(h),u=W(S),w&&w.l(S),d=W(S),N&&N.l(S),S.forEach(h),this.h()},h(){Me(f,H),V(f,"bx--text-area",!0),V(f,"bx--text-area--light",i[6]),V(f,"bx--text-area--invalid",i[12]),P(l,"data-invalid",s=i[12]||void 0),V(l,"bx--text-area__wrapper",!0),V(e,"bx--form-item",!0)},m(v,S){B(v,e,S),m&&m.m(e,null),k(e,t),k(e,l),g&&g.m(l,null),k(l,a),k(l,f),f.autofocus&&f.focus(),i[32](f),ze(f,i[0]),k(e,u),w&&w.m(e,null),k(e,d),N&&N.m(e,null),c=!0,b||(T=[F(f,"input",i[33]),F(f,"change",i[25]),F(f,"input",i[26]),F(f,"keydown",i[27]),F(f,"keyup",i[28]),F(f,"focus",i[29]),F(f,"blur",i[30]),F(f,"paste",i[31]),F(e,"click",i[21]),F(e,"mouseover",i[22]),F(e,"mouseenter",i[23]),F(e,"mouseleave",i[24])],b=!0)},p(v,S){(v[10]||v[17].labelText)&&!v[11]?m?(m.p(v,S),S[0]&134144&&C(m,1)):(m=Ue(v),m.c(),C(m,1),m.m(e,t)):m&&(Q(),A(m,1,1,()=>{m=null}),Z()),v[12]?g?S[0]&4096&&C(g,1):(g=Xe(),g.c(),C(g,1),g.m(l,a)):g&&(Q(),A(g,1,1,()=>{g=null}),Z()),Me(f,H=ce(y,[(!c||S[0]&4096&&o!==(o=v[12]||void 0))&&{"aria-invalid":o},(!c||S[0]&69632&&n!==(n=v[12]?v[16]:void 0))&&{"aria-describedby":n},(!c||S[0]&128)&&{disabled:v[7]},(!c||S[0]&16384)&&{id:v[14]},(!c||S[0]&32768)&&{name:v[15]},(!c||S[0]&8)&&{cols:v[3]},(!c||S[0]&16)&&{rows:v[4]},(!c||S[0]&4)&&{placeholder:v[2]},(!c||S[0]&256)&&{readOnly:v[8]},(!c||S[0]&32&&r!==(r=v[5]??void 0))&&{maxlength:r},S[0]&262144&&v[18]])),S[0]&1&&ze(f,v[0]),V(f,"bx--text-area",!0),V(f,"bx--text-area--light",v[6]),V(f,"bx--text-area--invalid",v[12]),(!c||S[0]&4096&&s!==(s=v[12]||void 0))&&P(l,"data-invalid",s),!v[12]&&v[9]?w?w.p(v,S):(w=qe(v),w.c(),w.m(e,d)):w&&(w.d(1),w=null),v[12]?N?N.p(v,S):(N=Ge(v),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},i(v){c||(C(m),C(g),c=!0)},o(v){A(m),A(g),c=!1},d(v){v&&h(e),m&&m.d(),g&&g.d(),i[32](null),w&&w.d(),N&&N.d(),b=!1,Ie(T)}}}function qt(i,e,t){let l;const a=["value","placeholder","cols","rows","maxCount","light","disabled","readonly","helperText","labelText","hideLabel","invalid","invalidText","id","name","ref"];let f=q(e,a),{$$slots:o={},$$scope:n}=e;const r=pt(o);let{value:s=""}=e,{placeholder:u=""}=e,{cols:d=50}=e,{rows:c=4}=e,{maxCount:b=void 0}=e,{light:T=!1}=e,{disabled:m=!1}=e,{readonly:g=!1}=e,{helperText:y=""}=e,{labelText:H=""}=e,{hideLabel:w=!1}=e,{invalid:N=!1}=e,{invalidText:v=""}=e,{id:S="ccs-"+Math.random().toString(36)}=e,{name:R=void 0}=e,{ref:X=null}=e;function ne(_){J.call(this,i,_)}function he(_){J.call(this,i,_)}function $(_){J.call(this,i,_)}function ue(_){J.call(this,i,_)}function de(_){J.call(this,i,_)}function we(_){J.call(this,i,_)}function Ee(_){J.call(this,i,_)}function Te(_){J.call(this,i,_)}function ye(_){J.call(this,i,_)}function Ne(_){J.call(this,i,_)}function Ce(_){J.call(this,i,_)}function p(_){Tt[_?"unshift":"push"](()=>{X=_,t(1,X)})}function M(){s=this.value,t(0,s)}return i.$$set=_=>{e=O(O({},e),x(_)),t(18,f=q(e,a)),"value"in _&&t(0,s=_.value),"placeholder"in _&&t(2,u=_.placeholder),"cols"in _&&t(3,d=_.cols),"rows"in _&&t(4,c=_.rows),"maxCount"in _&&t(5,b=_.maxCount),"light"in _&&t(6,T=_.light),"disabled"in _&&t(7,m=_.disabled),"readonly"in _&&t(8,g=_.readonly),"helperText"in _&&t(9,y=_.helperText),"labelText"in _&&t(10,H=_.labelText),"hideLabel"in _&&t(11,w=_.hideLabel),"invalid"in _&&t(12,N=_.invalid),"invalidText"in _&&t(13,v=_.invalidText),"id"in _&&t(14,S=_.id),"name"in _&&t(15,R=_.name),"ref"in _&&t(1,X=_.ref),"$$scope"in _&&t(19,n=_.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&16384&&t(16,l=`error-${S}`)},[s,X,u,d,c,b,T,m,g,y,H,w,N,v,S,R,l,r,f,n,o,ne,he,$,ue,de,we,Ee,Te,ye,Ne,Ce,p,M]}class Gt extends te{constructor(e){super(),le(this,e,qt,Xt,ie,{value:0,placeholder:2,cols:3,rows:4,maxCount:5,light:6,disabled:7,readonly:8,helperText:9,labelText:10,hideLabel:11,invalid:12,invalidText:13,id:14,name:15,ref:1},null,[-1,-1])}}const zl=Gt;function Ke(i){let e,t;return{c(){e=G("title"),t=z(i[1])},l(l){e=K(l,"title",{});var a=E(e);t=D(a,i[1]),a.forEach(h)},m(l,a){B(l,e,a),k(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&h(e)}}}function Kt(i){let e,t,l=i[1]&&Ke(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let o=0;o<a.length;o+=1)f=O(f,a[o]);return{c(){e=G("svg"),l&&l.c(),t=G("path"),this.h()},l(o){e=K(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=E(e);l&&l.l(n),t=K(n,"path",{d:!0}),E(t).forEach(h),n.forEach(h),this.h()},h(){P(t,"d","M24.59 16.59L17 24.17 17 4 15 4 15 24.17 7.41 16.59 6 18 16 28 26 18 24.59 16.59z"),fe(e,f)},m(o,n){B(o,e,n),l&&l.m(e,null),k(e,t)},p(o,[n]){o[1]?l?l.p(o,n):(l=Ke(o),l.c(),l.m(e,t)):l&&(l.d(1),l=null),fe(e,f=ce(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:o[0]},n&1&&{height:o[0]},n&4&&o[2],n&8&&o[3]]))},i:j,o:j,d(o){o&&h(e),l&&l.d()}}}function Jt(i,e,t){let l,a;const f=["size","title"];let o=q(e,f),{size:n=16}=e,{title:r=void 0}=e;return i.$$set=s=>{t(5,e=O(O({},e),x(s))),t(3,o=q(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,r=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=x(e),[n,r,a,o,l]}class Qt extends te{constructor(e){super(),le(this,e,Jt,Kt,ie,{size:0,title:1})}}function Je(i){let e,t;return{c(){e=G("title"),t=z(i[1])},l(l){e=K(l,"title",{});var a=E(e);t=D(a,i[1]),a.forEach(h)},m(l,a){B(l,e,a),k(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&h(e)}}}function Zt(i){let e,t,l=i[1]&&Je(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let o=0;o<a.length;o+=1)f=O(f,a[o]);return{c(){e=G("svg"),l&&l.c(),t=G("path"),this.h()},l(o){e=K(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=E(e);l&&l.l(n),t=K(n,"path",{d:!0}),E(t).forEach(h),n.forEach(h),this.h()},h(){P(t,"d","M16 4L6 14 7.41 15.41 15 7.83 15 28 17 28 17 7.83 24.59 15.41 26 14 16 4z"),fe(e,f)},m(o,n){B(o,e,n),l&&l.m(e,null),k(e,t)},p(o,[n]){o[1]?l?l.p(o,n):(l=Je(o),l.c(),l.m(e,t)):l&&(l.d(1),l=null),fe(e,f=ce(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:o[0]},n&1&&{height:o[0]},n&4&&o[2],n&8&&o[3]]))},i:j,o:j,d(o){o&&h(e),l&&l.d()}}}function xt(i,e,t){let l,a;const f=["size","title"];let o=q(e,f),{size:n=16}=e,{title:r=void 0}=e;return i.$$set=s=>{t(5,e=O(O({},e),x(s))),t(3,o=q(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,r=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=x(e),[n,r,a,o,l]}class $t extends te{constructor(e){super(),le(this,e,xt,Zt,ie,{size:0,title:1})}}function Qe(i){let e,t;return{c(){e=G("title"),t=z(i[1])},l(l){e=K(l,"title",{});var a=E(e);t=D(a,i[1]),a.forEach(h)},m(l,a){B(l,e,a),k(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&h(e)}}}function el(i){let e,t,l=i[1]&&Qe(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let o=0;o<a.length;o+=1)f=O(f,a[o]);return{c(){e=G("svg"),l&&l.c(),t=G("path"),this.h()},l(o){e=K(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=E(e);l&&l.l(n),t=K(n,"path",{d:!0}),E(t).forEach(h),n.forEach(h),this.h()},h(){P(t,"d","M2 2H7V16H2zM23 2H9V16.8027l3.0422 4.5635.8453 5.9165A2.0094 2.0094 0 0014.8672 29H15a3.0033 3.0033 0 003-3V20h8a4.0045 4.0045 0 004-4V9A7.0078 7.0078 0 0023 2z"),fe(e,f)},m(o,n){B(o,e,n),l&&l.m(e,null),k(e,t)},p(o,[n]){o[1]?l?l.p(o,n):(l=Qe(o),l.c(),l.m(e,t)):l&&(l.d(1),l=null),fe(e,f=ce(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:o[0]},n&1&&{height:o[0]},n&4&&o[2],n&8&&o[3]]))},i:j,o:j,d(o){o&&h(e),l&&l.d()}}}function tl(i,e,t){let l,a;const f=["size","title"];let o=q(e,f),{size:n=16}=e,{title:r=void 0}=e;return i.$$set=s=>{t(5,e=O(O({},e),x(s))),t(3,o=q(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,r=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=x(e),[n,r,a,o,l]}class ll extends te{constructor(e){super(),le(this,e,tl,el,ie,{size:0,title:1})}}function Ze(i){let e,t;return{c(){e=G("title"),t=z(i[1])},l(l){e=K(l,"title",{});var a=E(e);t=D(a,i[1]),a.forEach(h)},m(l,a){B(l,e,a),k(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&h(e)}}}function il(i){let e,t,l=i[1]&&Ze(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let o=0;o<a.length;o+=1)f=O(f,a[o]);return{c(){e=G("svg"),l&&l.c(),t=G("path"),this.h()},l(o){e=K(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=E(e);l&&l.l(n),t=K(n,"path",{d:!0}),E(t).forEach(h),n.forEach(h),this.h()},h(){P(t,"d","M2 16H7V30H2zM23 30H9V15.1973l3.0422-4.5635.8453-5.9165A2.0094 2.0094 0 0114.8672 3H15a3.0033 3.0033 0 013 3v6h8a4.0045 4.0045 0 014 4v7A7.0078 7.0078 0 0123 30z"),fe(e,f)},m(o,n){B(o,e,n),l&&l.m(e,null),k(e,t)},p(o,[n]){o[1]?l?l.p(o,n):(l=Ze(o),l.c(),l.m(e,t)):l&&(l.d(1),l=null),fe(e,f=ce(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:o[0]},n&1&&{height:o[0]},n&4&&o[2],n&8&&o[3]]))},i:j,o:j,d(o){o&&h(e),l&&l.d()}}}function nl(i,e,t){let l,a;const f=["size","title"];let o=q(e,f),{size:n=16}=e,{title:r=void 0}=e;return i.$$set=s=>{t(5,e=O(O({},e),x(s))),t(3,o=q(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,r=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=x(e),[n,r,a,o,l]}class al extends te{constructor(e){super(),le(this,e,nl,il,ie,{size:0,title:1})}}function sl(i,e){const t=l=>i&&!i.contains(l.target)&&!l.defaultPrevented&&e();return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function ol(i){let e=(i[1]?"":i[0])+"",t;return{c(){t=z(e)},l(l){t=D(l,e)},m(l,a){B(l,t,a)},p(l,a){a&3&&e!==(e=(l[1]?"":l[0])+"")&&Y(t,e)},d(l){l&&h(t)}}}function rl(i){let e,t,l,a,f;const o=[i[2],{type:"purple"},{icon:Fe}];let n={$$slots:{default:[ol]},$$scope:{ctx:i}};for(let r=0;r<o.length;r+=1)n=O(n,o[r]);return t=new It({props:n}),{c(){e=L("div"),ae(t.$$.fragment),this.h()},l(r){e=I(r,"DIV",{class:!0});var s=E(e);se(t.$$.fragment,s),s.forEach(h),this.h()},h(){P(e,"class","embedding-badge truncate"),V(e,"embedding-badge-nolabel",i[1])},m(r,s){B(r,e,s),oe(t,e,null),l=!0,a||(f=ve(_t.call(null,e,{text:"Embedding index"})),a=!0)},p(r,[s]){const u=s&4?ce(o,[s&4&&yt(r[2]),o[1],s&0&&{icon:Fe}]):{};s&11&&(u.$$scope={dirty:s,ctx:r}),t.$set(u),(!l||s&2)&&V(e,"embedding-badge-nolabel",r[1])},i(r){l||(C(t.$$.fragment,r),l=!0)},o(r){A(t.$$.fragment,r),l=!1},d(r){r&&h(e),re(t),a=!1,f()}}}function fl(i,e,t){const l=["embedding","hideEmbeddingName"];let a=q(e,l),{embedding:f}=e,{hideEmbeddingName:o=!1}=e;return i.$$set=n=>{e=O(O({},e),x(n)),t(2,a=q(e,l)),"embedding"in n&&t(0,f=n.embedding),"hideEmbeddingName"in n&&t(1,o=n.hideEmbeddingName)},[f,o,a]}class ul extends te{constructor(e){super(),le(this,e,fl,rl,ie,{embedding:0,hideEmbeddingName:1})}}function xe(i,e,t){const l=i.slice();return l[12]=e[t],l}function $e(i){let e,t,l=i[0].conceptNamespace+"",a,f,o=i[0].conceptName+"",n,r,s,u,d,c,b,T,m,g,y;return d=new al({}),T=new ll({}),{c(){e=L("div"),t=L("div"),a=z(l),f=z(" / "),n=z(o),r=U(),s=L("div"),u=L("button"),ae(d.$$.fragment),c=U(),b=L("button"),ae(T.$$.fragment),this.h()},l(H){e=I(H,"DIV",{class:!0});var w=E(e);t=I(w,"DIV",{class:!0});var N=E(t);a=D(N,l),f=D(N," / "),n=D(N,o),N.forEach(h),r=W(w),s=I(w,"DIV",{class:!0});var v=E(s);u=I(v,"BUTTON",{class:!0});var S=E(u);se(d.$$.fragment,S),S.forEach(h),c=W(v),b=I(v,"BUTTON",{class:!0});var R=E(b);se(T.$$.fragment,R),R.forEach(h),v.forEach(h),w.forEach(h),this.h()},h(){P(t,"class","flex-grow"),P(u,"class","p-1"),P(b,"class","p-1"),P(s,"class","shrink-0"),P(e,"class","flex flex-row items-center justify-between gap-x-4 p-2")},m(H,w){B(H,e,w),k(e,t),k(t,a),k(t,f),k(t,n),k(e,r),k(e,s),k(s,u),oe(d,u,null),k(s,c),k(s,b),oe(T,b,null),m=!0,g||(y=[F(u,"click",i[8]),F(b,"click",i[9])],g=!0)},p(H,w){(!m||w&1)&&l!==(l=H[0].conceptNamespace+"")&&Y(a,l),(!m||w&1)&&o!==(o=H[0].conceptName+"")&&Y(n,o)},i(H){m||(C(d.$$.fragment,H),C(T.$$.fragment,H),m=!0)},o(H){A(d.$$.fragment,H),A(T.$$.fragment,H),m=!1},d(H){H&&h(e),re(d),re(T),g=!1,Ie(y)}}}function et(i){let e,t=[],l=new Map,a,f=i[2];const o=n=>n[12];for(let n=0;n<f.length;n+=1){let r=xe(i,f,n),s=o(r);l.set(s,t[n]=tt(s,r))}return{c(){e=L("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=I(n,"DIV",{class:!0});var r=E(e);for(let s=0;s<t.length;s+=1)t[s].l(r);r.forEach(h),this.h()},h(){P(e,"class","more-button flex flex-col")},m(n,r){B(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);a=!0},p(n,r){r&29&&(f=n[2],Q(),t=mt(t,r,o,1,n,f,l,e,Ct,tt,null,xe),Z())},i(n){if(!a){for(let r=0;r<f.length;r+=1)C(t[r]);a=!0}},o(n){for(let r=0;r<t.length;r+=1)A(t[r]);a=!1},d(n){n&&h(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function tt(i,e){let t,l,a,f,o,n,r,s,u;o=new ul({props:{class:"hover:cursor-pointer",embedding:e[12]}});function d(){return e[10](e[12])}return{key:i,first:null,c(){t=L("button"),l=L("div"),a=z("Find similar"),f=U(),ae(o.$$.fragment),n=U(),this.h()},l(c){t=I(c,"BUTTON",{class:!0});var b=E(t);l=I(b,"DIV",{});var T=E(l);a=D(T,"Find similar"),T.forEach(h),f=W(b),se(o.$$.fragment,b),n=W(b),b.forEach(h),this.h()},h(){P(t,"class","flex w-full items-center justify-between"),this.first=t},m(c,b){B(c,t,b),k(t,l),k(l,a),k(t,f),oe(o,t,null),k(t,n),r=!0,s||(u=F(t,"click",d),s=!0)},p(c,b){e=c;const T={};b&4&&(T.embedding=e[12]),o.$set(T)},i(c){r||(C(o.$$.fragment,c),r=!0)},o(c){A(o.$$.fragment,c),r=!1},d(c){c&&h(t),re(o),s=!1,u()}}}function dl(i){let e,t,l,a,f,o,n,r=i[0].conceptName!=null&&i[0].conceptNamespace!=null&&$e(i),s=i[3]!=null&&et(i);return{c(){e=L("div"),r&&r.c(),t=U(),s&&s.c(),this.h()},l(u){e=I(u,"DIV",{style:!0,class:!0});var d=E(e);r&&r.l(d),t=W(d),s&&s.l(d),d.forEach(h),this.h()},h(){P(e,"style",l=i[1]!=null?`left: ${i[1].x}px; top: ${i[1].y}px`:""),P(e,"class","absolute z-10 inline-flex -translate-x-1/2 translate-y-6 flex-col divide-y divide-gray-200 rounded border border-gray-200 bg-white shadow")},m(u,d){B(u,e,d),r&&r.m(e,null),k(e,t),s&&s.m(e,null),f=!0,o||(n=ve(sl.call(null,e,i[11])),o=!0)},p(u,[d]){u[0].conceptName!=null&&u[0].conceptNamespace!=null?r?(r.p(u,d),d&1&&C(r,1)):(r=$e(u),r.c(),C(r,1),r.m(e,t)):r&&(Q(),A(r,1,1,()=>{r=null}),Z()),u[3]!=null?s?(s.p(u,d),d&8&&C(s,1)):(s=et(u),s.c(),C(s,1),s.m(e,null)):s&&(Q(),A(s,1,1,()=>{s=null}),Z()),(!f||d&2&&l!==(l=u[1]!=null?`left: ${u[1].x}px; top: ${u[1].y}px`:""))&&P(e,"style",l)},i(u){f||(C(r),C(s),ht(()=>{f&&(a||(a=De(e,Ye,{duration:60},!0)),a.run(1))}),f=!0)},o(u){A(r),A(s),a||(a=De(e,Ye,{duration:60},!1)),a.run(0),f=!1},d(u){u&&h(e),r&&r.d(),s&&s.d(),u&&a&&a.end(),o=!1,n()}}}function cl(i,e,t){let{details:l}=e,{clickPosition:a}=e,{embeddings:f}=e,{addConceptLabel:o}=e,{findSimilar:n}=e,{addNotification:r}=e;const s=Nt();function u(m){if(!l.conceptName||!l.conceptNamespace)throw Error("Label could not be added, no active concept.");o(l.conceptNamespace,l.conceptName,l.text,m),r({kind:"success",title:`[${m===!0?"Positive":"Negative"}] Concept label added`,subtitle:At(l.conceptNamespace,l.conceptName),message:l.text}),s("click")}const d=()=>u(!0),c=()=>u(!1),b=m=>{n&&n(m,l.text),s("click")},T=()=>s("close");return i.$$set=m=>{"details"in m&&t(0,l=m.details),"clickPosition"in m&&t(1,a=m.clickPosition),"embeddings"in m&&t(2,f=m.embeddings),"addConceptLabel"in m&&t(6,o=m.addConceptLabel),"findSimilar"in m&&t(3,n=m.findSimilar),"addNotification"in m&&t(7,r=m.addNotification)},[l,a,f,n,s,u,o,r,d,c,b,T]}class hl extends te{constructor(e){super(),le(this,e,cl,dl,ie,{details:0,clickPosition:1,embeddings:2,addConceptLabel:6,findSimilar:3,addNotification:7})}}function ml(i,e){let t,l=e;i.addEventListener("click",o=>a(o));function a(o){l.disabled||(t=new hl({props:{details:l.details(),clickPosition:{x:o.clientX,y:o.clientY},embeddings:l.embeddings,addConceptLabel:l.addConceptLabel,addNotification:l.addNotification,findSimilar:l.findSimilar},target:document.body}),t.$on("close",f),t.$on("click",f))}function f(){t==null||t.$destroy(),t=void 0}return{update(o){l=o,t==null||t.$set({details:l.details()})},destroy(){f()}}}const Pe=.5,lt=.3,_l=.8,it="#3366cc";function He(i){return`rgba(180,215,255,${i})`}function Le(i){let e=0;if(i>Pe){const t=(i-Pe)/(1-Pe);e=lt+t*(_l-lt)}return He(e)}function nt(i,e,t){const l=i.slice();return l[7]=e[t],l}function at(i,e){let t,l,a=e[7].info.name+"",f,o,n,r,s=st(e[7])+"",u,d;return{key:i,first:null,c(){t=L("div"),l=L("div"),f=z(a),o=U(),n=L("div"),r=L("span"),u=z(s),d=U(),this.h()},l(c){t=I(c,"DIV",{class:!0});var b=E(t);l=I(b,"DIV",{class:!0});var T=E(l);f=D(T,a),T.forEach(h),o=W(b),n=I(b,"DIV",{class:!0});var m=E(n);r=I(m,"SPAN",{class:!0});var g=E(r);u=D(g,s),g.forEach(h),m.forEach(h),d=W(b),b.forEach(h),this.h()},h(){P(l,"class","named-value-name table-cell max-w-xs truncate pr-2 svelte-1689hje"),P(r,"class","px-1"),V(r,"font-bold",e[7].info.type==="keyword"||e[7].info.type==="metadata"&&!Be(e[7].info.dtype)),ee(r,"background-color",(e[7].info.type==="concept_score"||e[7].info.type==="semantic_similarity")&&typeof e[7].value=="number"?Le(e[7].value):""),P(n,"class","table-cell rounded text-right"),P(t,"class","table-row"),this.first=t},m(c,b){B(c,t,b),k(t,l),k(l,f),k(t,o),k(t,n),k(n,r),k(r,u),k(t,d)},p(c,b){e=c,b&1&&a!==(a=e[7].info.name+"")&&Y(f,a),b&1&&s!==(s=st(e[7])+"")&&Y(u,s),b&1&&V(r,"font-bold",e[7].info.type==="keyword"||e[7].info.type==="metadata"&&!Be(e[7].info.dtype)),b&1&&ee(r,"background-color",(e[7].info.type==="concept_score"||e[7].info.type==="semantic_similarity")&&typeof e[7].value=="number"?Le(e[7].value):"")},d(c){c&&h(t)}}}function bl(i){let e,t,l=[],a=new Map,f,o=`${i[4]}px`,n=`${Math.min(i[1],i[3]-i[2]-20)}px`,r=i[0];const s=u=>u[7];for(let u=0;u<r.length;u+=1){let d=nt(i,r,u),c=s(d);a.set(c,l[u]=at(c,d))}return{c(){e=L("div"),t=L("div");for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){e=I(u,"DIV",{role:!0,class:!0});var d=E(e);t=I(d,"DIV",{class:!0});var c=E(t);for(let b=0;b<l.length;b+=1)l[b].l(c);c.forEach(h),d.forEach(h),this.h()},h(){P(t,"class","table border-spacing-y-2"),P(e,"role","tooltip"),P(e,"class","absolute max-w-fit -translate-y-full break-words border border-gray-300 bg-white px-2 shadow-md"),ht(()=>i[6].call(e)),V(e,"hidden",i[0].length===0),ee(e,"top",o),ee(e,"left",n)},m(u,d){B(u,e,d),k(e,t);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(t,null);f=Vt(e,i[6].bind(e))},p(u,[d]){d&1&&(r=u[0],l=mt(l,d,s,1,u,r,a,t,Pt,at,null,nt)),d&1&&V(e,"hidden",u[0].length===0),d&6&&n!==(n=`${Math.min(u[1],u[3]-u[2]-20)}px`)&&ee(e,"left",n)},i:j,o:j,d(u){u&&h(e);for(let d=0;d<l.length;d+=1)l[d].d();f()}}}function st(i){return typeof i.value=="number"?i.value.toFixed(3):i.info.dtype==="string_span"?"true":i.value}function gl(i,e,t){let{namedValues:l}=e,{x:a}=e,{y:f}=e;const o=window.innerWidth;let n=0;const r=f-1;function s(){n=this.clientWidth,t(2,n)}return i.$$set=u=>{"namedValues"in u&&t(0,l=u.namedValues),"x"in u&&t(1,a=u.x),"y"in u&&t(5,f=u.y)},[l,a,n,o,r,f,s]}class vl extends te{constructor(e){super(),le(this,e,gl,bl,ie,{namedValues:0,x:1,y:5})}}function pl(i,e){let t,l=e;const a=()=>o();l.isHovered&&f();function f(){const n=l.namedValues.filter(c=>Array.from(l.spansHovered).some(b=>{const T=bt(b);return gt(c.specificPath.slice(0,T.length),T)}));l.itemScrollContainer!=null&&l.itemScrollContainer.addEventListener("scroll",a);const r=i.getBoundingClientRect(),s=window.getComputedStyle(i),u=parseInt(s.getPropertyValue("line-height")),d=r.height>u?r.x+i.offsetLeft||i.clientLeft:r.x;t=new vl({props:{namedValues:n,x:d,y:r.top},target:document.body})}function o(){var n;t==null||t.$destroy(),(n=l.itemScrollContainer)==null||n.removeEventListener("scroll",a)}return{update(n){o(),l=n,l.isHovered&&f()},destroy(){o()}}}const kl=500,pe=100;function Sl(i,e,t){const l=[],a=new Set;for(const f of i){let o=!1;const n=[];for(const y of f.paths)a.has(y)||(n.push(y),a.add(y));const r=[],s=[];let u=-1/0;for(const[y,H]of Object.entries(f.originalSpans)){const w=e[y],N=bt(y);if(!(w==null||w.length===0))for(const v of H)for(const S of w){const R=S.path.slice(N.length),X=Mt(v,R);if(X==null)continue;const ne=ge.value(X);if(ne==null)continue;if(S.dtype==="float32"){const de=ge.value(X);de!=null&&(u=Math.max(u,de))}const he=ke(ge.path(v)),$=!n.includes(he),ue={value:ne,info:S,specificPath:ge.path(X)};$||r.push(ue),s.push(ue),S.type==="concept_score"||S.type==="semantic_similarity"?ne>.5&&(o=!0):o=!0}}const d=s.some(y=>y.info.type==="label"),c=s.some(y=>y.info.type==="leaf_span"),b=s.some(y=>y.info.type==="keyword"),T=s.some(y=>y.info.type==="metadata"&&!Be(y.info.dtype)),m=f.paths.some(y=>t.has(y)),g=m&&n.length>0&&Array.from(t).some(y=>n.includes(y));l.push({backgroundColor:Le(u),isBlackBolded:b||T||c,isHighlightBolded:d,isShownSnippet:o,snippetScore:u,namedValues:r,paths:f.paths,text:f.text,snippetText:f.text,originalSpans:f.originalSpans,isHovered:m,isFirstHover:g})}return l}function wl(i,e){var o,n,r;if(i=i.map(s=>{if(s.text.length>pe){const u={...s,text:s.text.slice(0,pe),snippetText:s.snippetText.slice(0,pe)},d=s.text.slice(pe).split(`
`),c=d.map((b,T)=>{const m=T!==d.length-1,g=b+(m?`
`:"");return{...s,text:g,snippetText:g,isShownSnippet:!1,namedValues:[]}});return[u,...c]}else return[s]}).flat(),e)return{snippetSpans:i.map(s=>({renderSpan:s,isShown:!0})),someSnippetsHidden:!1};const t=[];let l=0;for(const s of i)s.isShownSnippet&&(l+=s.text.length);const a=i.filter(s=>!s.isShownSnippet).sort((s,u)=>u.snippetScore-s.snippetScore);for(const s of a)if(s.isShownSnippet=!0,l+=s.text.length,l>kl)break;let f=!1;for(const[s,u]of i.entries())if(u.isShownSnippet)t.push({renderSpan:u,isShown:!0});else{const d=((o=i[s+1])==null?void 0:o.isShownSnippet)===!0,c=((n=i[s-1])==null?void 0:n.isShownSnippet)===!0,b=((r=t[t.length-1])==null?void 0:r.isShown)===!0;t.push({renderSpan:u,isShown:!1,isEllipsis:(d||c)&&b,hasNewline:u.text.includes(`
`)}),f=!0}return{snippetSpans:t,someSnippetsHidden:f}}function ot(i,e,t){const l=i.slice();l[33]=e[t];const a=l[33].renderSpan;return l[34]=a,l}function El(i){let e,t,l,a,f,o=i[33].hasNewline&&rt();return{c(){e=L("span"),t=z("..."),o&&o.c(),l=Se(),this.h()},l(n){e=I(n,"SPAN",{class:!0});var r=E(e);t=D(r,"..."),r.forEach(h),o&&o.l(n),l=Se(),this.h()},h(){P(e,"class","highlight-span text-sm leading-5 svelte-8ox5pu")},m(n,r){B(n,e,r),k(e,t),o&&o.m(n,r),B(n,l,r),a||(f=ve(_t.call(null,e,{text:`Some text was hidden to improve readability. 
Click "Show all" to show the entire document.`})),a=!0)},p(n,r){n[33].hasNewline?o||(o=rt(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null)},i:j,o:j,d(n){n&&h(e),o&&o.d(n),n&&h(l),a=!1,f()}}}function Tl(i){let e,t,l,a,f,o,n,r;const s=[Nl,yl],u=[];function d(m,g){return m[1]?0:1}t=d(i),l=u[t]=s[t](i);function c(){return i[27](i[34])}function b(){return i[28](i[34])}function T(){return i[29](i[34])}return{c(){e=L("span"),l.c(),this.h()},l(m){e=I(m,"SPAN",{class:!0});var g=E(e);l.l(g),g.forEach(h),this.h()},h(){P(e,"class","hover:cursor-poiner highlight-span break-words text-sm leading-5 svelte-8ox5pu"),V(e,"hover:cursor-pointer",i[0].length>0),V(e,"font-bold",i[34].isBlackBolded),V(e,"font-medium",i[34].isHighlightBolded&&!i[34].isBlackBolded),ee(e,"color",i[34].isHighlightBolded&&!i[34].isBlackBolded?it:""),ee(e,"background-color",i[34].isHovered?He(dt):i[34].backgroundColor)},m(m,g){B(m,e,g),u[t].m(e,null),o=!0,n||(r=[ve(a=pl.call(null,e,{namedValues:i[34].namedValues,isHovered:i[34].isFirstHover,spansHovered:i[4],itemScrollContainer:i[8]})),ve(f=ml.call(null,e,{details:c,findSimilar:i[3]!=null?i[15]:null,embeddings:i[2],addConceptLabel:i[13],addNotification:i[16]!=null?i[16].addNotification:ct,disabled:i[34].paths.length===0||i[2].length===0})),F(e,"mouseenter",b),F(e,"mouseleave",T)],n=!0)},p(m,g){i=m;let y=t;t=d(i),t===y?u[t].p(i,g):(Q(),A(u[y],1,1,()=>{u[y]=null}),Z(),l=u[t],l?l.p(i,g):(l=u[t]=s[t](i),l.c()),C(l,1),l.m(e,null)),a&&Oe(a.update)&&g[0]&400&&a.update.call(null,{namedValues:i[34].namedValues,isHovered:i[34].isFirstHover,spansHovered:i[4],itemScrollContainer:i[8]}),f&&Oe(f.update)&&g[0]&140&&f.update.call(null,{details:c,findSimilar:i[3]!=null?i[15]:null,embeddings:i[2],addConceptLabel:i[13],addNotification:i[16]!=null?i[16].addNotification:ct,disabled:i[34].paths.length===0||i[2].length===0}),(!o||g[0]&1)&&V(e,"hover:cursor-pointer",i[0].length>0),(!o||g[0]&128)&&V(e,"font-bold",i[34].isBlackBolded),(!o||g[0]&128)&&V(e,"font-medium",i[34].isHighlightBolded&&!i[34].isBlackBolded),g[0]&128&&ee(e,"color",i[34].isHighlightBolded&&!i[34].isBlackBolded?it:""),g[0]&128&&ee(e,"background-color",i[34].isHovered?He(dt):i[34].backgroundColor)},i(m){o||(C(l),o=!0)},o(m){A(l),o=!1},d(m){m&&h(e),u[t].d(),n=!1,Ie(r)}}}function rt(i){let e,t;return{c(){e=L("span"),t=L("br")},l(l){e=I(l,"SPAN",{});var a=E(e);t=I(a,"BR",{}),a.forEach(h)},m(l,a){B(l,e,a),k(e,t)},d(l){l&&h(e)}}}function yl(i){let e=i[34].snippetText+"",t;return{c(){t=z(e)},l(l){t=D(l,e)},m(l,a){B(l,t,a)},p(l,a){a[0]&128&&e!==(e=l[34].snippetText+"")&&Y(t,e)},i:j,o:j,d(l){l&&h(t)}}}function Nl(i){let e,t;return e=new Yt({props:{source:i[34].snippetText}}),{c(){ae(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,a){oe(e,l,a),t=!0},p(l,a){const f={};a[0]&128&&(f.source=l[34].snippetText),e.$set(f)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function ft(i){let e,t,l,a;const f=[Tl,El],o=[];function n(r,s){return r[33].isShown?0:r[33].isEllipsis?1:-1}return~(e=n(i))&&(t=o[e]=f[e](i)),{c(){t&&t.c(),l=Se()},l(r){t&&t.l(r),l=Se()},m(r,s){~e&&o[e].m(r,s),B(r,l,s),a=!0},p(r,s){let u=e;e=n(r),e===u?~e&&o[e].p(r,s):(t&&(Q(),A(o[u],1,1,()=>{o[u]=null}),Z()),~e?(t=o[e],t?t.p(r,s):(t=o[e]=f[e](r),t.c()),C(t,1),t.m(l.parentNode,l)):t=null)},i(r){a||(C(t),a=!0)},o(r){A(t),a=!1},d(r){~e&&o[e].d(r),r&&h(l)}}}function ut(i){let e,t,l,a,f;const o=[Vl,Cl],n=[];function r(s,u){return s[5]?1:0}return l=r(i),a=n[l]=o[l](i),{c(){e=L("div"),t=L("div"),a.c(),this.h()},l(s){e=I(s,"DIV",{class:!0});var u=E(e);t=I(u,"DIV",{class:!0});var d=E(t);a.l(d),d.forEach(h),u.forEach(h),this.h()},h(){P(t,"class","w-30 mt-2 rounded border border-neutral-300 text-center"),P(e,"class","flex flex-row justify-center")},m(s,u){B(s,e,u),k(e,t),n[l].m(t,null),f=!0},p(s,u){let d=l;l=r(s),l===d?n[l].p(s,u):(Q(),A(n[d],1,1,()=>{n[d]=null}),Z(),a=n[l],a?a.p(s,u):(a=n[l]=o[l](s),a.c()),C(a,1),a.m(t,null))},i(s){f||(C(a),f=!0)},o(s){A(a),f=!1},d(s){s&&h(e),n[l].d()}}}function Cl(i){let e,t;return e=new vt({props:{size:"small",class:"w-full",kind:"ghost",icon:$t,$$slots:{default:[Pl]},$$scope:{ctx:i}}}),e.$on("click",i[31]),{c(){ae(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,a){oe(e,l,a),t=!0},p(l,a){const f={};a[1]&64&&(f.$$scope={dirty:a,ctx:l}),e.$set(f)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function Vl(i){let e,t;return e=new vt({props:{size:"small",class:"w-full",kind:"ghost",icon:Qt,$$slots:{default:[Bl]},$$scope:{ctx:i}}}),e.$on("click",i[30]),{c(){ae(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,a){oe(e,l,a),t=!0},p(l,a){const f={};a[1]&64&&(f.$$scope={dirty:a,ctx:l}),e.$set(f)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function Pl(i){let e;return{c(){e=z("Hide excess")},l(t){e=D(t,"Hide excess")},m(t,l){B(t,e,l)},d(t){t&&h(e)}}}function Bl(i){let e;return{c(){e=z("Show all")},l(t){e=D(t,"Show all")},m(t,l){B(t,e,l)},d(t){t&&h(e)}}}function Hl(i){let e,t,l,a=i[7],f=[];for(let r=0;r<a.length;r+=1)f[r]=ft(ot(i,a,r));const o=r=>A(f[r],1,1,()=>{f[r]=null});let n=(i[6]||i[5])&&ut(i);return{c(){e=L("div");for(let r=0;r<f.length;r+=1)f[r].c();t=U(),n&&n.c(),this.h()},l(r){e=I(r,"DIV",{class:!0});var s=E(e);for(let u=0;u<f.length;u+=1)f[u].l(s);t=W(s),n&&n.l(s),s.forEach(h),this.h()},h(){P(e,"class","relative overflow-x-hidden text-ellipsis whitespace-break-spaces")},m(r,s){B(r,e,s);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(e,null);k(e,t),n&&n.m(e,null),l=!0},p(r,s){if(s[0]&110495){a=r[7];let u;for(u=0;u<a.length;u+=1){const d=ot(r,a,u);f[u]?(f[u].p(d,s),C(f[u],1)):(f[u]=ft(d),f[u].c(),C(f[u],1),f[u].m(e,t))}for(Q(),u=a.length;u<f.length;u+=1)o(u);Z()}r[6]||r[5]?n?(n.p(r,s),s[0]&96&&C(n,1)):(n=ut(r),n.c(),C(n,1),n.m(e,null)):n&&(Q(),A(n,1,1,()=>{n=null}),Z())},i(r){if(!l){for(let s=0;s<a.length;s+=1)C(f[s]);C(n),l=!0}},o(r){f=f.filter(Boolean);for(let s=0;s<f.length;s+=1)A(f[s]);A(n),l=!1},d(r){r&&h(e),Bt(f,r),n&&n.d()}}}const dt=.9,ct=()=>null;function Ll(i,e,t){let l,a,f,o,n,r,{text:s}=e,{row:u}=e,{spanPaths:d}=e,{path:c=void 0}=e,{valuePaths:b}=e,{markdown:T=!1}=e,{embeddings:m}=e,{datasetViewStore:g=void 0}=e,{datasetStore:y=void 0}=e,H,w={},N=new Set;const v=p=>{p.paths.forEach(M=>N.add(M)),t(4,N)},S=p=>{p.paths.forEach(M=>N.delete(M)),t(4,N)};let R={};const X=p=>{const me={conceptName:null,conceptNamespace:null,text:a.filter(_e=>_e.paths.some(Ve=>((p==null?void 0:p.paths)||[]).some(be=>gt(be,Ve)))).map(_e=>_e.text).join("")};for(const _e of Object.keys(p.originalSpans)){const Ve=(w[_e]||[]).filter(be=>be.type==="concept_score");for(const be of Ve){const Ae=be.signal;me.conceptName=Ae.concept_name,me.conceptNamespace=Ae.namespace;break}}return me},ne=zt();Re(i,ne,p=>t(32,n=p));const he=(p,M,_,me)=>{if(!M||!p)throw Error("Label could not be added, no active concept.");n.mutate([p,M,{insert:[{text:_,label:me}]}])};let $=!1,ue=Ht(Dt);Re(i,ue,p=>t(8,r=p));const de=(p,M)=>{g==null||c==null||g.addSearch({path:[ke(c)],type:"semantic",query:M,embedding:p})},we=jt(),Ee=p=>X(p),Te=p=>v(p),ye=p=>S(p),Ne=()=>t(5,$=!0),Ce=()=>t(5,$=!1);return i.$$set=p=>{"text"in p&&t(17,s=p.text),"row"in p&&t(18,u=p.row),"spanPaths"in p&&t(0,d=p.spanPaths),"path"in p&&t(19,c=p.path),"valuePaths"in p&&t(20,b=p.valuePaths),"markdown"in p&&t(1,T=p.markdown),"embeddings"in p&&t(2,m=p.embeddings),"datasetViewStore"in p&&t(21,g=p.datasetViewStore),"datasetStore"in p&&t(3,y=p.datasetStore)},i.$$.update=()=>{if(i.$$.dirty[0]&786433&&(t(22,H={}),d.forEach(p=>{const M=Rt(u,p);t(22,H[ke(p)]=M.filter(_=>Ot(ge.path(_),c)||c==null),H)})),i.$$.dirty[0]&9437184){t(23,w={});for(const p of b){const M=ke(p.spanPath);w[M]==null&&t(23,w[M]=[],w),w[M].push(p)}}if(i.$$.dirty[0]&4325376&&t(26,l=Ft(s,H)),i.$$.dirty[0]&75497488&&t(25,a=Sl(l,w,N)),i.$$.dirty[0]&83886080){t(24,R={});for(const p of l)for(const M of p.paths)t(24,R[M]=R[M]||[],R),R[M].push(p)}i.$$.dirty[0]&33554464&&t(7,{snippetSpans:f,someSnippetsHidden:o}=wl(a,$),f,(t(6,o),t(25,a),t(5,$),t(26,l),t(23,w),t(4,N),t(17,s),t(22,H),t(20,b),t(0,d),t(18,u),t(19,c)))},[d,T,m,y,N,$,o,f,r,v,S,X,ne,he,ue,de,we,s,u,c,b,g,H,w,R,a,l,Ee,Te,ye,Ne,Ce]}class Dl extends te{constructor(e){super(),le(this,e,Ll,Hl,ie,{text:17,row:18,spanPaths:0,path:19,valuePaths:20,markdown:1,embeddings:2,datasetViewStore:21,datasetStore:3},null,[-1,-1])}}export{ul as E,Dl as S,zl as T,Le as a,al as b,sl as c,ll as d};
