import{J as Q,K as pe,S as P,i as T,s as D,k,l as E,m as v,h as g,n as m,p as W,b as p,I as S,e as H,v as K,d as w,f as X,g as _,L as Qe,y as M,a as O,z as N,c as z,A,H as b,M as Ke,N as ot,B,x as me,q as G,r as q,u as $,O as At,P as Be,C as ct,D as ft,E as ut,F as dt,o as De,w as pn,Q as x,R as mt,T as Me,G as F,U as wn,V as j,W as V,t as Ne,X as xn,Y as Ge,Z as $n,_ as Bt,$ as er,a0 as tr,a1 as Ie,a2 as nr,a3 as rr,a4 as sr,a5 as ir}from"../chunks/index.db2c9008.js";import{w as fe,j as lr}from"../chunks/singletons.c33b328b.js";import{f as ar,a as Pt,b as or,g as cr,c as fr,u as He,d as Ae,o as ce,e as Tt,h as se,i as Ln,p as ur,s as dr,j as yn,k as mr,l as hr,m as gr,n as br,q as kn,t as En,v as Cn,w as Ze,x as ht,y as _r,z as vr,A as ge,B as pr,C as wr,D as Lr,E as yr,F as kr,G as Er,H as Cr,I as Sr,J as Ir,K as Mr}from"../chunks/optionsStore.27e6e01f.js";import{_ as Fe}from"../chunks/preload-helper.41c905a7.js";import{p as Ar}from"../chunks/stores.ca7a6136.js";const Br={water:"#0084ff",vegetation:"#02921a",crops:"#eeff00","bare soil":"#ff0000",forest:"#177733",river:"#00ddff",highway:"#7f7f7f",industrial:"#ffb600",residential:"#ff00fa",pasture:"#9aff42"};function Pr(){const r=fe(Tr),{subscribe:e,update:t}=r;return{subscribe:e,retrieve:()=>Q(r),add:l=>{let i=l.color||Br[l.name.toLowerCase()];if(!i)do i=Dr();while(Q(r).some(o=>o.color===i));const a={...l,color:i};t(o=>[...o,a])},removeBy:l=>{t(i=>i.filter(a=>a.name!==l))}}}const Tr=[],_e=Pr();function Dr(){let r="";const e=/^#[0-9a-f]{6}$/i;do r="#"+Math.floor(Math.random()*16777215).toString(16);while(!e.test(r));return r}function Nr(r,e,t,n){var s,l,i=!1,a=t.length>=2,o=(y,I)=>{if(s=I,a&&(l=y),!i){let Y=e(y,I);if(e.length<2)I(Y);else return Y}i=!1},d=lr(r,o,n),u=!Array.isArray(r);function c(y){var I=t(y,l);u?(i=!0,r.set(I)):I.forEach((Y,le)=>{i=!0,r[le].set(Y)}),i=!1}var h=!1;function f(y){var I,Y,le,te;if(h){te=y(Q(d)),s(te);return}var U=d.subscribe(ae=>{h?I?Y=!0:I=!0:le=ae});te=y(le),h=!0,s(te),U(),h=!1,Y&&(te=Q(d)),I&&c(te)}return{subscribe:d.subscribe,set(y){f(()=>y)},update:f}}const Hr=20,Le=fe([]),gt=fe(null),Ue=new Map,Dt=r=>{if(Ue.has(r))return;const e=setTimeout(()=>{Ue.delete(r),In(r)},1e3);Ue.set(r,e)},Or=r=>{const e=Ue.get(r);e&&clearTimeout(e)};function Sn(r){r.id&&Or(r.id),Le.update(e=>e.map(t=>t.id===r.id?{...t,...r}:t))}function zr(r){Le.update(e=>[r,...e].slice(0,Hr))}function jr(r){Q(Le).find(e=>e.id===r.id)?Sn(r):zr(r)}function Vr(r){Le.update(e=>(r?Dt(r):e.forEach(t=>{Dt(t.id)}),e.map(t=>t.id===r||r===void 0?{...t,visible:!1}:t)))}function In(r){Le.update(e=>r===void 0?[]:e.filter(t=>t.id!==r))}function Rr(r){gt.set(r)}function Gr(r){let e;gt.update(t=>(e=r-(t||0),null)),Le.update(t=>t.map(n=>({...n,pauseDuration:n.pauseDuration+e})))}const qr={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function Fr(r={}){return{toasts:Nr(Le,t=>t.map(n=>{var s,l;return{...r,...r[n.type],...n,duration:n.duration||((s=r[n.type])==null?void 0:s.duration)||(r==null?void 0:r.duration)||qr[n.type],style:[r.style,(l=r[n.type])==null?void 0:l.style,n.style].join(";")}}),t=>t),pausedAt:gt}}const Ur=r=>typeof r=="function",Nt=(r,e)=>Ur(r)?r(e):r,Wr=(()=>{let r=0;return()=>(r+=1,r.toString())})(),Mn=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){const e=matchMedia("(prefers-reduced-motion: reduce)");r=!e||e.matches}return r}})(),Zr=(r,e="blank",t)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...t,id:(t==null?void 0:t.id)||Wr()}),Oe=r=>(e,t)=>{const n=Zr(e,r,t);return jr(n),n.id},oe=(r,e)=>Oe("blank")(r,e);oe.error=Oe("error");oe.success=Oe("success");oe.loading=Oe("loading");oe.custom=Oe("custom");oe.dismiss=r=>{Vr(r)};oe.remove=r=>In(r);oe.promise=(r,e,t)=>{const n=oe.loading(e.loading,{...t,...t==null?void 0:t.loading});return r.then(s=>(oe.success(Nt(e.success,s),{id:n,...t,...t==null?void 0:t.success}),s)).catch(s=>{oe.error(Nt(e.error,s),{id:n,...t,...t==null?void 0:t.error})}),r};function Jr(r,e,t){const{reverseOrder:n,gutter:s=8,defaultPosition:l}=t||{},i=e.filter(u=>(u.position||l)===(r.position||l)&&u.height),a=i.findIndex(u=>u.id===r.id),o=i.filter((u,c)=>c<a&&u.visible).length;return i.filter(u=>u.visible).slice(...n?[o+1]:[0,o]).reduce((u,c)=>u+(c.height||0)+s,0)}const Qr={startPause(){Rr(Date.now())},endPause(){Gr(Date.now())},updateHeight:(r,e)=>{Sn({id:r,height:e})},calculateOffset:Jr};function Kr(r){const{toasts:e,pausedAt:t}=Fr(r),n=new Map;let s;const l=[t.subscribe(i=>{if(i){for(const[,a]of n)clearTimeout(a);n.clear()}s=i}),e.subscribe(i=>{if(s)return;const a=Date.now();for(const o of i){if(n.has(o.id)||o.duration===1/0)continue;const d=(o.duration||0)+o.pauseDuration-(a-o.createdAt);if(d<0)return o.visible&&oe.dismiss(o.id),null;n.set(o.id,setTimeout(()=>oe.dismiss(o.id),d))}})];return pe(()=>{for(const i of l)i()}),{toasts:e,handlers:Qr}}function Xr(r){let e;return{c(){e=k("div"),this.h()},l(t){e=E(t,"DIV",{class:!0}),v(e).forEach(g),this.h()},h(){m(e,"class","svelte-11kvm4p"),W(e,"--primary",r[0]),W(e,"--secondary",r[1])},m(t,n){p(t,e,n)},p(t,[n]){n&1&&W(e,"--primary",t[0]),n&2&&W(e,"--secondary",t[1])},i:S,o:S,d(t){t&&g(e)}}}function Yr(r,e,t){let{primary:n="#61d345"}=e,{secondary:s="#fff"}=e;return r.$$set=l=>{"primary"in l&&t(0,n=l.primary),"secondary"in l&&t(1,s=l.secondary)},[n,s]}class xr extends P{constructor(e){super(),T(this,e,Yr,Xr,D,{primary:0,secondary:1})}}function $r(r){let e;return{c(){e=k("div"),this.h()},l(t){e=E(t,"DIV",{class:!0}),v(e).forEach(g),this.h()},h(){m(e,"class","svelte-1ee93ns"),W(e,"--primary",r[0]),W(e,"--secondary",r[1])},m(t,n){p(t,e,n)},p(t,[n]){n&1&&W(e,"--primary",t[0]),n&2&&W(e,"--secondary",t[1])},i:S,o:S,d(t){t&&g(e)}}}function es(r,e,t){let{primary:n="#ff4b4b"}=e,{secondary:s="#fff"}=e;return r.$$set=l=>{"primary"in l&&t(0,n=l.primary),"secondary"in l&&t(1,s=l.secondary)},[n,s]}class ts extends P{constructor(e){super(),T(this,e,es,$r,D,{primary:0,secondary:1})}}function ns(r){let e;return{c(){e=k("div"),this.h()},l(t){e=E(t,"DIV",{class:!0}),v(e).forEach(g),this.h()},h(){m(e,"class","svelte-1j7dflg"),W(e,"--primary",r[0]),W(e,"--secondary",r[1])},m(t,n){p(t,e,n)},p(t,[n]){n&1&&W(e,"--primary",t[0]),n&2&&W(e,"--secondary",t[1])},i:S,o:S,d(t){t&&g(e)}}}function rs(r,e,t){let{primary:n="#616161"}=e,{secondary:s="#e0e0e0"}=e;return r.$$set=l=>{"primary"in l&&t(0,n=l.primary),"secondary"in l&&t(1,s=l.secondary)},[n,s]}class ss extends P{constructor(e){super(),T(this,e,rs,ns,D,{primary:0,secondary:1})}}function is(r){let e,t,n,s;const l=[r[0]];let i={};for(let o=0;o<l.length;o+=1)i=Qe(i,l[o]);t=new ss({props:i});let a=r[2]!=="loading"&&Ht(r);return{c(){e=k("div"),M(t.$$.fragment),n=O(),a&&a.c(),this.h()},l(o){e=E(o,"DIV",{class:!0});var d=v(e);N(t.$$.fragment,d),n=z(d),a&&a.l(d),d.forEach(g),this.h()},h(){m(e,"class","indicator svelte-1kgeier")},m(o,d){p(o,e,d),A(t,e,null),b(e,n),a&&a.m(e,null),s=!0},p(o,d){const u=d&1?Ke(l,[ot(o[0])]):{};t.$set(u),o[2]!=="loading"?a?(a.p(o,d),d&4&&_(a,1)):(a=Ht(o),a.c(),_(a,1),a.m(e,null)):a&&(K(),w(a,1,1,()=>{a=null}),X())},i(o){s||(_(t.$$.fragment,o),_(a),s=!0)},o(o){w(t.$$.fragment,o),w(a),s=!1},d(o){o&&g(e),B(t),a&&a.d()}}}function ls(r){let e,t,n;var s=r[1];function l(i){return{}}return s&&(e=me(s,l())),{c(){e&&M(e.$$.fragment),t=H()},l(i){e&&N(e.$$.fragment,i),t=H()},m(i,a){e&&A(e,i,a),p(i,t,a),n=!0},p(i,a){if(a&2&&s!==(s=i[1])){if(e){K();const o=e;w(o.$$.fragment,1,0,()=>{B(o,1)}),X()}s?(e=me(s,l()),M(e.$$.fragment),_(e.$$.fragment,1),A(e,t.parentNode,t)):e=null}},i(i){n||(e&&_(e.$$.fragment,i),n=!0)},o(i){e&&w(e.$$.fragment,i),n=!1},d(i){i&&g(t),e&&B(e,i)}}}function as(r){let e,t;return{c(){e=k("div"),t=G(r[1]),this.h()},l(n){e=E(n,"DIV",{class:!0});var s=v(e);t=q(s,r[1]),s.forEach(g),this.h()},h(){m(e,"class","animated svelte-1kgeier")},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&2&&$(t,n[1])},i:S,o:S,d(n){n&&g(e)}}}function Ht(r){let e,t,n,s;const l=[cs,os],i=[];function a(o,d){return o[2]==="error"?0:1}return t=a(r),n=i[t]=l[t](r),{c(){e=k("div"),n.c(),this.h()},l(o){e=E(o,"DIV",{class:!0});var d=v(e);n.l(d),d.forEach(g),this.h()},h(){m(e,"class","status svelte-1kgeier")},m(o,d){p(o,e,d),i[t].m(e,null),s=!0},p(o,d){let u=t;t=a(o),t===u?i[t].p(o,d):(K(),w(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(o,d):(n=i[t]=l[t](o),n.c()),_(n,1),n.m(e,null))},i(o){s||(_(n),s=!0)},o(o){w(n),s=!1},d(o){o&&g(e),i[t].d()}}}function os(r){let e,t;const n=[r[0]];let s={};for(let l=0;l<n.length;l+=1)s=Qe(s,n[l]);return e=new xr({props:s}),{c(){M(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,i){A(e,l,i),t=!0},p(l,i){const a=i&1?Ke(n,[ot(l[0])]):{};e.$set(a)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){B(e,l)}}}function cs(r){let e,t;const n=[r[0]];let s={};for(let l=0;l<n.length;l+=1)s=Qe(s,n[l]);return e=new ts({props:s}),{c(){M(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,i){A(e,l,i),t=!0},p(l,i){const a=i&1?Ke(n,[ot(l[0])]):{};e.$set(a)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){B(e,l)}}}function fs(r){let e,t,n,s;const l=[as,ls,is],i=[];function a(o,d){return typeof o[1]=="string"?0:typeof o[1]<"u"?1:o[2]!=="blank"?2:-1}return~(e=a(r))&&(t=i[e]=l[e](r)),{c(){t&&t.c(),n=H()},l(o){t&&t.l(o),n=H()},m(o,d){~e&&i[e].m(o,d),p(o,n,d),s=!0},p(o,[d]){let u=e;e=a(o),e===u?~e&&i[e].p(o,d):(t&&(K(),w(i[u],1,1,()=>{i[u]=null}),X()),~e?(t=i[e],t?t.p(o,d):(t=i[e]=l[e](o),t.c()),_(t,1),t.m(n.parentNode,n)):t=null)},i(o){s||(_(t),s=!0)},o(o){w(t),s=!1},d(o){~e&&i[e].d(o),o&&g(n)}}}function us(r,e,t){let n,s,l,{toast:i}=e;return r.$$set=a=>{"toast"in a&&t(3,i=a.toast)},r.$$.update=()=>{r.$$.dirty&8&&t(2,{type:n,icon:s,iconTheme:l}=i,n,(t(1,s),t(3,i)),(t(0,l),t(3,i)))},[l,s,n,i]}class bt extends P{constructor(e){super(),T(this,e,us,fs,D,{toast:3})}}function ds(r){let e,t,n;var s=r[0].message;function l(i){return{props:{toast:i[0]}}}return s&&(e=me(s,l(r))),{c(){e&&M(e.$$.fragment),t=H()},l(i){e&&N(e.$$.fragment,i),t=H()},m(i,a){e&&A(e,i,a),p(i,t,a),n=!0},p(i,a){const o={};if(a&1&&(o.toast=i[0]),a&1&&s!==(s=i[0].message)){if(e){K();const d=e;w(d.$$.fragment,1,0,()=>{B(d,1)}),X()}s?(e=me(s,l(i)),M(e.$$.fragment),_(e.$$.fragment,1),A(e,t.parentNode,t)):e=null}else s&&e.$set(o)},i(i){n||(e&&_(e.$$.fragment,i),n=!0)},o(i){e&&w(e.$$.fragment,i),n=!1},d(i){i&&g(t),e&&B(e,i)}}}function ms(r){let e=r[0].message+"",t;return{c(){t=G(e)},l(n){t=q(n,e)},m(n,s){p(n,t,s)},p(n,s){s&1&&e!==(e=n[0].message+"")&&$(t,e)},i:S,o:S,d(n){n&&g(t)}}}function hs(r){let e,t,n,s;const l=[ms,ds],i=[];function a(u,c){return typeof u[0].message=="string"?0:1}t=a(r),n=i[t]=l[t](r);let o=[{class:"message"},r[0].ariaProps],d={};for(let u=0;u<o.length;u+=1)d=Qe(d,o[u]);return{c(){e=k("div"),n.c(),this.h()},l(u){e=E(u,"DIV",{class:!0});var c=v(e);n.l(c),c.forEach(g),this.h()},h(){At(e,d),Be(e,"svelte-1nauejd",!0)},m(u,c){p(u,e,c),i[t].m(e,null),s=!0},p(u,[c]){let h=t;t=a(u),t===h?i[t].p(u,c):(K(),w(i[h],1,1,()=>{i[h]=null}),X(),n=i[t],n?n.p(u,c):(n=i[t]=l[t](u),n.c()),_(n,1),n.m(e,null)),At(e,d=Ke(o,[{class:"message"},c&1&&u[0].ariaProps])),Be(e,"svelte-1nauejd",!0)},i(u){s||(_(n),s=!0)},o(u){w(n),s=!1},d(u){u&&g(e),i[t].d()}}}function gs(r,e,t){let{toast:n}=e;return r.$$set=s=>{"toast"in s&&t(0,n=s.toast)},[n]}class Xe extends P{constructor(e){super(),T(this,e,gs,hs,D,{toast:0})}}const bs=r=>({toast:r&1}),Ot=r=>({ToastIcon:bt,ToastMessage:Xe,toast:r[0]});function _s(r){let e;const t=r[6].default,n=ct(t,r,r[7],Ot),s=n||ps(r);return{c(){s&&s.c()},l(l){s&&s.l(l)},m(l,i){s&&s.m(l,i),e=!0},p(l,i){n?n.p&&(!e||i&129)&&ft(n,t,l,l[7],e?dt(t,l[7],i,bs):ut(l[7]),Ot):s&&s.p&&(!e||i&1)&&s.p(l,e?i:-1)},i(l){e||(_(s,l),e=!0)},o(l){w(s,l),e=!1},d(l){s&&s.d(l)}}}function vs(r){let e,t,n;var s=r[2];function l(i){return{props:{$$slots:{message:[Ls],icon:[ws]},$$scope:{ctx:i}}}}return s&&(e=me(s,l(r))),{c(){e&&M(e.$$.fragment),t=H()},l(i){e&&N(e.$$.fragment,i),t=H()},m(i,a){e&&A(e,i,a),p(i,t,a),n=!0},p(i,a){const o={};if(a&129&&(o.$$scope={dirty:a,ctx:i}),a&4&&s!==(s=i[2])){if(e){K();const d=e;w(d.$$.fragment,1,0,()=>{B(d,1)}),X()}s?(e=me(s,l(i)),M(e.$$.fragment),_(e.$$.fragment,1),A(e,t.parentNode,t)):e=null}else s&&e.$set(o)},i(i){n||(e&&_(e.$$.fragment,i),n=!0)},o(i){e&&w(e.$$.fragment,i),n=!1},d(i){i&&g(t),e&&B(e,i)}}}function ps(r){let e,t,n,s;return e=new bt({props:{toast:r[0]}}),n=new Xe({props:{toast:r[0]}}),{c(){M(e.$$.fragment),t=O(),M(n.$$.fragment)},l(l){N(e.$$.fragment,l),t=z(l),N(n.$$.fragment,l)},m(l,i){A(e,l,i),p(l,t,i),A(n,l,i),s=!0},p(l,i){const a={};i&1&&(a.toast=l[0]),e.$set(a);const o={};i&1&&(o.toast=l[0]),n.$set(o)},i(l){s||(_(e.$$.fragment,l),_(n.$$.fragment,l),s=!0)},o(l){w(e.$$.fragment,l),w(n.$$.fragment,l),s=!1},d(l){B(e,l),l&&g(t),B(n,l)}}}function ws(r){let e,t;return e=new bt({props:{toast:r[0],slot:"icon"}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p(n,s){const l={};s&1&&(l.toast=n[0]),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Ls(r){let e,t;return e=new Xe({props:{toast:r[0],slot:"message"}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p(n,s){const l={};s&1&&(l.toast=n[0]),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function ys(r){let e,t,n,s,l,i;const a=[vs,_s],o=[];function d(u,c){return u[2]?0:1}return t=d(r),n=o[t]=a[t](r),{c(){e=k("div"),n.c(),this.h()},l(u){e=E(u,"DIV",{class:!0,style:!0});var c=v(e);n.l(c),c.forEach(g),this.h()},h(){m(e,"class",s="base "+(r[0].height?r[4]:"transparent")+" "+(r[0].className||"")+" svelte-ug60r4"),m(e,"style",l=r[1]+"; "+r[0].style),W(e,"--factor",r[3])},m(u,c){p(u,e,c),o[t].m(e,null),i=!0},p(u,[c]){let h=t;t=d(u),t===h?o[t].p(u,c):(K(),w(o[h],1,1,()=>{o[h]=null}),X(),n=o[t],n?n.p(u,c):(n=o[t]=a[t](u),n.c()),_(n,1),n.m(e,null)),(!i||c&17&&s!==(s="base "+(u[0].height?u[4]:"transparent")+" "+(u[0].className||"")+" svelte-ug60r4"))&&m(e,"class",s),(!i||c&3&&l!==(l=u[1]+"; "+u[0].style))&&m(e,"style",l),(c&3||c&11)&&W(e,"--factor",u[3])},i(u){i||(_(n),i=!0)},o(u){w(n),i=!1},d(u){u&&g(e),o[t].d()}}}function ks(r,e,t){let{$$slots:n={},$$scope:s}=e,{toast:l}=e,{position:i=void 0}=e,{style:a=""}=e,{Component:o=void 0}=e,d,u;return r.$$set=c=>{"toast"in c&&t(0,l=c.toast),"position"in c&&t(5,i=c.position),"style"in c&&t(1,a=c.style),"Component"in c&&t(2,o=c.Component),"$$scope"in c&&t(7,s=c.$$scope)},r.$$.update=()=>{if(r.$$.dirty&33){const c=(l.position||i||"top-center").includes("top");t(3,d=c?1:-1);const[h,f]=Mn()?["fadeIn","fadeOut"]:["enter","exit"];t(4,u=l.visible?h:f)}},[l,a,o,d,u,i,n,s]}class Es extends P{constructor(e){super(),T(this,e,ks,ys,D,{toast:0,position:5,style:1,Component:2})}}const Cs=r=>({toast:r&1}),zt=r=>({toast:r[0]});function Ss(r){let e;const t=r[8].default,n=ct(t,r,r[7],zt),s=n||Ms(r);return{c(){s&&s.c()},l(l){s&&s.l(l)},m(l,i){s&&s.m(l,i),e=!0},p(l,i){n?n.p&&(!e||i&129)&&ft(n,t,l,l[7],e?dt(t,l[7],i,Cs):ut(l[7]),zt):s&&s.p&&(!e||i&1)&&s.p(l,e?i:-1)},i(l){e||(_(s,l),e=!0)},o(l){w(s,l),e=!1},d(l){s&&s.d(l)}}}function Is(r){let e,t;return e=new Xe({props:{toast:r[0]}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p(n,s){const l={};s&1&&(l.toast=n[0]),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Ms(r){let e,t;return e=new Es({props:{toast:r[0],position:r[0].position}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p(n,s){const l={};s&1&&(l.toast=n[0]),s&1&&(l.position=n[0].position),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function As(r){let e,t,n,s;const l=[Is,Ss],i=[];function a(o,d){return o[0].type==="custom"?0:1}return t=a(r),n=i[t]=l[t](r),{c(){e=k("div"),n.c(),this.h()},l(o){e=E(o,"DIV",{class:!0});var d=v(e);n.l(d),d.forEach(g),this.h()},h(){m(e,"class","wrapper svelte-v01oml"),Be(e,"active",r[0].visible),Be(e,"transition",!Mn()),W(e,"--factor",r[3]),W(e,"--offset",r[0].offset),W(e,"top",r[5]),W(e,"bottom",r[4]),W(e,"justify-content",r[2])},m(o,d){p(o,e,d),i[t].m(e,null),r[9](e),s=!0},p(o,[d]){let u=t;t=a(o),t===u?i[t].p(o,d):(K(),w(i[u],1,1,()=>{i[u]=null}),X(),n=i[t],n?n.p(o,d):(n=i[t]=l[t](o),n.c()),_(n,1),n.m(e,null)),(!s||d&1)&&Be(e,"active",o[0].visible),d&8&&W(e,"--factor",o[3]),d&1&&W(e,"--offset",o[0].offset),d&32&&W(e,"top",o[5]),d&16&&W(e,"bottom",o[4]),d&4&&W(e,"justify-content",o[2])},i(o){s||(_(n),s=!0)},o(o){w(n),s=!1},d(o){o&&g(e),i[t].d(),r[9](null)}}}function Bs(r,e,t){let n,s,l,i,{$$slots:a={},$$scope:o}=e,{toast:d}=e,{setHeight:u}=e,c;De(()=>{u(c.getBoundingClientRect().height)});function h(f){pn[f?"unshift":"push"](()=>{c=f,t(1,c)})}return r.$$set=f=>{"toast"in f&&t(0,d=f.toast),"setHeight"in f&&t(6,u=f.setHeight),"$$scope"in f&&t(7,o=f.$$scope)},r.$$.update=()=>{var f,y,I,Y,le;r.$$.dirty&1&&t(5,n=(f=d.position)!=null&&f.includes("top")?0:null),r.$$.dirty&1&&t(4,s=(y=d.position)!=null&&y.includes("bottom")?0:null),r.$$.dirty&1&&t(3,l=(I=d.position)!=null&&I.includes("top")?1:-1),r.$$.dirty&1&&t(2,i=((Y=d.position)==null?void 0:Y.includes("center"))&&"center"||((le=d.position)==null?void 0:le.includes("right"))&&"flex-end"||null)},[d,c,i,l,s,n,u,o,a,h]}class Ps extends P{constructor(e){super(),T(this,e,Bs,As,D,{toast:0,setHeight:6})}}function jt(r,e,t){const n=r.slice();return n[11]=e[t],n}function Vt(r,e){let t,n,s;function l(...i){return e[10](e[11],...i)}return n=new Ps({props:{toast:e[11],setHeight:l}}),{key:r,first:null,c(){t=H(),M(n.$$.fragment),this.h()},l(i){t=H(),N(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,a){p(i,t,a),A(n,i,a),s=!0},p(i,a){e=i;const o={};a&4&&(o.toast=e[11]),a&4&&(o.setHeight=l),n.$set(o)},i(i){s||(_(n.$$.fragment,i),s=!0)},o(i){w(n.$$.fragment,i),s=!1},d(i){i&&g(t),B(n,i)}}}function Ts(r){let e,t=[],n=new Map,s,l,i,a,o=r[2];const d=u=>u[11].id;for(let u=0;u<o.length;u+=1){let c=jt(r,o,u),h=d(c);n.set(h,t[u]=Vt(h,c))}return{c(){e=k("div");for(let u=0;u<t.length;u+=1)t[u].c();this.h()},l(u){e=E(u,"DIV",{class:!0,style:!0});var c=v(e);for(let h=0;h<t.length;h+=1)t[h].l(c);c.forEach(g),this.h()},h(){m(e,"class",s="toaster "+(r[1]||"")+" svelte-1phplh9"),m(e,"style",r[0])},m(u,c){p(u,e,c);for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(e,null);l=!0,i||(a=[x(e,"mouseenter",r[4].startPause),x(e,"mouseleave",r[4].endPause)],i=!0)},p(u,[c]){c&20&&(o=u[2],K(),t=mt(t,c,d,1,u,o,n,e,wn,Vt,null,jt),X()),(!l||c&2&&s!==(s="toaster "+(u[1]||"")+" svelte-1phplh9"))&&m(e,"class",s),(!l||c&1)&&m(e,"style",u[0])},i(u){if(!l){for(let c=0;c<o.length;c+=1)_(t[c]);l=!0}},o(u){for(let c=0;c<t.length;c+=1)w(t[c]);l=!1},d(u){u&&g(e);for(let c=0;c<t.length;c+=1)t[c].d();i=!1,Me(a)}}}function Ds(r,e,t){let n,{reverseOrder:s=!1}=e,{position:l="top-center"}=e,{toastOptions:i=void 0}=e,{gutter:a=8}=e,{containerStyle:o=void 0}=e,{containerClassName:d=void 0}=e;const{toasts:u,handlers:c}=Kr(i);F(r,u,y=>t(9,n=y));let h;const f=(y,I)=>c.updateHeight(y.id,I);return r.$$set=y=>{"reverseOrder"in y&&t(5,s=y.reverseOrder),"position"in y&&t(6,l=y.position),"toastOptions"in y&&t(7,i=y.toastOptions),"gutter"in y&&t(8,a=y.gutter),"containerStyle"in y&&t(0,o=y.containerStyle),"containerClassName"in y&&t(1,d=y.containerClassName)},r.$$.update=()=>{r.$$.dirty&864&&t(2,h=n.map(y=>({...y,position:y.position||l,offset:c.calculateOffset(y,n,{reverseOrder:s,gutter:a,defaultPosition:l})})))},[o,d,h,u,c,s,l,i,a,n,f]}class Ns extends P{constructor(e){super(),T(this,e,Ds,Ts,D,{reverseOrder:5,position:6,toastOptions:7,gutter:8,containerStyle:0,containerClassName:1})}}function Hs(r){let e;return{c(){e=k("div"),this.h()},l(t){e=E(t,"DIV",{class:!0}),v(e).forEach(g),this.h()},h(){m(e,"class","blocker fixed block h-[100vh] w-[100vw] bg-white opacity-0 transition-opacity ease-in-out")},m(t,n){p(t,e,n)},p:S,i:S,o:S,d(t){t&&g(e)}}}class Os extends P{constructor(e){super(),T(this,e,null,Hs,D,{})}}var re=(r=>(r.detection="detection",r.segmentation="segmentation",r.classification="classification",r.markerPrompts="markerPrompts",r))(re||{});const zs=()=>{const r=fe(ar),{subscribe:e,set:t}=r;return{subscribe:e,store:n=>t(n),retrieve:()=>Q(r)}},Ye=zs();function js(r){const e=fe(r),{subscribe:t,set:n}=e,s=u=>{const c={detection:L.featureGroup(),segmentation:L.featureGroup(),classification:L.featureGroup(),markerPrompts:L.featureGroup()};Pt(u,c),n(c)},l=u=>{const c=Q(e);or(u,c),n(null)};return{subscribe:t,init:s,remove:l,clear:u=>{l(u),s(u)},retrieve:()=>Q(e),addLayerWithProperties:(u,c,h)=>(c.task=h,u.feature={type:"Feature",properties:{...c}},Q(e)[h].addLayer(u),u),resetLayerGroup:(u,c)=>{const h=Q(e);h[c].clearLayers(),Pt(u,h),n(h)},removeLayer:(u,c)=>{Q(e)[c].removeLayer(u)}}}const Vs={detection:null,segmentation:null,classification:null,markerPrompts:null},J=js(Vs);function Rs(){const r=fe(Rt),{subscribe:e,set:t}=r;return{subscribe:e,store:s=>t(s),toggle:s=>{const l=Q(r),i=l.map(o=>o.name);let a;i.includes(s.name)?a=l.filter(o=>o.name!==s.name):a=[...l,s],t(a)},retrieve:()=>Q(r),empty:()=>t(Rt)}}const Rt=[],ye=Rs(),Gs=()=>{const r=fe({areImagesLoading:!0,areLabelsLoading:!0,areAnnotationsLoading:!0}),{subscribe:e,update:t}=r;return{subscribe:e,markImagesAsLoaded:()=>t(u=>({...u,areImagesLoading:!1})),markLabelsAsLoaded:()=>t(u=>({...u,areLabelsLoading:!1})),markAnnotationsAsLoaded:()=>t(u=>({...u,areAnnotationsLoading:!1})),markLabelsAsLoading:()=>t(u=>({...u,areLabelsLoading:!0})),markImagesAsLoading:()=>t(u=>({...u,areImagesLoading:!0})),markAnnotationsAsLoading:()=>t(u=>({...u,areAnnotationsLoading:!0})),isDataLoading:()=>{const u=Q(r);return u.areImagesLoading||u.areLabelsLoading},retrieve:()=>Q(r)}},Pe=Gs(),qs=()=>{const e=fe({saving:!1,samMaskRequest:!1}),{update:t,subscribe:n}=e;return{subscribe:n,saving:{enable:()=>t(s=>({...s,saving:!0})),disable:()=>t(s=>({...s,saving:!1})),retrieve:()=>Q(e).saving},samMaskRequest:{enable:()=>t(s=>({...s,samMaskRequest:!0})),disable:()=>t(s=>({...s,samMaskRequest:!1})),retrieve:()=>Q(e).samMaskRequest}}},ee=qs();function Fs(r){const e=fe(r),{subscribe:t,set:n}=e;return{subscribe:t,store:s=>n(s),retrieve:()=>Q(e),remove:()=>n(null)}}const Z=Fs(null),Us={name:"",bbox:[0,0,0,0]};function Ws(){const r=fe(Us),{subscribe:e,set:t}=r;return{subscribe:e,store:n=>t(n),retrieve:()=>Q(r)}}const be=Ws();function Zs(r){const e=fe(r),{subscribe:t,set:n}=e;return{subscribe:t,store:s=>n(s)}}const Js=[],_t=Zs(Js),Qs=()=>ye.retrieve().map(e=>e.name).flat(),An=async()=>{const r=Qs(),e=be.retrieve().bbox,t=cr(e),n=fr(t),s=L.polygon(n,{weight:0,fillOpacity:0,interactive:!1}),l={label:r};J.addLayerWithProperties(s,l,re.classification)},Ks=r=>{be.retrieve().name&&(ye.toggle(r),Xs())},Xs=()=>{ee.saving.enable(),Ys(),ye.retrieve().length&&An()},Ys=()=>{J.retrieve().classification&&J.resetLayerGroup(Z.retrieve(),re.classification)},Bn=async()=>{const r=_e.retrieve(),e=He.retrieve();xs(r,e)},xs=async(r,e)=>{const t=await fetch(e+Ae.labelsEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({labels:r})}),n=await t.json();t.ok||alert(JSON.stringify(n.detail))},$s=r=>{r&&(_e.removeBy(r),Bn())};function Gt(r){let e,t;return{c(){e=j("desc"),t=G(r[7])},l(n){e=V(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&128&&$(t,n[7])},d(n){n&&g(e)}}}function qt(r){let e,t;return{c(){e=j("title"),t=G(r[6])},l(n){e=V(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&64&&$(t,n[6])},d(n){n&&g(e)}}}function ei(r){let e,t,n,s=r[7]&&Gt(r),l=r[6]&&qt(r);return{c(){e=j("svg"),s&&s.c(),t=H(),l&&l.c(),n=j("path"),this.h()},l(i){e=V(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var a=v(e);s&&s.l(a),t=H(),l&&l.l(a),n=V(a,"path",{d:!0,fill:!0}),v(n).forEach(g),a.forEach(g),this.h()},h(){m(n,"d","M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"),m(n,"fill",r[2]),m(e,"viewBox",r[3]),m(e,"width",r[0]),m(e,"height",r[1]),m(e,"class",r[8]),m(e,"aria-label",r[4]),m(e,"aria-hidden",r[5])},m(i,a){p(i,e,a),s&&s.m(e,null),b(e,t),l&&l.m(e,null),b(e,n)},p(i,[a]){i[7]?s?s.p(i,a):(s=Gt(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?l?l.p(i,a):(l=qt(i),l.c(),l.m(e,n)):l&&(l.d(1),l=null),a&4&&m(n,"fill",i[2]),a&8&&m(e,"viewBox",i[3]),a&1&&m(e,"width",i[0]),a&2&&m(e,"height",i[1]),a&256&&m(e,"class",i[8]),a&16&&m(e,"aria-label",i[4]),a&32&&m(e,"aria-hidden",i[5])},i:S,o:S,d(i){i&&g(e),s&&s.d(),l&&l.d()}}}function ti(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:l=n}=e,{color:i="currentColor"}=e,{viewBox:a="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:d=void 0}=e,{title:u=void 0}=e,{desc:c=void 0}=e,{class:h=void 0}=e;return r.$$set=f=>{"size"in f&&t(9,n=f.size),"width"in f&&t(0,s=f.width),"height"in f&&t(1,l=f.height),"color"in f&&t(2,i=f.color),"viewBox"in f&&t(3,a=f.viewBox),"ariaLabel"in f&&t(4,o=f.ariaLabel),"ariaHidden"in f&&t(5,d=f.ariaHidden),"title"in f&&t(6,u=f.title),"desc"in f&&t(7,c=f.desc),"class"in f&&t(8,h=f.class)},[s,l,i,a,o,d,u,c,h,n]}class ni extends P{constructor(e){super(),T(this,e,ti,ei,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function Ft(r){let e,t;return{c(){e=j("desc"),t=G(r[7])},l(n){e=V(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&128&&$(t,n[7])},d(n){n&&g(e)}}}function Ut(r){let e,t;return{c(){e=j("title"),t=G(r[6])},l(n){e=V(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&64&&$(t,n[6])},d(n){n&&g(e)}}}function ri(r){let e,t,n,s=r[7]&&Ft(r),l=r[6]&&Ut(r);return{c(){e=j("svg"),s&&s.c(),t=H(),l&&l.c(),n=j("path"),this.h()},l(i){e=V(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var a=v(e);s&&s.l(a),t=H(),l&&l.l(a),n=V(a,"path",{d:!0,fill:!0}),v(n).forEach(g),a.forEach(g),this.h()},h(){m(n,"d","M21.41 11.58L12.41 2.58C12.04 2.21 11.53 2 11 2H4C2.9 2 2 2.9 2 4V11C2 11.53 2.21 12.04 2.59 12.41L3 12.81C3.9 12.27 4.94 12 6 12C9.31 12 12 14.69 12 18C12 19.06 11.72 20.09 11.18 21L11.58 21.4C11.95 21.78 12.47 22 13 22S14.04 21.79 14.41 21.41L21.41 14.41C21.79 14.04 22 13.53 22 13S21.79 11.96 21.41 11.58M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7M8.63 14.27L4.76 18.17L3.41 16.8L2 18.22L4.75 21L10.03 15.68L8.63 14.27"),m(n,"fill",r[2]),m(e,"viewBox",r[3]),m(e,"width",r[0]),m(e,"height",r[1]),m(e,"class",r[8]),m(e,"aria-label",r[4]),m(e,"aria-hidden",r[5])},m(i,a){p(i,e,a),s&&s.m(e,null),b(e,t),l&&l.m(e,null),b(e,n)},p(i,[a]){i[7]?s?s.p(i,a):(s=Ft(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?l?l.p(i,a):(l=Ut(i),l.c(),l.m(e,n)):l&&(l.d(1),l=null),a&4&&m(n,"fill",i[2]),a&8&&m(e,"viewBox",i[3]),a&1&&m(e,"width",i[0]),a&2&&m(e,"height",i[1]),a&256&&m(e,"class",i[8]),a&16&&m(e,"aria-label",i[4]),a&32&&m(e,"aria-hidden",i[5])},i:S,o:S,d(i){i&&g(e),s&&s.d(),l&&l.d()}}}function si(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:l=n}=e,{color:i="currentColor"}=e,{viewBox:a="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:d=void 0}=e,{title:u=void 0}=e,{desc:c=void 0}=e,{class:h=void 0}=e;return r.$$set=f=>{"size"in f&&t(9,n=f.size),"width"in f&&t(0,s=f.width),"height"in f&&t(1,l=f.height),"color"in f&&t(2,i=f.color),"viewBox"in f&&t(3,a=f.viewBox),"ariaLabel"in f&&t(4,o=f.ariaLabel),"ariaHidden"in f&&t(5,d=f.ariaHidden),"title"in f&&t(6,u=f.title),"desc"in f&&t(7,c=f.desc),"class"in f&&t(8,h=f.class)},[s,l,i,a,o,d,u,c,h,n]}class ii extends P{constructor(e){super(),T(this,e,si,ri,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function Wt(r){let e,t,n,s,l;return t=new ii({props:{color:r[1]?"#202124":"#5e5e5e"}}),{c(){e=k("i"),M(t.$$.fragment),this.h()},l(i){e=E(i,"I",{class:!0,"aria-label":!0});var a=v(e);N(t.$$.fragment,a),a.forEach(g),this.h()},h(){m(e,"class",n="text-2xl "+(r[1]&&"hover:text-3xl")+" mr-2"),m(e,"aria-label",s=`${r[0]} classification tag`)},m(i,a){p(i,e,a),A(t,e,null),l=!0},p(i,a){const o={};a&2&&(o.color=i[1]?"#202124":"#5e5e5e"),t.$set(o),(!l||a&2&&n!==(n="text-2xl "+(i[1]&&"hover:text-3xl")+" mr-2"))&&m(e,"class",n),(!l||a&1&&s!==(s=`${i[0]} classification tag`))&&m(e,"aria-label",s)},i(i){l||(_(t.$$.fragment,i),l=!0)},o(i){w(t.$$.fragment,i),l=!1},d(i){i&&g(e),B(t)}}}function li(r){let e=r[2].includes(r[0].toLowerCase()),t,n,s=e&&Wt(r);return{c(){s&&s.c(),t=H()},l(l){s&&s.l(l),t=H()},m(l,i){s&&s.m(l,i),p(l,t,i),n=!0},p(l,[i]){i&5&&(e=l[2].includes(l[0].toLowerCase())),e?s?(s.p(l,i),i&5&&_(s,1)):(s=Wt(l),s.c(),_(s,1),s.m(t.parentNode,t)):s&&(K(),w(s,1,1,()=>{s=null}),X())},i(l){n||(_(s),n=!0)},o(l){w(s),n=!1},d(l){s&&s.d(l),l&&g(t)}}}function ai(r,e,t){let n,s,l,i;F(r,we,o=>t(3,l=o)),F(r,ye,o=>t(4,i=o));let{name:a}=e;return r.$$set=o=>{"name"in o&&t(0,a=o.name)},r.$$.update=()=>{r.$$.dirty&16&&t(2,n=i.map(o=>o.name.toLowerCase())),r.$$.dirty&8&&t(1,s=l.name==="Classification")},[a,s,n,l,i]}class oi extends P{constructor(e){super(),T(this,e,ai,li,D,{name:0})}}function ci(r){let e,t;return{c(){e=k("div"),this.h()},l(n){e=E(n,"DIV",{class:!0,style:!0}),v(e).forEach(g),this.h()},h(){m(e,"class","w-[65px] h-[28px]"),m(e,"style",t=`background-color: ${r[0]}${r[1]*100};
                        border: 1px solid ${r[0]};`)},m(n,s){p(n,e,s)},p(n,[s]){s&3&&t!==(t=`background-color: ${n[0]}${n[1]*100};
                        border: 1px solid ${n[0]};`)&&m(e,"style",t)},i:S,o:S,d(n){n&&g(e)}}}function fi(r,e,t){let n,s;F(r,ce,i=>t(2,s=i));let{color:l}=e;return r.$$set=i=>{"color"in i&&t(0,l=i.color)},r.$$.update=()=>{r.$$.dirty&4&&t(1,{opacity:n}=s,n)},[l,n,s]}class ui extends P{constructor(e){super(),T(this,e,fi,ci,D,{color:0})}}function di(r){let e=Tt(r[0])+"",t;return{c(){t=G(e)},l(n){t=q(n,e)},m(n,s){p(n,t,s)},p(n,[s]){s&1&&e!==(e=Tt(n[0])+"")&&$(t,e)},i:S,o:S,d(n){n&&g(t)}}}function mi(r,e,t){let{name:n}=e;return r.$$set=s=>{"name"in s&&t(0,n=s.name)},[n]}class hi extends P{constructor(e){super(),T(this,e,mi,di,D,{name:0})}}function gi(r){let e,t,n,s,l,i,a,o,d,u,c;return t=new hi({props:{name:r[4]}}),l=new oi({props:{name:r[4]}}),a=new ui({props:{color:r[3]}}),{c(){e=k("button"),M(t.$$.fragment),n=O(),s=k("div"),M(l.$$.fragment),i=O(),M(a.$$.fragment),this.h()},l(h){e=E(h,"BUTTON",{class:!0});var f=v(e);N(t.$$.fragment,f),n=z(f),s=E(f,"DIV",{class:!0});var y=v(s);N(l.$$.fragment,y),i=z(y),N(a.$$.fragment,y),y.forEach(g),f.forEach(g),this.h()},h(){m(s,"class","flex h-full items-center"),m(e,"class",o=`tab ${r[0].name===r[5].name&&!r[2]&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`)},m(h,f){p(h,e,f),A(t,e,null),b(e,n),b(e,s),A(l,s,null),b(s,i),A(a,s,null),d=!0,u||(c=x(e,"click",r[7]),u=!0)},p(h,[f]){const y={};f&16&&(y.name=h[4]),t.$set(y);const I={};f&16&&(I.name=h[4]),l.$set(I);const Y={};f&8&&(Y.color=h[3]),a.$set(Y),(!d||f&37&&o!==(o=`tab ${h[0].name===h[5].name&&!h[2]&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`))&&m(e,"class",o)},i(h){d||(_(t.$$.fragment,h),_(l.$$.fragment,h),_(a.$$.fragment,h),d=!0)},o(h){w(t.$$.fragment,h),w(l.$$.fragment,h),w(a.$$.fragment,h),d=!1},d(h){h&&g(e),B(t),B(l),B(a),u=!1,c()}}}function bi(r,e,t){let n,s,l,i,a;F(r,we,c=>t(6,i=c)),F(r,se,c=>t(5,a=c));let{label:o,labelAction:d}=e;const u=()=>d(o);return r.$$set=c=>{"label"in c&&t(0,o=c.label),"labelAction"in c&&t(1,d=c.labelAction)},r.$$.update=()=>{r.$$.dirty&1&&t(4,{name:n,color:s}=o,n,(t(3,s),t(0,o))),r.$$.dirty&64&&t(2,l=i.name==="Classification")},[o,d,l,s,n,a,i,u]}class _i extends P{constructor(e){super(),T(this,e,bi,gi,D,{label:0,labelAction:1})}}function Zt(r,e,t){const n=r.slice();return n[8]=e[t],n}function Jt(r,e){let t,n,s,l,i,a;n=new _i({props:{label:e[8],labelAction:e[0]}});function o(...d){return e[4](e[8],...d)}return{key:r,first:null,c(){t=k("div"),M(n.$$.fragment),s=O(),this.h()},l(d){t=E(d,"DIV",{draggable:!0});var u=v(t);N(n.$$.fragment,u),s=z(u),u.forEach(g),this.h()},h(){m(t,"draggable","true"),this.first=t},m(d,u){p(d,t,u),A(n,t,null),b(t,s),l=!0,i||(a=x(t,"dragstart",o),i=!0)},p(d,u){e=d;const c={};u&4&&(c.label=e[8]),u&1&&(c.labelAction=e[0]),n.$set(c)},i(d){l||(_(n.$$.fragment,d),l=!0)},o(d){w(n.$$.fragment,d),l=!1},d(d){d&&g(t),B(n),i=!1,a()}}}function Qt(r){let e,t,n,s,l;return t=new ni({props:{size:40,color:r[1]?"#202124":"#5e5e5e"}}),{c(){e=k("i"),M(t.$$.fragment),this.h()},l(i){e=E(i,"I",{ondragover:!0,class:!0,"aria-label":!0});var a=v(e);N(t.$$.fragment,a),a.forEach(g),this.h()},h(){m(e,"ondragover","return false"),m(e,"class","flex justify-end mr-3"),m(e,"aria-label","Drop label here to remove it")},m(i,a){p(i,e,a),A(t,e,null),n=!0,s||(l=[x(e,"dragenter",r[5]),x(e,"dragleave",r[6]),x(e,"drop",r[7])],s=!0)},p(i,a){const o={};a&2&&(o.color=i[1]?"#202124":"#5e5e5e"),t.$set(o)},i(i){n||(_(t.$$.fragment,i),n=!0)},o(i){w(t.$$.fragment,i),n=!1},d(i){i&&g(e),B(t),s=!1,Me(l)}}}function vi(r){let e,t,n=[],s=new Map,l,i,a=r[2];const o=u=>u[8].name;for(let u=0;u<a.length;u+=1){let c=Zt(r,a,u),h=o(c);s.set(h,n[u]=Jt(h,c))}let d=r[2].length>0&&Qt(r);return{c(){e=k("section"),t=k("div");for(let u=0;u<n.length;u+=1)n[u].c();l=O(),d&&d.c(),this.h()},l(u){e=E(u,"SECTION",{class:!0});var c=v(e);t=E(c,"DIV",{class:!0,"aria-label":!0});var h=v(t);for(let f=0;f<n.length;f+=1)n[f].l(h);h.forEach(g),l=z(c),d&&d.l(c),c.forEach(g),this.h()},h(){m(t,"class","flex flex-col w-full max-h-[300px] overflow-y-auto gap-1"),m(t,"aria-label","Label selector"),m(e,"class","flex-1 flex flex-col w-full gap-2")},m(u,c){p(u,e,c),b(e,t);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(t,null);b(e,l),d&&d.m(e,null),i=!0},p(u,[c]){c&5&&(a=u[2],K(),n=mt(n,c,o,1,u,a,s,t,wn,Jt,null,Zt),X()),u[2].length>0?d?(d.p(u,c),c&4&&_(d,1)):(d=Qt(u),d.c(),_(d,1),d.m(e,null)):d&&(K(),w(d,1,1,()=>{d=null}),X())},i(u){if(!i){for(let c=0;c<a.length;c+=1)_(n[c]);_(d),i=!0}},o(u){for(let c=0;c<n.length;c+=1)w(n[c]);w(d),i=!1},d(u){u&&g(e);for(let c=0;c<n.length;c+=1)n[c].d();d&&d.d()}}}function pi(r,e){r.dataTransfer.setData("text/plain",JSON.stringify(e))}function wi(r,e,t){let n;F(r,_e,c=>t(2,n=c));let{labelAction:s}=e,l;function i(c){c.preventDefault();const h=c.dataTransfer.getData("text/plain"),f=JSON.parse(h);$s(f),t(1,l=null)}const a=(c,h)=>pi(h,c.name),o=()=>t(1,l=!0),d=()=>t(1,l=null),u=c=>i(c);return r.$$set=c=>{"labelAction"in c&&t(0,s=c.labelAction)},[s,l,n,i,a,o,d,u]}class xe extends P{constructor(e){super(),T(this,e,wi,vi,D,{labelAction:0})}}function Li(r){let e,t,n;return t=new xe({props:{labelAction:Ks}}),{c(){e=k("section"),M(t.$$.fragment),this.h()},l(s){e=E(s,"SECTION",{class:!0});var l=v(e);N(t.$$.fragment,l),l.forEach(g),this.h()},h(){m(e,"class","flex flex-1 flex-col items-start w-full gap-9 mt-5")},m(s,l){p(s,e,l),A(t,e,null),n=!0},p:S,i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){w(t.$$.fragment,s),n=!1},d(s){s&&g(e),B(t)}}}class yi extends P{constructor(e){super(),T(this,e,null,Li,D,{})}}const Pn=r=>{const{layers:e}=r;e.eachLayer(t=>{J.removeLayer(t,re.detection)}),ee.saving.enable()},Tn=r=>{const{layer:e}=r;e.options.color=se.retrieve().color,e.options.fillOpacity=ce.retrieve().opacity,e.options.interactive=!1;const t=e.getBounds(),n={label:se.retrieve().name,bbox:[[t._southWest.lat,t._northEast.lng],[t._northEast.lat,t._southWest.lng]]};J.addLayerWithProperties(e,n,re.detection),ee.saving.enable()},Dn=r=>{const{layers:e}=r;e.eachLayer(t=>{if(t instanceof L.Rectangle){const n=t.getBounds();t.feature.properties.bbox=[[n.getSouthWest().lat,n.getNorthEast().lng],[n.getNorthEast().lat,n.getSouthWest().lng]]}t.feature.properties.updatedAt=new Date}),ee.saving.enable()},ki=()=>{const r=Z.retrieve();r&&(r.on(L.Draw.Event.CREATED,Tn),r.on(L.Draw.Event.EDITED,Dn),r.on(L.Draw.Event.DELETED,Pn))},Ei=()=>{const r=Z.retrieve();r&&(r.off(L.Draw.Event.CREATED,Tn),r.off(L.Draw.Event.EDITED,Dn),r.off(L.Draw.Event.DELETED,Pn))},Ci=()=>{const r=Z.retrieve();if(!r)return;const{detection:e}=J.retrieve(),t=new L.Control.Draw({position:Ln,edit:{featureGroup:e},draw:ur});return r.addControl(t),Si(),t},Si=()=>{const r=document.getElementsByClassName("leaflet-draw-draw-rectangle")[0];r&&r.click()},Ii=r=>{const e=Z.retrieve();!e||!r||e.removeControl(r)};function Mi(r,e,t){let n;F(r,J,l=>t(1,n=l));let s;return pe(()=>{Ii(s),t(0,s=null),Ei()}),r.$$.update=()=>{r.$$.dirty&3&&n!=null&&n.detection&&(s||(t(0,s=Ci()),ki()))},[s,n]}class Ai extends P{constructor(e){super(),T(this,e,Mi,null,D,{})}}const Bi=()=>{const r=Z.retrieve();if(!r)return;const{markerPrompts:e}=J.retrieve(),t=new L.Control.Draw({position:Ln,edit:{featureGroup:e},draw:dr});return r.addControl(t),Pi(),t},Pi=()=>{const r=document.getElementsByClassName("leaflet-draw-draw-marker")[0];r&&r.click()},Ti=r=>{const e=Z.retrieve();!e||!r||e.removeControl(r)},vt=r=>r.reduce((t,{name:n,color:s})=>(t[n]=s,t),{});var Di={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const Te=Di,Nn={};for(const r of Object.keys(Te))Nn[Te[r]]=r;const C={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Hn=C;for(const r of Object.keys(C)){if(!("channels"in C[r]))throw new Error("missing channels property: "+r);if(!("labels"in C[r]))throw new Error("missing channel labels property: "+r);if(C[r].labels.length!==C[r].channels)throw new Error("channel and label counts mismatch: "+r);const{channels:e,labels:t}=C[r];delete C[r].channels,delete C[r].labels,Object.defineProperty(C[r],"channels",{value:e}),Object.defineProperty(C[r],"labels",{value:t})}C.rgb.hsl=function(r){const e=r[0]/255,t=r[1]/255,n=r[2]/255,s=Math.min(e,t,n),l=Math.max(e,t,n),i=l-s;let a,o;l===s?a=0:e===l?a=(t-n)/i:t===l?a=2+(n-e)/i:n===l&&(a=4+(e-t)/i),a=Math.min(a*60,360),a<0&&(a+=360);const d=(s+l)/2;return l===s?o=0:d<=.5?o=i/(l+s):o=i/(2-l-s),[a,o*100,d*100]};C.rgb.hsv=function(r){let e,t,n,s,l;const i=r[0]/255,a=r[1]/255,o=r[2]/255,d=Math.max(i,a,o),u=d-Math.min(i,a,o),c=function(h){return(d-h)/6/u+1/2};return u===0?(s=0,l=0):(l=u/d,e=c(i),t=c(a),n=c(o),i===d?s=n-t:a===d?s=1/3+e-n:o===d&&(s=2/3+t-e),s<0?s+=1:s>1&&(s-=1)),[s*360,l*100,d*100]};C.rgb.hwb=function(r){const e=r[0],t=r[1];let n=r[2];const s=C.rgb.hsl(r)[0],l=1/255*Math.min(e,Math.min(t,n));return n=1-1/255*Math.max(e,Math.max(t,n)),[s,l*100,n*100]};C.rgb.cmyk=function(r){const e=r[0]/255,t=r[1]/255,n=r[2]/255,s=Math.min(1-e,1-t,1-n),l=(1-e-s)/(1-s)||0,i=(1-t-s)/(1-s)||0,a=(1-n-s)/(1-s)||0;return[l*100,i*100,a*100,s*100]};function Ni(r,e){return(r[0]-e[0])**2+(r[1]-e[1])**2+(r[2]-e[2])**2}C.rgb.keyword=function(r){const e=Nn[r];if(e)return e;let t=1/0,n;for(const s of Object.keys(Te)){const l=Te[s],i=Ni(r,l);i<t&&(t=i,n=s)}return n};C.keyword.rgb=function(r){return Te[r]};C.rgb.xyz=function(r){let e=r[0]/255,t=r[1]/255,n=r[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;const s=e*.4124+t*.3576+n*.1805,l=e*.2126+t*.7152+n*.0722,i=e*.0193+t*.1192+n*.9505;return[s*100,l*100,i*100]};C.rgb.lab=function(r){const e=C.rgb.xyz(r);let t=e[0],n=e[1],s=e[2];t/=95.047,n/=100,s/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const l=116*n-16,i=500*(t-n),a=200*(n-s);return[l,i,a]};C.hsl.rgb=function(r){const e=r[0]/360,t=r[1]/100,n=r[2]/100;let s,l,i;if(t===0)return i=n*255,[i,i,i];n<.5?s=n*(1+t):s=n+t-n*t;const a=2*n-s,o=[0,0,0];for(let d=0;d<3;d++)l=e+1/3*-(d-1),l<0&&l++,l>1&&l--,6*l<1?i=a+(s-a)*6*l:2*l<1?i=s:3*l<2?i=a+(s-a)*(2/3-l)*6:i=a,o[d]=i*255;return o};C.hsl.hsv=function(r){const e=r[0];let t=r[1]/100,n=r[2]/100,s=t;const l=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,s*=l<=1?l:2-l;const i=(n+t)/2,a=n===0?2*s/(l+s):2*t/(n+t);return[e,a*100,i*100]};C.hsv.rgb=function(r){const e=r[0]/60,t=r[1]/100;let n=r[2]/100;const s=Math.floor(e)%6,l=e-Math.floor(e),i=255*n*(1-t),a=255*n*(1-t*l),o=255*n*(1-t*(1-l));switch(n*=255,s){case 0:return[n,o,i];case 1:return[a,n,i];case 2:return[i,n,o];case 3:return[i,a,n];case 4:return[o,i,n];case 5:return[n,i,a]}};C.hsv.hsl=function(r){const e=r[0],t=r[1]/100,n=r[2]/100,s=Math.max(n,.01);let l,i;i=(2-t)*n;const a=(2-t)*s;return l=t*s,l/=a<=1?a:2-a,l=l||0,i/=2,[e,l*100,i*100]};C.hwb.rgb=function(r){const e=r[0]/360;let t=r[1]/100,n=r[2]/100;const s=t+n;let l;s>1&&(t/=s,n/=s);const i=Math.floor(6*e),a=1-n;l=6*e-i,i&1&&(l=1-l);const o=t+l*(a-t);let d,u,c;switch(i){default:case 6:case 0:d=a,u=o,c=t;break;case 1:d=o,u=a,c=t;break;case 2:d=t,u=a,c=o;break;case 3:d=t,u=o,c=a;break;case 4:d=o,u=t,c=a;break;case 5:d=a,u=t,c=o;break}return[d*255,u*255,c*255]};C.cmyk.rgb=function(r){const e=r[0]/100,t=r[1]/100,n=r[2]/100,s=r[3]/100,l=1-Math.min(1,e*(1-s)+s),i=1-Math.min(1,t*(1-s)+s),a=1-Math.min(1,n*(1-s)+s);return[l*255,i*255,a*255]};C.xyz.rgb=function(r){const e=r[0]/100,t=r[1]/100,n=r[2]/100;let s,l,i;return s=e*3.2406+t*-1.5372+n*-.4986,l=e*-.9689+t*1.8758+n*.0415,i=e*.0557+t*-.204+n*1.057,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=Math.min(Math.max(0,s),1),l=Math.min(Math.max(0,l),1),i=Math.min(Math.max(0,i),1),[s*255,l*255,i*255]};C.xyz.lab=function(r){let e=r[0],t=r[1],n=r[2];e/=95.047,t/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const s=116*t-16,l=500*(e-t),i=200*(t-n);return[s,l,i]};C.lab.xyz=function(r){const e=r[0],t=r[1],n=r[2];let s,l,i;l=(e+16)/116,s=t/500+l,i=l-n/200;const a=l**3,o=s**3,d=i**3;return l=a>.008856?a:(l-16/116)/7.787,s=o>.008856?o:(s-16/116)/7.787,i=d>.008856?d:(i-16/116)/7.787,s*=95.047,l*=100,i*=108.883,[s,l,i]};C.lab.lch=function(r){const e=r[0],t=r[1],n=r[2];let s;s=Math.atan2(n,t)*360/2/Math.PI,s<0&&(s+=360);const i=Math.sqrt(t*t+n*n);return[e,i,s]};C.lch.lab=function(r){const e=r[0],t=r[1],s=r[2]/360*2*Math.PI,l=t*Math.cos(s),i=t*Math.sin(s);return[e,l,i]};C.rgb.ansi16=function(r,e=null){const[t,n,s]=r;let l=e===null?C.rgb.hsv(r)[2]:e;if(l=Math.round(l/50),l===0)return 30;let i=30+(Math.round(s/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return l===2&&(i+=60),i};C.hsv.ansi16=function(r){return C.rgb.ansi16(C.hsv.rgb(r),r[2])};C.rgb.ansi256=function(r){const e=r[0],t=r[1],n=r[2];return e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5)};C.ansi16.rgb=function(r){let e=r%10;if(e===0||e===7)return r>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(~~(r>50)+1)*.5,n=(e&1)*t*255,s=(e>>1&1)*t*255,l=(e>>2&1)*t*255;return[n,s,l]};C.ansi256.rgb=function(r){if(r>=232){const l=(r-232)*10+8;return[l,l,l]}r-=16;let e;const t=Math.floor(r/36)/5*255,n=Math.floor((e=r%36)/6)/5*255,s=e%6/5*255;return[t,n,s]};C.rgb.hex=function(r){const t=(((Math.round(r[0])&255)<<16)+((Math.round(r[1])&255)<<8)+(Math.round(r[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};C.hex.rgb=function(r){const e=r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(a=>a+a).join(""));const n=parseInt(t,16),s=n>>16&255,l=n>>8&255,i=n&255;return[s,l,i]};C.rgb.hcg=function(r){const e=r[0]/255,t=r[1]/255,n=r[2]/255,s=Math.max(Math.max(e,t),n),l=Math.min(Math.min(e,t),n),i=s-l;let a,o;return i<1?a=l/(1-i):a=0,i<=0?o=0:s===e?o=(t-n)/i%6:s===t?o=2+(n-e)/i:o=4+(e-t)/i,o/=6,o%=1,[o*360,i*100,a*100]};C.hsl.hcg=function(r){const e=r[1]/100,t=r[2]/100,n=t<.5?2*e*t:2*e*(1-t);let s=0;return n<1&&(s=(t-.5*n)/(1-n)),[r[0],n*100,s*100]};C.hsv.hcg=function(r){const e=r[1]/100,t=r[2]/100,n=e*t;let s=0;return n<1&&(s=(t-n)/(1-n)),[r[0],n*100,s*100]};C.hcg.rgb=function(r){const e=r[0]/360,t=r[1]/100,n=r[2]/100;if(t===0)return[n*255,n*255,n*255];const s=[0,0,0],l=e%1*6,i=l%1,a=1-i;let o=0;switch(Math.floor(l)){case 0:s[0]=1,s[1]=i,s[2]=0;break;case 1:s[0]=a,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=i;break;case 3:s[0]=0,s[1]=a,s[2]=1;break;case 4:s[0]=i,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=a}return o=(1-t)*n,[(t*s[0]+o)*255,(t*s[1]+o)*255,(t*s[2]+o)*255]};C.hcg.hsv=function(r){const e=r[1]/100,t=r[2]/100,n=e+t*(1-e);let s=0;return n>0&&(s=e/n),[r[0],s*100,n*100]};C.hcg.hsl=function(r){const e=r[1]/100,n=r[2]/100*(1-e)+.5*e;let s=0;return n>0&&n<.5?s=e/(2*n):n>=.5&&n<1&&(s=e/(2*(1-n))),[r[0],s*100,n*100]};C.hcg.hwb=function(r){const e=r[1]/100,t=r[2]/100,n=e+t*(1-e);return[r[0],(n-e)*100,(1-n)*100]};C.hwb.hcg=function(r){const e=r[1]/100,n=1-r[2]/100,s=n-e;let l=0;return s<1&&(l=(n-s)/(1-s)),[r[0],s*100,l*100]};C.apple.rgb=function(r){return[r[0]/65535*255,r[1]/65535*255,r[2]/65535*255]};C.rgb.apple=function(r){return[r[0]/255*65535,r[1]/255*65535,r[2]/255*65535]};C.gray.rgb=function(r){return[r[0]/100*255,r[0]/100*255,r[0]/100*255]};C.gray.hsl=function(r){return[0,0,r[0]]};C.gray.hsv=C.gray.hsl;C.gray.hwb=function(r){return[0,100,r[0]]};C.gray.cmyk=function(r){return[0,0,0,r[0]]};C.gray.lab=function(r){return[r[0],0,0]};C.gray.hex=function(r){const e=Math.round(r[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n};C.rgb.gray=function(r){return[(r[0]+r[1]+r[2])/3/255*100]};const Je=Hn;function Hi(){const r={},e=Object.keys(Je);for(let t=e.length,n=0;n<t;n++)r[e[n]]={distance:-1,parent:null};return r}function Oi(r){const e=Hi(),t=[r];for(e[r].distance=0;t.length;){const n=t.pop(),s=Object.keys(Je[n]);for(let l=s.length,i=0;i<l;i++){const a=s[i],o=e[a];o.distance===-1&&(o.distance=e[n].distance+1,o.parent=n,t.unshift(a))}}return e}function zi(r,e){return function(t){return e(r(t))}}function ji(r,e){const t=[e[r].parent,r];let n=Je[e[r].parent][r],s=e[r].parent;for(;e[s].parent;)t.unshift(e[s].parent),n=zi(Je[e[s].parent][s],n),s=e[s].parent;return n.conversion=t,n}var Vi=function(r){const e=Oi(r),t={},n=Object.keys(e);for(let s=n.length,l=0;l<s;l++){const i=n[l];e[i].parent!==null&&(t[i]=ji(i,e))}return t};const rt=Hn,Ri=Vi,Ce={},Gi=Object.keys(rt);function qi(r){const e=function(...t){const n=t[0];return n==null?n:(n.length>1&&(t=n),r(t))};return"conversion"in r&&(e.conversion=r.conversion),e}function Fi(r){const e=function(...t){const n=t[0];if(n==null)return n;n.length>1&&(t=n);const s=r(t);if(typeof s=="object")for(let l=s.length,i=0;i<l;i++)s[i]=Math.round(s[i]);return s};return"conversion"in r&&(e.conversion=r.conversion),e}Gi.forEach(r=>{Ce[r]={},Object.defineProperty(Ce[r],"channels",{value:rt[r].channels}),Object.defineProperty(Ce[r],"labels",{value:rt[r].labels});const e=Ri(r);Object.keys(e).forEach(n=>{const s=e[n];Ce[r][n]=Fi(s),Ce[r][n].raw=qi(s)})});var Ui=Ce;const Wi=r=>{const[e,t,n]=Ui.hex.hsl(r);let l=e-206;return l<0&&(l+=360),[l,t,n]},On=async(r,e)=>{const t=vt(_e.retrieve()),[n,s,l]=Wi(t[e]),i=r.getElement();if(!i)return;const a=e.replace(/\s/g,"");i.classList.add(`${a}-marker`);const o=`hue-rotate(${n}deg) saturate(${s}%)`;i.style.setProperty("filter",o),i.style.setProperty("opacity","0");const d=se.retrieve().name;e===d&&i.style.setProperty("opacity","1")},zn=async r=>{const e=se.retrieve().name,t={label:e,prompt:!0},n=J.addLayerWithProperties(r.layer,t,re.markerPrompts);ee.saving.enable(),ee.samMaskRequest.enable(),await Ne(),On(n,e)},jn=r=>{const{layers:e}=r,t=Z.retrieve();e.eachLayer(n=>{t.removeLayer(n)}),ee.saving.enable(),ee.samMaskRequest.enable()},Vn=async r=>{if(!document.getElementsByClassName("leaflet-draw-toolbar-button-enabled").length)return;const t=L.marker(r.latlng),n=se.retrieve().name,s={background:yn,label:n,prompt:!0},l=J.addLayerWithProperties(t,s,re.markerPrompts);ee.saving.enable(),ee.samMaskRequest.enable(),await Ne();const i=l.getElement();i==null||i.classList.add("background-marker")},Zi=()=>{const r=Z.retrieve();r&&(Ji(r),Qi(r),Ki(r))},Ji=r=>{r.on(L.Draw.Event.CREATED,zn)},Qi=r=>{r.on(L.Draw.Event.DELETED,jn)},Ki=r=>{r.on("contextmenu",Vn)},Xi=()=>{const r=Z.retrieve();r&&(Yi(r),xi(r),$i(r))},Yi=r=>{r.off(L.Draw.Event.CREATED,zn)},xi=r=>{r.off(L.Draw.Event.DELETED,jn)},$i=r=>{r.off("contextmenu",Vn)};function el(r){let e;return De(()=>{e=Bi(),Zi()}),pe(()=>{Ti(e),Xi()}),[]}class tl extends P{constructor(e){super(),T(this,e,el,null,D,{})}}const Rn=()=>{const{segmentation:r}=J.retrieve(),e=se.retrieve().name;let t;return r.eachLayer(n=>{var s,l;((l=(s=n.feature)==null?void 0:s.properties)==null?void 0:l.label)===e&&(t=n)}),t||null},nl=r=>r.toGeoJSON().features[0],rl=()=>{const r=Rn();return r?nl(r):null},sl=r=>{const e=Rn();e&&J.removeLayer(e,re.segmentation),r&&r.properties&&(r.properties.label=se.retrieve().name,r.properties.task="segmentation");const t=ce.retrieve().opacity,n=L.geoJSON(r,{style:{color:se.retrieve().color,weight:.4,fillOpacity:t,interactive:!1}}),s={label:se.retrieve().name,multipolygon:!0};return J.addLayerWithProperties(n,s,re.segmentation),ee.saving.enable(),n},Gn=(r=!1)=>{const e=Z.retrieve();return e?L.control.paintPolygon({initData:rl,drawCallback:sl,selectEraser:r}).addTo(e):void 0},qn=r=>{const e=Z.retrieve();!e||!r||e.removeControl(r)},il=()=>{const r="leaflet-control-paintpolygon-icon-eraser",e=document.getElementsByClassName(r)[0];return e?e.classList.contains("leaflet-control-paintpolygon-icon-active"):!1},ll=r=>{const e=il();return qn(r),Gn(e)};function al(r,e,t){let n,s,l;F(r,Z,a=>t(1,n=a)),F(r,be,a=>t(2,s=a)),F(r,se,a=>t(3,l=a));let i;return De(async()=>{await Fe(()=>import("../chunks/PaintPolygon.6d972d98.js"),["../chunks/PaintPolygon.6d972d98.js","../assets/PaintPolygon.a6758b13.css"],import.meta.url),t(0,i=Gn())}),pe(()=>{qn(i),t(0,i=null)}),r.$$.update=()=>{r.$$.dirty&15&&l!=null&&l.name&&s!=null&&s.name&&n&&i&&t(0,i=ll(i))},[i,n,s,l]}class ol extends P{constructor(e){super(),T(this,e,al,null,D,{})}}const st=fe(!0),cl=()=>{const r=He.retrieve(),{bands:e,stretch:t}=ce.retrieve(),n=Object.values(e).join(","),s=Object.values(t).join(","),l=mr,i=be.retrieve().name;return`${r}/images/${i}/{z}/{x}/{y}.png?bands=${n}&stretch=${s}&palette=${l}`};let qe;const pt=async()=>{const r=Z.retrieve(),e=be.retrieve(),t=cl();if(!r||!e)return;qe&&r.removeLayer(qe),qe=L.tileLayer(t,hr).addTo(r);const n=qe.getContainer();await Ne(),n.ariaLabel=`${e.name} image layer`,Q(st)&&fl(e,r)},fl=(r,e)=>{const t=L.latLng(r.bbox[1],r.bbox[0]),n=L.latLng(r.bbox[3],r.bbox[2]),s=L.latLngBounds(t,n);e.fitBounds(s)},wt=()=>{const r=ce.retrieve();gr("options",r)},ul=r=>{const{name:e,value:t}=r.target,n=Number(t);dl(e,n),pt()},dl=(r,e)=>{ml(r,e),wt()},ml=(r,e)=>{ce.bands[r].store(e)},hl=async r=>{var s;const[e,t]=br(r);if(!(e&&t))return;let n=gl((s=r.properties)==null?void 0:s.label);ye.store(n),An()},gl=r=>r.map(e=>({name:e})),bl=async r=>{var s,l;const e=vt(_e.retrieve()),t=ce.opacity.retrieve(),n=L.rectangle((s=r.properties)==null?void 0:s.bbox,{color:e[(l=r.properties)==null?void 0:l.label],weight:kn,fillOpacity:t,interactive:!1});J.addLayerWithProperties(n,r.properties,re.detection)},_l=r=>{const e=se.retrieve().name;r===e&&ee.samMaskRequest.enable()},Fn=async r=>{var o,d;if(r.geometry.type!=="Point")return;const[e,t]=r.geometry.coordinates;if(!e||!t)return;const n=L.latLng(t,e),s=L.marker(n),l=J.addLayerWithProperties(s,r.properties,re.markerPrompts);if(!((o=r.properties)!=null&&o.label))return;const i=r.properties.label;if(On(s,i),_l(i),((d=r.properties)==null?void 0:d.background)!==yn)return;await Ne();const a=l.getElement();a==null||a.classList.add("background-marker")},vl=async r=>{var l;const e=vt(_e.retrieve()),t=ce.opacity.retrieve(),n={color:e[(l=r.properties)==null?void 0:l.label],weight:kn,fillOpacity:t,interactive:!1},s=L.geoJSON(r,{style:n});J.addLayerWithProperties(s,r.properties,re.segmentation)},Lt=r=>{wl(),pl(r)},pl=r=>{r.features.forEach(e=>{var n;const t=(n=e.properties)==null?void 0:n.task;if(t){if(t===re.classification){hl(e);return}if(t===re.segmentation){vl(e);return}if(t===re.detection){bl(e);return}if(t===re.markerPrompts){Fn(e);return}}})},wl=()=>{ye.store([])},Ll=()=>{const r=Z.retrieve();J.clear(r);const e=Ye.retrieve();Lt(e)},yl=r=>{const{value:e}=r.target,t=Number(e);kl(t),Ll()},kl=r=>{El(r),wt()},El=r=>{const e=r/100;ce.opacity.store(e)},Cl=r=>{const{name:e,value:t}=r.target,n=Number(t);Sl(e,n),pt()},Sl=(r,e)=>{Il(r,e),wt()},Il=(r,e)=>{ce.stretch[r].store(e)};function Ml(r){let e,t,n,s,l,i,a,o,d,u,c,h,f,y,I,Y,le,te,U,ae,ie,ve,ue,de,ke,tt,he,ze,nt,kt;return{c(){e=k("section"),t=k("legend"),n=k("span"),s=G("RGB bands"),l=O(),i=k("fieldset"),a=k("input"),o=O(),d=k("input"),u=O(),c=k("input"),h=O(),f=k("section"),y=k("legend"),I=k("span"),Y=G("Stretch"),le=O(),te=k("fieldset"),U=k("input"),ae=O(),ie=k("input"),ve=O(),ue=k("section"),de=k("label"),ke=G("Layer opacity"),tt=O(),he=k("input"),this.h()},l(R){e=E(R,"SECTION",{});var ne=v(e);t=E(ne,"LEGEND",{class:!0});var Et=v(t);n=E(Et,"SPAN",{});var Ct=v(n);s=q(Ct,"RGB bands"),Ct.forEach(g),Et.forEach(g),l=z(ne),i=E(ne,"FIELDSET",{class:!0});var Ee=v(i);a=E(Ee,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),o=z(Ee),d=E(Ee,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),u=z(Ee),c=E(Ee,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),Ee.forEach(g),ne.forEach(g),h=z(R),f=E(R,"SECTION",{});var je=v(f);y=E(je,"LEGEND",{class:!0});var St=v(y);I=E(St,"SPAN",{});var It=v(I);Y=q(It,"Stretch"),It.forEach(g),St.forEach(g),le=z(je),te=E(je,"FIELDSET",{class:!0});var Ve=v(te);U=E(Ve,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),ae=z(Ve),ie=E(Ve,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),Ve.forEach(g),je.forEach(g),ve=z(R),ue=E(R,"SECTION",{class:!0});var Re=v(ue);de=E(Re,"LABEL",{for:!0,class:!0});var Mt=v(de);ke=q(Mt,"Layer opacity"),Mt.forEach(g),tt=z(Re),he=E(Re,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),Re.forEach(g),this.h()},h(){m(t,"class","label"),a.required=!0,m(a,"type","number"),m(a,"placeholder","R"),m(a,"name","red"),m(a,"class","text-center input input-bordered input-error w-full max-w-xs svelte-7yy2hn"),a.value=r[0],d.required=!0,m(d,"type","number"),m(d,"placeholder","G"),m(d,"name","green"),m(d,"class","text-center input input-bordered input-success w-full max-w-xs svelte-7yy2hn"),d.value=r[1],c.required=!0,m(c,"type","number"),m(c,"placeholder","B"),m(c,"name","blue"),m(c,"class","text-center input input-bordered input-info w-full max-w-xs svelte-7yy2hn"),c.value=r[2],m(i,"class","flex gap-3"),m(y,"class","label"),U.required=!0,m(U,"type","number"),m(U,"placeholder","Minimum"),m(U,"name","minimum"),m(U,"class","input input-bordered w-full max-w-xs svelte-7yy2hn"),U.value=r[3],ie.required=!0,m(ie,"type","number"),m(ie,"placeholder","Maximum"),m(ie,"name","maximum"),m(ie,"class","input input-bordered w-full max-w-xs svelte-7yy2hn"),ie.value=r[4],m(te,"class","flex gap-3"),m(de,"for","opacity-range"),m(de,"class","label"),m(he,"id","opacity-range"),m(he,"type","range"),m(he,"min","0"),m(he,"max","100"),he.value=ze=r[5]*100,m(he,"class","range range-primary svelte-7yy2hn"),m(ue,"class","flex flex-col gap-3")},m(R,ne){p(R,e,ne),b(e,t),b(t,n),b(n,s),b(e,l),b(e,i),b(i,a),b(i,o),b(i,d),b(i,u),b(i,c),p(R,h,ne),p(R,f,ne),b(f,y),b(y,I),b(I,Y),b(f,le),b(f,te),b(te,U),b(te,ae),b(te,ie),p(R,ve,ne),p(R,ue,ne),b(ue,de),b(de,ke),b(ue,tt),b(ue,he),nt||(kt=[x(i,"input",ul),x(te,"input",Cl),x(he,"input",yl)],nt=!0)},p(R,ne){ne&1&&a.value!==R[0]&&(a.value=R[0]),ne&2&&d.value!==R[1]&&(d.value=R[1]),ne&4&&c.value!==R[2]&&(c.value=R[2]),ne&8&&U.value!==R[3]&&(U.value=R[3]),ne&16&&ie.value!==R[4]&&(ie.value=R[4]),ne&32&&ze!==(ze=R[5]*100)&&(he.value=ze)},d(R){R&&g(e),R&&g(h),R&&g(f),R&&g(ve),R&&g(ue),nt=!1,Me(kt)}}}function Al(r){let e,t=ce&&Ml(r);return{c(){e=k("form"),t&&t.c(),this.h()},l(n){e=E(n,"FORM",{class:!0,id:!0});var s=v(e);t&&t.l(s),s.forEach(g),this.h()},h(){m(e,"class","form-control w-full h-full max-w-xs flex flex-col gap-5 items text-xl"),m(e,"id","bands-and-stretch")},m(n,s){p(n,e,s),t&&t.m(e,null)},p(n,[s]){ce&&t.p(n,s)},i:S,o:S,d(n){n&&g(e),t&&t.d()}}}function Bl(r,e,t){let n;F(r,ce,u=>t(6,n=u));let s,l,i,a,o,d;return r.$$.update=()=>{r.$$.dirty&64&&t(0,{bands:{red:s,green:l,blue:i},stretch:{minimum:a,maximum:o},opacity:d}=n,s,(t(1,l),t(6,n)),(t(2,i),t(6,n)),(t(3,a),t(6,n)),(t(4,o),t(6,n)),(t(5,d),t(6,n)))},[s,l,i,a,o,d,n]}class Pl extends P{constructor(e){super(),T(this,e,Bl,Al,D,{})}}const it=fe(!0),Un=(r,e,t)=>{const{loading:n,success:s}=t;oe.promise(r,{loading:n,success:s,error:()=>e})},yt=()=>{const r=J.retrieve(),{detection:e,segmentation:t,classification:n,markerPrompts:s}=r;return L.layerGroup([e,t,n,s]).toGeoJSON()},Tl=r=>JSON.stringify({geojson:r,name:be.retrieve().name}),$e=r=>{Ye.store(r)},Wn=async()=>{const r=yt();$e(r),En();const e=Tl(r);let t=Ze;const n=new Promise(async(s,l)=>{try{const i=await Cn(e,Ae.geojsonEndpoint);if(!i.ok)throw i.statusText&&(t=Ze),new Error;const a=await i.json();s()}catch{l()}});ee.saving.disable(),ee.samMaskRequest.disable(),ht(),Un(n,t,_r)},Zn=()=>{ee.saving.retrieve()&&(vr()&&Wn(),ee.saving.disable())},Jn=r=>{we.getName()!==r.name&&(Zn(),ee.saving.disable(),ee.samMaskRequest.disable(),we.set(r))},Dl=r=>{const e=r.getBounds();Z.retrieve().fitBounds(e)};function Nl(){const r=fe(0),{subscribe:e,set:t}=r;return{subscribe:e,set:n=>t(n)}}const Se=Nl(),Hl=(r,e)=>{if(r<0)return;const t=Ol(r);Se.set(t),zl(e)},Ol=r=>Math.floor(r/ge)*ge,zl=r=>{const e=document.getElementById("image-selector"),t=document.getElementById(r);!e||!t||t.scrollIntoView({behavior:"smooth"})},Qn=()=>{const r=Z.retrieve();r&&J.init(r)},Kn=()=>{const r=Z.retrieve();r&&(pr(),J.remove(r))},jl=()=>{Kn(),Qn()},Vl=r=>{$e(r),Lt(r)},Rl=He.retrieve(),Gl=async()=>{var s;Pe.markAnnotationsAsLoading();const r=(s=be.retrieve())==null?void 0:s.name;if(!r)return;const e=Rl+Ae.geojsonEndpoint+"/"+r,t=await fetch(e);if(!t.ok)return;const n=await t.json();if(!n.status_code)return n},lt=async r=>{const e=be.retrieve().name;if(r.name===e)return;Zn(),be.store(r),pt(),jl(),ye.empty();const t=await Gl();Pe.markAnnotationsAsLoaded(),!(!t||!t.features)&&Vl(t)},ql=r=>{if(!r.length)return;const e=Fl(r),t=Ul(e,r);return Wl(t)},Fl=r=>r.map(t=>{const n=t.bbox,s=L.latLng(n[1],n[0]),l=L.latLng(n[3],n[2]);return L.latLngBounds(s,l)}),Ul=(r,e)=>r.map((t,n)=>L.rectangle(t,{color:"blue",weight:1}).on("click",()=>{var s;lt(e[n]),Jn(Yn),Hl(n,(s=e[n])==null?void 0:s.name)})),Wl=r=>{const e=Z.retrieve(),t=L.featureGroup(r).addTo(e);return Q(it)&&Dl(t),t},Zl=()=>{Jl();const r=Ql();Kl(r)},Jl=()=>{const r=yt();$e(r),J.retrieve().markerPrompts.getLayers().forEach(t=>{J.removeLayer(t,re.markerPrompts)})},Ql=()=>{var t;const r=Ye.retrieve();return{...r,features:(t=r==null?void 0:r.features)==null?void 0:t.filter(n=>{var s;return(s=n.properties)==null?void 0:s.prompt})}},Kl=r=>{var e;if((e=r.features)!=null&&e.length)for(const t of r.features)Fn(t)},et=r=>{se.retrieve().name!==r.name&&(se.store(r),Zl())};function Xl(r){let e,t,n,s,l,i,a,o,d,u,c,h,f,y,I,Y,le,te;return t=new xe({props:{labelAction:et}}),{c(){e=k("section"),M(t.$$.fragment),n=O(),s=k("div"),l=k("label"),i=k("input"),a=O(),o=k("span"),d=G("Zoom out on Quick selection"),u=O(),c=k("label"),h=k("input"),f=O(),y=k("span"),I=G("Zoom in on selecting image"),this.h()},l(U){e=E(U,"SECTION",{class:!0});var ae=v(e);N(t.$$.fragment,ae),n=z(ae),s=E(ae,"DIV",{class:!0});var ie=v(s);l=E(ie,"LABEL",{class:!0,for:!0});var ve=v(l);i=E(ve,"INPUT",{type:!0,name:!0,class:!0}),a=z(ve),o=E(ve,"SPAN",{class:!0});var ue=v(o);d=q(ue,"Zoom out on Quick selection"),ue.forEach(g),ve.forEach(g),u=z(ie),c=E(ie,"LABEL",{class:!0,for:!0});var de=v(c);h=E(de,"INPUT",{type:!0,name:!0,class:!0}),f=z(de),y=E(de,"SPAN",{class:!0});var ke=v(y);I=q(ke,"Zoom in on selecting image"),ke.forEach(g),de.forEach(g),ie.forEach(g),ae.forEach(g),this.h()},h(){m(i,"type","checkbox"),m(i,"name","zoom-out"),m(i,"class","checkbox checkbox-info"),m(o,"class","label-text text-gray-600"),m(l,"class","label cursor-pointer flex justify-start gap-5 text-slate-400"),m(l,"for","zoom-out"),m(h,"type","checkbox"),m(h,"name","zoom-in"),m(h,"class","checkbox checkbox-info"),m(y,"class","label-text text-gray-600"),m(c,"class","label cursor-pointer flex justify-start gap-5 text-slate-400"),m(c,"for","zoom-in"),m(s,"class","form-control"),m(e,"class","flex-1 flex flex-col justify-between w-full mt-5")},m(U,ae){p(U,e,ae),A(t,e,null),b(e,n),b(e,s),b(s,l),b(l,i),i.checked=r[0],b(l,a),b(l,o),b(o,d),b(s,u),b(s,c),b(c,h),h.checked=r[1],b(c,f),b(c,y),b(y,I),Y=!0,le||(te=[x(i,"change",r[3]),x(h,"change",r[4])],le=!0)},p(U,[ae]){ae&1&&(i.checked=U[0]),ae&2&&(h.checked=U[1])},i(U){Y||(_(t.$$.fragment,U),Y=!0)},o(U){w(t.$$.fragment,U),Y=!1},d(U){U&&g(e),B(t),le=!1,Me(te)}}}function Yl(r,e,t){let n,s,l;F(r,_t,d=>t(2,n=d)),F(r,it,d=>t(0,s=d)),F(r,st,d=>t(1,l=d));let i=[];pe(()=>{i.clearLayers&&(i==null||i.clearLayers())});function a(){s=this.checked,it.set(s)}function o(){l=this.checked,st.set(l)}return r.$$.update=()=>{r.$$.dirty&4&&n.length&&(i=ql(n))},[s,l,n,a,o]}class xl extends P{constructor(e){super(),T(this,e,Yl,Xl,D,{})}}const $l=()=>{const{markerPrompts:r}=J.retrieve(),e=wr(r),t=Lr(e),n=yr(e),s=be.retrieve().name,l=se.retrieve().name,{bands:i,stretch:a}=ce.retrieve();return JSON.stringify({points:t,pointsLabel:n,image:s,label:l,bands:{bands:i,stretch:a}})},ea=r=>{ra();const e=ta(r);Lt(e),ht()},ta=r=>{const e=na();return{...e,features:[...e.features,...r.features]}},na=()=>{var s;const r=se.retrieve().name,e=Ye.retrieve(),t=(s=e==null?void 0:e.features)==null?void 0:s.filter(l=>{var i;return l.geometry.type!=="MultiPolygon"||((i=l.properties)==null?void 0:i.label)!==r});return{...e,features:t}},ra=()=>{const r=Q(Z);J.clear(r)},sa=async()=>{$e(yt()),kr(),En(),Er();const r=$l();let e=Ze;const t=new Promise(async(n,s)=>{try{const l=await Cn(r,Ae.samEndpoint);if(!l.ok)throw l.statusText&&(e=Ze),new Error;const i=await l.json();ea(i),n()}catch{s()}});Un(t,e,Cr),t.finally(()=>ht())};function ia(r){let e,t,n,s,l,i,a,o,d;return t=new xe({props:{labelAction:et}}),{c(){e=k("section"),M(t.$$.fragment),n=O(),s=k("button"),l=G("Generate mask"),this.h()},l(u){e=E(u,"SECTION",{class:!0});var c=v(e);N(t.$$.fragment,c),n=z(c),s=E(c,"BUTTON",{class:!0});var h=v(s);l=q(h,"Generate mask"),h.forEach(g),c.forEach(g),this.h()},h(){m(s,"class",i=`btn w-full btn-secondary text-white text-lg mt-5 font-bold ${!r[0].samMaskRequest&&"btn-disabled"}`),m(e,"class","flex-1 flex flex-col items-start w-full mt-5")},m(u,c){p(u,e,c),A(t,e,null),b(e,n),b(e,s),b(s,l),a=!0,o||(d=x(s,"click",sa),o=!0)},p(u,[c]){(!a||c&1&&i!==(i=`btn w-full btn-secondary text-white text-lg mt-5 font-bold ${!u[0].samMaskRequest&&"btn-disabled"}`))&&m(s,"class",i)},i(u){a||(_(t.$$.fragment,u),a=!0)},o(u){w(t.$$.fragment,u),a=!1},d(u){u&&g(e),B(t),o=!1,d()}}}function la(r,e,t){let n;return F(r,ee,s=>t(0,n=s)),[n]}class aa extends P{constructor(e){super(),T(this,e,la,ia,D,{})}}function oa(r){let e,t,n;return t=new xe({props:{labelAction:et}}),{c(){e=k("section"),M(t.$$.fragment),this.h()},l(s){e=E(s,"SECTION",{class:!0});var l=v(e);N(t.$$.fragment,l),l.forEach(g),this.h()},h(){m(e,"class","flex flex-1 flex-col items-start w-full mt-5")},m(s,l){p(s,e,l),A(t,e,null),n=!0},p:S,i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){w(t.$$.fragment,s),n=!1},d(s){s&&g(e),B(t)}}}class Xn extends P{constructor(e){super(),T(this,e,null,oa,D,{})}}function Kt(r){let e,t;return{c(){e=j("desc"),t=G(r[7])},l(n){e=V(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&128&&$(t,n[7])},d(n){n&&g(e)}}}function Xt(r){let e,t;return{c(){e=j("title"),t=G(r[6])},l(n){e=V(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&64&&$(t,n[6])},d(n){n&&g(e)}}}function ca(r){let e,t,n,s=r[7]&&Kt(r),l=r[6]&&Xt(r);return{c(){e=j("svg"),s&&s.c(),t=H(),l&&l.c(),n=j("path"),this.h()},l(i){e=V(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var a=v(e);s&&s.l(a),t=H(),l&&l.l(a),n=V(a,"path",{d:!0,fill:!0}),v(n).forEach(g),a.forEach(g),this.h()},h(){m(n,"d","M7.5,5.6L5,7L6.4,4.5L5,2L7.5,3.4L10,2L8.6,4.5L10,7L7.5,5.6M19.5,15.4L22,14L20.6,16.5L22,19L19.5,17.6L17,19L18.4,16.5L17,14L19.5,15.4M22,2L20.6,4.5L22,7L19.5,5.6L17,7L18.4,4.5L17,2L19.5,3.4L22,2M13.34,12.78L15.78,10.34L13.66,8.22L11.22,10.66L13.34,12.78M14.37,7.29L16.71,9.63C17.1,10 17.1,10.65 16.71,11.04L5.04,22.71C4.65,23.1 4,23.1 3.63,22.71L1.29,20.37C0.9,20 0.9,19.35 1.29,18.96L12.96,7.29C13.35,6.9 14,6.9 14.37,7.29Z"),m(n,"fill",r[2]),m(e,"viewBox",r[3]),m(e,"width",r[0]),m(e,"height",r[1]),m(e,"class",r[8]),m(e,"aria-label",r[4]),m(e,"aria-hidden",r[5])},m(i,a){p(i,e,a),s&&s.m(e,null),b(e,t),l&&l.m(e,null),b(e,n)},p(i,[a]){i[7]?s?s.p(i,a):(s=Kt(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?l?l.p(i,a):(l=Xt(i),l.c(),l.m(e,n)):l&&(l.d(1),l=null),a&4&&m(n,"fill",i[2]),a&8&&m(e,"viewBox",i[3]),a&1&&m(e,"width",i[0]),a&2&&m(e,"height",i[1]),a&256&&m(e,"class",i[8]),a&16&&m(e,"aria-label",i[4]),a&32&&m(e,"aria-hidden",i[5])},i:S,o:S,d(i){i&&g(e),s&&s.d(),l&&l.d()}}}function fa(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:l=n}=e,{color:i="currentColor"}=e,{viewBox:a="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:d=void 0}=e,{title:u=void 0}=e,{desc:c=void 0}=e,{class:h=void 0}=e;return r.$$set=f=>{"size"in f&&t(9,n=f.size),"width"in f&&t(0,s=f.width),"height"in f&&t(1,l=f.height),"color"in f&&t(2,i=f.color),"viewBox"in f&&t(3,a=f.viewBox),"ariaLabel"in f&&t(4,o=f.ariaLabel),"ariaHidden"in f&&t(5,d=f.ariaHidden),"title"in f&&t(6,u=f.title),"desc"in f&&t(7,c=f.desc),"class"in f&&t(8,h=f.class)},[s,l,i,a,o,d,u,c,h,n]}class ua extends P{constructor(e){super(),T(this,e,fa,ca,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function Yt(r){let e,t;return{c(){e=j("desc"),t=G(r[7])},l(n){e=V(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&128&&$(t,n[7])},d(n){n&&g(e)}}}function xt(r){let e,t;return{c(){e=j("title"),t=G(r[6])},l(n){e=V(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&64&&$(t,n[6])},d(n){n&&g(e)}}}function da(r){let e,t,n,s=r[7]&&Yt(r),l=r[6]&&xt(r);return{c(){e=j("svg"),s&&s.c(),t=H(),l&&l.c(),n=j("path"),this.h()},l(i){e=V(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var a=v(e);s&&s.l(a),t=H(),l&&l.l(a),n=V(a,"path",{d:!0,fill:!0}),v(n).forEach(g),a.forEach(g),this.h()},h(){m(n,"d","M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z"),m(n,"fill",r[2]),m(e,"viewBox",r[3]),m(e,"width",r[0]),m(e,"height",r[1]),m(e,"class",r[8]),m(e,"aria-label",r[4]),m(e,"aria-hidden",r[5])},m(i,a){p(i,e,a),s&&s.m(e,null),b(e,t),l&&l.m(e,null),b(e,n)},p(i,[a]){i[7]?s?s.p(i,a):(s=Yt(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?l?l.p(i,a):(l=xt(i),l.c(),l.m(e,n)):l&&(l.d(1),l=null),a&4&&m(n,"fill",i[2]),a&8&&m(e,"viewBox",i[3]),a&1&&m(e,"width",i[0]),a&2&&m(e,"height",i[1]),a&256&&m(e,"class",i[8]),a&16&&m(e,"aria-label",i[4]),a&32&&m(e,"aria-hidden",i[5])},i:S,o:S,d(i){i&&g(e),s&&s.d(),l&&l.d()}}}function ma(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:l=n}=e,{color:i="currentColor"}=e,{viewBox:a="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:d=void 0}=e,{title:u=void 0}=e,{desc:c=void 0}=e,{class:h=void 0}=e;return r.$$set=f=>{"size"in f&&t(9,n=f.size),"width"in f&&t(0,s=f.width),"height"in f&&t(1,l=f.height),"color"in f&&t(2,i=f.color),"viewBox"in f&&t(3,a=f.viewBox),"ariaLabel"in f&&t(4,o=f.ariaLabel),"ariaHidden"in f&&t(5,d=f.ariaHidden),"title"in f&&t(6,u=f.title),"desc"in f&&t(7,c=f.desc),"class"in f&&t(8,h=f.class)},[s,l,i,a,o,d,u,c,h,n]}class ha extends P{constructor(e){super(),T(this,e,ma,da,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function $t(r){let e,t;return{c(){e=j("desc"),t=G(r[7])},l(n){e=V(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&128&&$(t,n[7])},d(n){n&&g(e)}}}function en(r){let e,t;return{c(){e=j("title"),t=G(r[6])},l(n){e=V(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&64&&$(t,n[6])},d(n){n&&g(e)}}}function ga(r){let e,t,n,s=r[7]&&$t(r),l=r[6]&&en(r);return{c(){e=j("svg"),s&&s.c(),t=H(),l&&l.c(),n=j("path"),this.h()},l(i){e=V(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var a=v(e);s&&s.l(a),t=H(),l&&l.l(a),n=V(a,"path",{d:!0,fill:!0}),v(n).forEach(g),a.forEach(g),this.h()},h(){m(n,"d","M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z"),m(n,"fill",r[2]),m(e,"viewBox",r[3]),m(e,"width",r[0]),m(e,"height",r[1]),m(e,"class",r[8]),m(e,"aria-label",r[4]),m(e,"aria-hidden",r[5])},m(i,a){p(i,e,a),s&&s.m(e,null),b(e,t),l&&l.m(e,null),b(e,n)},p(i,[a]){i[7]?s?s.p(i,a):(s=$t(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?l?l.p(i,a):(l=en(i),l.c(),l.m(e,n)):l&&(l.d(1),l=null),a&4&&m(n,"fill",i[2]),a&8&&m(e,"viewBox",i[3]),a&1&&m(e,"width",i[0]),a&2&&m(e,"height",i[1]),a&256&&m(e,"class",i[8]),a&16&&m(e,"aria-label",i[4]),a&32&&m(e,"aria-hidden",i[5])},i:S,o:S,d(i){i&&g(e),s&&s.d(),l&&l.d()}}}function ba(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:l=n}=e,{color:i="currentColor"}=e,{viewBox:a="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:d=void 0}=e,{title:u=void 0}=e,{desc:c=void 0}=e,{class:h=void 0}=e;return r.$$set=f=>{"size"in f&&t(9,n=f.size),"width"in f&&t(0,s=f.width),"height"in f&&t(1,l=f.height),"color"in f&&t(2,i=f.color),"viewBox"in f&&t(3,a=f.viewBox),"ariaLabel"in f&&t(4,o=f.ariaLabel),"ariaHidden"in f&&t(5,d=f.ariaHidden),"title"in f&&t(6,u=f.title),"desc"in f&&t(7,c=f.desc),"class"in f&&t(8,h=f.class)},[s,l,i,a,o,d,u,c,h,n]}class _a extends P{constructor(e){super(),T(this,e,ba,ga,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function tn(r){let e,t;return{c(){e=j("desc"),t=G(r[7])},l(n){e=V(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&128&&$(t,n[7])},d(n){n&&g(e)}}}function nn(r){let e,t;return{c(){e=j("title"),t=G(r[6])},l(n){e=V(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&64&&$(t,n[6])},d(n){n&&g(e)}}}function va(r){let e,t,n,s=r[7]&&tn(r),l=r[6]&&nn(r);return{c(){e=j("svg"),s&&s.c(),t=H(),l&&l.c(),n=j("path"),this.h()},l(i){e=V(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var a=v(e);s&&s.l(a),t=H(),l&&l.l(a),n=V(a,"path",{d:!0,fill:!0}),v(n).forEach(g),a.forEach(g),this.h()},h(){m(n,"d","M9.37 4L10.78 6.5L9.37 9H6.63L5.23 6.5L6.63 4H9.37M10.25 2H5.75C5.56 2 5.39 2.11 5.31 2.26L3.09 6.22L3 6.5L3.09 6.78L5.31 10.74C5.39 10.89 5.56 11 5.75 11H10.25C10.44 11 10.61 10.89 10.69 10.74L12.91 6.78L13 6.5L12.91 6.22L10.69 2.26C10.61 2.11 10.44 2 10.25 2M18.62 9.5L20 12L18.62 14.5H15.88L14.5 12L15.88 9.5H18.62M19.5 7.5H15C14.81 7.5 14.64 7.61 14.56 7.76L12.34 11.72L12.25 12L12.34 12.28L14.56 16.24C14.64 16.39 14.81 16.5 15 16.5H19.5C19.69 16.5 19.86 16.39 19.94 16.24L22.16 12.28L22.25 12L22.16 11.72L19.94 7.76C19.86 7.61 19.69 7.5 19.5 7.5M9.37 15L10.78 17.5L9.37 20H6.63L5.23 17.5L6.63 15H9.37M10.25 13H5.75C5.56 13 5.39 13.11 5.31 13.26L3.09 17.22L3 17.5L3.09 17.78L5.31 21.74C5.39 21.89 5.56 22 5.75 22H10.25C10.44 22 10.61 21.89 10.69 21.74L12.91 17.78L13 17.5L12.91 17.22L10.69 13.26C10.61 13.11 10.44 13 10.25 13Z"),m(n,"fill",r[2]),m(e,"viewBox",r[3]),m(e,"width",r[0]),m(e,"height",r[1]),m(e,"class",r[8]),m(e,"aria-label",r[4]),m(e,"aria-hidden",r[5])},m(i,a){p(i,e,a),s&&s.m(e,null),b(e,t),l&&l.m(e,null),b(e,n)},p(i,[a]){i[7]?s?s.p(i,a):(s=tn(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?l?l.p(i,a):(l=nn(i),l.c(),l.m(e,n)):l&&(l.d(1),l=null),a&4&&m(n,"fill",i[2]),a&8&&m(e,"viewBox",i[3]),a&1&&m(e,"width",i[0]),a&2&&m(e,"height",i[1]),a&256&&m(e,"class",i[8]),a&16&&m(e,"aria-label",i[4]),a&32&&m(e,"aria-hidden",i[5])},i:S,o:S,d(i){i&&g(e),s&&s.d(),l&&l.d()}}}function pa(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:l=n}=e,{color:i="currentColor"}=e,{viewBox:a="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:d=void 0}=e,{title:u=void 0}=e,{desc:c=void 0}=e,{class:h=void 0}=e;return r.$$set=f=>{"size"in f&&t(9,n=f.size),"width"in f&&t(0,s=f.width),"height"in f&&t(1,l=f.height),"color"in f&&t(2,i=f.color),"viewBox"in f&&t(3,a=f.viewBox),"ariaLabel"in f&&t(4,o=f.ariaLabel),"ariaHidden"in f&&t(5,d=f.ariaHidden),"title"in f&&t(6,u=f.title),"desc"in f&&t(7,c=f.desc),"class"in f&&t(8,h=f.class)},[s,l,i,a,o,d,u,c,h,n]}class wa extends P{constructor(e){super(),T(this,e,pa,va,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function rn(r){let e,t;return{c(){e=j("desc"),t=G(r[7])},l(n){e=V(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&128&&$(t,n[7])},d(n){n&&g(e)}}}function sn(r){let e,t;return{c(){e=j("title"),t=G(r[6])},l(n){e=V(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&64&&$(t,n[6])},d(n){n&&g(e)}}}function La(r){let e,t,n,s=r[7]&&rn(r),l=r[6]&&sn(r);return{c(){e=j("svg"),s&&s.c(),t=H(),l&&l.c(),n=j("path"),this.h()},l(i){e=V(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var a=v(e);s&&s.l(a),t=H(),l&&l.l(a),n=V(a,"path",{d:!0,fill:!0}),v(n).forEach(g),a.forEach(g),this.h()},h(){m(n,"d","M12,1C7.59,1 4,4.59 4,9C4,14.57 10.96,22.34 11.26,22.67L12,23.5L12.74,22.67C13.04,22.34 20,14.57 20,9C20,4.59 16.41,1 12,1M12,20.47C9.82,17.86 6,12.54 6,9A6,6 0 0,1 12,3A6,6 0 0,1 18,9C18,12.83 13.75,18.36 12,20.47M11.13,14H12.88V15.75H11.13M12,5A3.5,3.5 0 0,0 8.5,8.5H10.25A1.75,1.75 0 0,1 12,6.75A1.75,1.75 0 0,1 13.75,8.5C13.75,10.26 11.13,10.04 11.13,12.88H12.88C12.88,10.91 15.5,10.69 15.5,8.5A3.5,3.5 0 0,0 12,5Z"),m(n,"fill",r[2]),m(e,"viewBox",r[3]),m(e,"width",r[0]),m(e,"height",r[1]),m(e,"class",r[8]),m(e,"aria-label",r[4]),m(e,"aria-hidden",r[5])},m(i,a){p(i,e,a),s&&s.m(e,null),b(e,t),l&&l.m(e,null),b(e,n)},p(i,[a]){i[7]?s?s.p(i,a):(s=rn(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?l?l.p(i,a):(l=sn(i),l.c(),l.m(e,n)):l&&(l.d(1),l=null),a&4&&m(n,"fill",i[2]),a&8&&m(e,"viewBox",i[3]),a&1&&m(e,"width",i[0]),a&2&&m(e,"height",i[1]),a&256&&m(e,"class",i[8]),a&16&&m(e,"aria-label",i[4]),a&32&&m(e,"aria-hidden",i[5])},i:S,o:S,d(i){i&&g(e),s&&s.d(),l&&l.d()}}}function ya(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:l=n}=e,{color:i="currentColor"}=e,{viewBox:a="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:d=void 0}=e,{title:u=void 0}=e,{desc:c=void 0}=e,{class:h=void 0}=e;return r.$$set=f=>{"size"in f&&t(9,n=f.size),"width"in f&&t(0,s=f.width),"height"in f&&t(1,l=f.height),"color"in f&&t(2,i=f.color),"viewBox"in f&&t(3,a=f.viewBox),"ariaLabel"in f&&t(4,o=f.ariaLabel),"ariaHidden"in f&&t(5,d=f.ariaHidden),"title"in f&&t(6,u=f.title),"desc"in f&&t(7,c=f.desc),"class"in f&&t(8,h=f.class)},[s,l,i,a,o,d,u,c,h,n]}class ka extends P{constructor(e){super(),T(this,e,ya,La,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function ln(r){let e,t;return{c(){e=j("desc"),t=G(r[7])},l(n){e=V(n,"desc",{});var s=v(e);t=q(s,r[7]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&128&&$(t,n[7])},d(n){n&&g(e)}}}function an(r){let e,t;return{c(){e=j("title"),t=G(r[6])},l(n){e=V(n,"title",{});var s=v(e);t=q(s,r[6]),s.forEach(g)},m(n,s){p(n,e,s),b(e,t)},p(n,s){s&64&&$(t,n[6])},d(n){n&&g(e)}}}function Ea(r){let e,t,n,s=r[7]&&ln(r),l=r[6]&&an(r);return{c(){e=j("svg"),s&&s.c(),t=H(),l&&l.c(),n=j("path"),this.h()},l(i){e=V(i,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var a=v(e);s&&s.l(a),t=H(),l&&l.l(a),n=V(a,"path",{d:!0,fill:!0}),v(n).forEach(g),a.forEach(g),this.h()},h(){m(n,"d","M21.41,11.58L12.41,2.58C12.04,2.21 11.53,2 11,2H4A2,2 0 0,0 2,4V11C2,11.53 2.21,12.04 2.59,12.41L3,12.81C3.9,12.27 4.94,12 6,12A6,6 0 0,1 12,18C12,19.06 11.72,20.09 11.18,21L11.58,21.4C11.95,21.78 12.47,22 13,22C13.53,22 14.04,21.79 14.41,21.41L21.41,14.41C21.79,14.04 22,13.53 22,13C22,12.47 21.79,11.96 21.41,11.58M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M10,19H7V22H5V19H2V17H5V14H7V17H10V19Z"),m(n,"fill",r[2]),m(e,"viewBox",r[3]),m(e,"width",r[0]),m(e,"height",r[1]),m(e,"class",r[8]),m(e,"aria-label",r[4]),m(e,"aria-hidden",r[5])},m(i,a){p(i,e,a),s&&s.m(e,null),b(e,t),l&&l.m(e,null),b(e,n)},p(i,[a]){i[7]?s?s.p(i,a):(s=ln(i),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i[6]?l?l.p(i,a):(l=an(i),l.c(),l.m(e,n)):l&&(l.d(1),l=null),a&4&&m(n,"fill",i[2]),a&8&&m(e,"viewBox",i[3]),a&1&&m(e,"width",i[0]),a&2&&m(e,"height",i[1]),a&256&&m(e,"class",i[8]),a&16&&m(e,"aria-label",i[4]),a&32&&m(e,"aria-hidden",i[5])},i:S,o:S,d(i){i&&g(e),s&&s.d(),l&&l.d()}}}function Ca(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:l=n}=e,{color:i="currentColor"}=e,{viewBox:a="0 0 24 24"}=e,{ariaLabel:o=void 0}=e,{ariaHidden:d=void 0}=e,{title:u=void 0}=e,{desc:c=void 0}=e,{class:h=void 0}=e;return r.$$set=f=>{"size"in f&&t(9,n=f.size),"width"in f&&t(0,s=f.width),"height"in f&&t(1,l=f.height),"color"in f&&t(2,i=f.color),"viewBox"in f&&t(3,a=f.viewBox),"ariaLabel"in f&&t(4,o=f.ariaLabel),"ariaHidden"in f&&t(5,d=f.ariaHidden),"title"in f&&t(6,u=f.title),"desc"in f&&t(7,c=f.desc),"class"in f&&t(8,h=f.class)},[s,l,i,a,o,d,u,c,h,n]}class Sa extends P{constructor(e){super(),T(this,e,Ca,Ea,D,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}const Ia={name:"Segmentation",icon:ha,component:Xn,control:ol,usesLabels:!0},Ma={name:"Quick Selection",icon:wa,component:xl,usesLabels:!0},Yn={name:"Classification",icon:Sa,component:yi,usesLabels:!0},Aa={name:"Detection",icon:ka,component:Xn,control:Ai,usesLabels:!0},Ba={name:"SAM",icon:ua,component:aa,control:tl,usesLabels:!0},Pa={name:"Options",icon:_a,component:Pl},at=[Ma,Yn,Ia,Aa,Ba,Pa];function Ta(){const r=fe(at[0]),{subscribe:e,set:t}=r;return{subscribe:e,set:n=>t(n),getName:()=>Q(r).name}}const we=Ta();function Da(r){let e,t,n=r[0].name+"",s;return{c(){e=k("header"),t=k("h2"),s=G(n),this.h()},l(l){e=E(l,"HEADER",{class:!0});var i=v(e);t=E(i,"H2",{});var a=v(t);s=q(a,n),a.forEach(g),i.forEach(g),this.h()},h(){m(e,"class","w-full bg-info py-2 px-3 text-white text-lg flex gap-5 items-center flex-row rounded-t-md justify-center")},m(l,i){p(l,e,i),b(e,t),b(t,s)},p(l,[i]){i&1&&n!==(n=l[0].name+"")&&$(s,n)},i:S,o:S,d(l){l&&g(e)}}}function Na(r,e,t){let n;return F(r,we,s=>t(0,n=s)),[n]}class Ha extends P{constructor(e){super(),T(this,e,Na,Da,D,{})}}function on(r,e,t){const n=r.slice();return n[3]=e[t],n}function cn(r){let e,t,n,s,l,i,a;var o=r[3].icon;function d(c){return{props:{size:c[1]}}}o&&(t=me(o,d(r)));function u(){return r[2](r[3])}return{c(){e=k("button"),t&&M(t.$$.fragment),n=O(),this.h()},l(c){e=E(c,"BUTTON",{class:!0,"aria-label":!0});var h=v(e);t&&N(t.$$.fragment,h),n=z(h),h.forEach(g),this.h()},h(){m(e,"class",s=`btn btn-primary px-2 rounded-none 
			${r[3].name===r[0].name&&"btn-active"}
			`),m(e,"aria-label",r[3].name)},m(c,h){p(c,e,h),t&&A(t,e,null),b(e,n),l=!0,i||(a=x(e,"click",u),i=!0)},p(c,h){if(r=c,o!==(o=r[3].icon)){if(t){K();const f=t;w(f.$$.fragment,1,0,()=>{B(f,1)}),X()}o?(t=me(o,d(r)),M(t.$$.fragment),_(t.$$.fragment,1),A(t,e,n)):t=null}(!l||h&1&&s!==(s=`btn btn-primary px-2 rounded-none 
			${r[3].name===r[0].name&&"btn-active"}
			`))&&m(e,"class",s)},i(c){l||(t&&_(t.$$.fragment,c),l=!0)},o(c){t&&w(t.$$.fragment,c),l=!1},d(c){c&&g(e),t&&B(t),i=!1,a()}}}function Oa(r){let e,t,n=at,s=[];for(let i=0;i<n.length;i+=1)s[i]=cn(on(r,n,i));const l=i=>w(s[i],1,1,()=>{s[i]=null});return{c(){e=k("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=E(i,"DIV",{class:!0});var a=v(e);for(let o=0;o<s.length;o+=1)s[o].l(a);a.forEach(g),this.h()},h(){m(e,"class","col-span-1 bg-slate-100 flex flex-col items-centergap-3")},m(i,a){p(i,e,a);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);t=!0},p(i,[a]){if(a&3){n=at;let o;for(o=0;o<n.length;o+=1){const d=on(i,n,o);s[o]?(s[o].p(d,a),_(s[o],1)):(s[o]=cn(d),s[o].c(),_(s[o],1),s[o].m(e,null))}for(K(),o=n.length;o<s.length;o+=1)l(o);X()}},i(i){if(!t){for(let a=0;a<n.length;a+=1)_(s[a]);t=!0}},o(i){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);t=!1},d(i){i&&g(e),xn(s,i)}}}function za(r,e,t){let n;return F(r,we,i=>t(0,n=i)),[n,Sr,i=>Jn(i)]}class ja extends P{constructor(e){super(),T(this,e,za,Oa,D,{})}}function Va(r){let e,t,n,s,l,i;return{c(){e=k("button"),t=G("Save"),this.h()},l(a){e=E(a,"BUTTON",{class:!0});var o=v(e);t=q(o,"Save"),o.forEach(g),this.h()},h(){m(e,"class",n="w-full bg-action hover:bg-hover py-2 px-3 text-white text-lg flex gap-5 items-center flex-row rounded-b-md justify-center border-b "+(!r[0].saving&&" bg-slate-400 hover:bg-slate-400")),e.disabled=s=!r[0].saving},m(a,o){p(a,e,o),b(e,t),l||(i=x(e,"click",r[1]),l=!0)},p(a,[o]){o&1&&n!==(n="w-full bg-action hover:bg-hover py-2 px-3 text-white text-lg flex gap-5 items-center flex-row rounded-b-md justify-center border-b "+(!a[0].saving&&" bg-slate-400 hover:bg-slate-400"))&&m(e,"class",n),o&1&&s!==(s=!a[0].saving)&&(e.disabled=s)},i:S,o:S,d(a){a&&g(e),l=!1,i()}}}function Ra(r,e,t){let n;return F(r,ee,l=>t(0,n=l)),[n,()=>Wn()]}class Ga extends P{constructor(e){super(),T(this,e,Ra,Va,D,{})}}const qa=He.retrieve(),Fa=async()=>{const r=await fetch(qa+Ae.imagesEndpoint);if(!r.ok)return;const e=await r.json(),t=e.sort((n,s)=>n.name.localeCompare(s.name,navigator.languages[0]||navigator.language,{numeric:!0,ignorePunctuation:!0}));return _t.store(t),e},Ua=async()=>{const r=He.retrieve(),e=await fetch(r+Ae.labelsEndpoint);if(!e.ok)return;const t=await e.json();if(!t.status_code){const{labels:n}=t;n.length&&Wa(n)}},Wa=r=>{for(let t of r)_e.add(t);const e=_e.retrieve();se.store(e[0])},Za=async()=>{await Ua(),Pe.markLabelsAsLoaded(),await Fa(),Pe.markImagesAsLoaded()};function Ja(r,e,t){let n;return F(r,Z,s=>t(0,n=s)),Qn(),pe(()=>{n&&Kn()}),[]}class Qa extends P{constructor(e){super(),T(this,e,Ja,null,D,{})}}let We;function Ka(){We=new IntersectionObserver(r=>{r.forEach(e=>{const t=e.isIntersecting?"enterViewport":"exitViewport";e.target.dispatchEvent(new CustomEvent(t))})})}function Xa(r){return We||Ka(),We.observe(r),{destroy(){We.unobserve(r)}}}function fn(r,e,t){const n=r.slice();return n[12]=e[t],n[14]=t,n}function un(r){let e,t=`${r[1]+1}-${r[1]+ge<r[0].length?r[1]+ge:r[0].length} of ${r[0].length}`,n,s,l,i=[],a=new Map,o,d,u=r[2];const c=h=>h[12].name;for(let h=0;h<u.length;h+=1){let f=fn(r,u,h),y=c(f);a.set(y,i[h]=dn(y,f))}return{c(){e=k("span"),n=G(t),s=O(),l=k("ul");for(let h=0;h<i.length;h+=1)i[h].c();this.h()},l(h){e=E(h,"SPAN",{class:!0,"aria-label":!0});var f=v(e);n=q(f,t),f.forEach(g),s=z(h),l=E(h,"UL",{class:!0,id:!0});var y=v(l);for(let I=0;I<i.length;I+=1)i[I].l(y);y.forEach(g),this.h()},h(){m(e,"class","px-2 text-gray-500 text-sm mt-5 text-right"),m(e,"aria-label","Pagination information"),m(l,"class","flex-1 w-full justify-end max-h-[180px] overflow-y-auto block"),m(l,"id","image-selector")},m(h,f){p(h,e,f),b(e,n),p(h,s,f),p(h,l,f);for(let y=0;y<i.length;y+=1)i[y]&&i[y].m(l,null);o||(d=x(l,"scroll",r[8]),o=!0)},p(h,f){f&3&&t!==(t=`${h[1]+1}-${h[1]+ge<h[0].length?h[1]+ge:h[0].length} of ${h[0].length}`)&&$(n,t),f&28&&(u=h[2],i=mt(i,f,c,1,h,u,a,l,$n,dn,null,fn))},d(h){h&&g(e),h&&g(s),h&&g(l);for(let f=0;f<i.length;f+=1)i[f].d();o=!1,d()}}}function dn(r,e){let t,n,s=e[12].name.split("/").pop()+"",l,i,a,o,d,u;return{key:r,first:null,c(){t=k("li"),n=k("button"),l=G(s),a=O(),this.h()},l(c){t=E(c,"LI",{id:!0});var h=v(t);n=E(h,"BUTTON",{class:!0});var f=v(n);l=q(f,s),f.forEach(g),a=z(h),h.forEach(g),this.h()},h(){m(n,"class",i=`max-h-7 tab ${e[12].name===e[3].name&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`),m(t,"id",o=e[12].name.split("/").pop()),this.first=t},m(c,h){p(c,t,h),b(t,n),b(n,l),b(t,a),d||(u=[x(n,"click",function(){Bt(lt(e[12]))&&lt(e[12]).apply(this,arguments)}),er(Xa.call(null,t)),x(t,"enterViewport",function(){Bt((e[14]===e[2].length-1||e[14]===0)&&e[4](e[14]))&&((e[14]===e[2].length-1||e[14]===0)&&e[4](e[14])).apply(this,arguments)})],d=!0)},p(c,h){e=c,h&4&&s!==(s=e[12].name.split("/").pop()+"")&&$(l,s),h&12&&i!==(i=`max-h-7 tab ${e[12].name===e[3].name&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`)&&m(n,"class",i),h&4&&o!==(o=e[12].name.split("/").pop())&&m(t,"id",o)},d(c){c&&g(t),d=!1,Me(u)}}}function Ya(r){let e,t=r[2].length&&un(r);return{c(){t&&t.c(),e=H()},l(n){t&&t.l(n),e=H()},m(n,s){t&&t.m(n,s),p(n,e,s)},p(n,[s]){n[2].length?t?t.p(n,s):(t=un(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:S,o:S,d(n){t&&t.d(n),n&&g(e)}}}function xa(r,e,t){let n,s,l,i,a;F(r,Se,I=>t(1,l=I)),F(r,_t,I=>t(7,i=I)),F(r,be,I=>t(3,a=I));let{filterInput:o=""}=e;function d(I){I===0&&f(),I!==n.length-1&&I===s.length-1&&u()}function u(){Ge(Se,l+=ge/4,l),t(2,s=n.slice(l,l+ge))}let c=!1;const h=()=>{c=!0};async function f(){if(!c||l===0)return;c=!1;const I=document.getElementById(s[0].name.split("/").pop());Ge(Se,l-=ge/4,l),l<0&&Ge(Se,l=0,l),t(2,s=n.slice(l,l+ge)),await Ne(),I.scrollIntoView({behavior:"instant",block:"start",inline:"nearest"})}const y=()=>h();return r.$$set=I=>{"filterInput"in I&&t(6,o=I.filterInput)},r.$$.update=()=>{r.$$.dirty&192&&t(0,n=i.length?i.filter(I=>I.name.toLowerCase().includes(o.toLowerCase())):[]),r.$$.dirty&64&&o&&Ge(Se,l=0,l),r.$$.dirty&3&&t(2,s=n.slice(l,l+ge))},[n,l,s,a,d,h,o,i,y]}class $a extends P{constructor(e){super(),T(this,e,xa,Ya,D,{filterInput:6})}}function eo(r){let e,t,n,s,l,i,a,o,d;function u(h){r[1](h)}let c={};return r[0]!==void 0&&(c.filterInput=r[0]),t=new $a({props:c}),pn.push(()=>tr(t,"filterInput",u)),{c(){e=k("section"),M(t.$$.fragment),s=O(),l=k("div"),i=k("input"),this.h()},l(h){e=E(h,"SECTION",{class:!0,"aria-label":!0});var f=v(e);N(t.$$.fragment,f),s=z(f),l=E(f,"DIV",{class:!0});var y=v(l);i=E(y,"INPUT",{type:!0,placeholder:!0,class:!0}),y.forEach(g),f.forEach(g),this.h()},h(){m(i,"type","text"),m(i,"placeholder","Filter..."),m(i,"class","input input-bordered rounded-md w-full"),m(l,"class","flex flex-col justify-end mt-5"),m(e,"class","flex flex-1 flex-col w-full justify-end"),m(e,"aria-label","Image selector")},m(h,f){p(h,e,f),A(t,e,null),b(e,s),b(e,l),b(l,i),Ie(i,r[0]),a=!0,o||(d=x(i,"input",r[2]),o=!0)},p(h,[f]){const y={};!n&&f&1&&(n=!0,y.filterInput=h[0],nr(()=>n=!1)),t.$set(y),f&1&&i.value!==h[0]&&Ie(i,h[0])},i(h){a||(_(t.$$.fragment,h),a=!0)},o(h){w(t.$$.fragment,h),a=!1},d(h){h&&g(e),B(t),o=!1,d()}}}function to(r,e,t){let n="";function s(i){n=i,t(0,n)}function l(){n=this.value,t(0,n)}return[n,s,l]}class no extends P{constructor(e){super(),T(this,e,to,eo,D,{})}}const ro=(r,e)=>{r&&(so(r,e)||(io(r,e),et({name:r,color:e}),Bn()))},so=(r,e)=>{const t=_e.retrieve(),n=t.some(l=>l.name===r),s=t.some(l=>l.color===e);return n?(oe.error(`The label "${r}" already exists`),!0):s?(oe.error("A label with this color already exists"),!0):!1},io=(r,e)=>{_e.add({name:r,color:e})};function lo(r){let e,t,n,s,l,i,a,o,d,u;return{c(){e=k("form"),t=k("label"),n=k("input"),s=O(),l=k("div"),i=k("input"),this.h()},l(c){e=E(c,"FORM",{});var h=v(e);t=E(h,"LABEL",{type:!0,name:!0,class:!0});var f=v(t);n=E(f,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0,autocomplete:!0}),s=z(f),l=E(f,"DIV",{class:!0,style:!0});var y=v(l);i=E(y,"INPUT",{type:!0,name:!0,class:!0,style:!0}),y.forEach(g),f.forEach(g),h.forEach(g),this.h()},h(){m(n,"type","text"),m(n,"name","New label"),m(n,"placeholder","New label"),m(n,"class","input input-bordered w-full rounded-none rounded-l-md border-r-0 focus:outline-none focus:placeholder-gray-300 focus:border-gray-600 focus:border-r-0"),m(n,"autocomplete","off"),m(i,"type","color"),m(i,"name","newColor"),m(i,"class","h-auto box-border svelte-1pkjlni"),m(i,"style",a=`opacity: ${r[2]};`),m(l,"class","flex box-border"),m(l,"style",o=`border: 1px solid ${r[1]}; 	border-radius: 0px 6px 6px 0px;`),m(t,"type","text"),m(t,"name","New label"),m(t,"class","flex")},m(c,h){p(c,e,h),b(e,t),b(t,n),Ie(n,r[0]),b(t,s),b(t,l),b(l,i),Ie(i,r[1]),d||(u=[x(n,"input",r[5]),x(i,"input",r[6]),x(e,"submit",rr(r[3]))],d=!0)},p(c,[h]){h&1&&n.value!==c[0]&&Ie(n,c[0]),h&4&&a!==(a=`opacity: ${c[2]};`)&&m(i,"style",a),h&2&&Ie(i,c[1]),h&2&&o!==(o=`border: 1px solid ${c[1]}; 	border-radius: 0px 6px 6px 0px;`)&&m(l,"style",o)},i:S,o:S,d(c){c&&g(e),d=!1,Me(u)}}}function ao(r,e,t){let n,s;F(r,ce,u=>t(4,s=u));let l=Ir,i=Mr;const a=()=>{ro(l,i),t(0,l="")};function o(){l=this.value,t(0,l)}function d(){i=this.value,t(1,i)}return r.$$.update=()=>{r.$$.dirty&16&&t(2,{opacity:n}=s,n)},[l,i,n,a,s,o,d]}class oo extends P{constructor(e){super(),T(this,e,ao,lo,D,{})}}function mn(r){let e,t;return e=new Qa({}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function hn(r){let e,t;return e=new oo({}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function gn(r){let e,t,n;var s=r[1].component;function l(i){return{}}return s&&(e=me(s,l())),{c(){e&&M(e.$$.fragment),t=H()},l(i){e&&N(e.$$.fragment,i),t=H()},m(i,a){e&&A(e,i,a),p(i,t,a),n=!0},p(i,a){if(a&2&&s!==(s=i[1].component)){if(e){K();const o=e;w(o.$$.fragment,1,0,()=>{B(o,1)}),X()}s?(e=me(s,l()),M(e.$$.fragment),_(e.$$.fragment,1),A(e,t.parentNode,t)):e=null}},i(i){n||(e&&_(e.$$.fragment,i),n=!0)},o(i){e&&w(e.$$.fragment,i),n=!1},d(i){i&&g(t),e&&B(e,i)}}}function bn(r){let e,t,n=!r[0].areAnnotationsLoading&&_n(r);return{c(){n&&n.c(),e=H()},l(s){n&&n.l(s),e=H()},m(s,l){n&&n.m(s,l),p(s,e,l),t=!0},p(s,l){s[0].areAnnotationsLoading?n&&(K(),w(n,1,1,()=>{n=null}),X()):n?(n.p(s,l),l&1&&_(n,1)):(n=_n(s),n.c(),_(n,1),n.m(e.parentNode,e))},i(s){t||(_(n),t=!0)},o(s){w(n),t=!1},d(s){n&&n.d(s),s&&g(e)}}}function _n(r){let e,t,n;var s=r[1].control;function l(i){return{}}return s&&(e=me(s,l())),{c(){e&&M(e.$$.fragment),t=H()},l(i){e&&N(e.$$.fragment,i),t=H()},m(i,a){e&&A(e,i,a),p(i,t,a),n=!0},p(i,a){if(a&2&&s!==(s=i[1].control)){if(e){K();const o=e;w(o.$$.fragment,1,0,()=>{B(o,1)}),X()}s?(e=me(s,l()),M(e.$$.fragment),_(e.$$.fragment,1),A(e,t.parentNode,t)):e=null}},i(i){n||(e&&_(e.$$.fragment,i),n=!0)},o(i){e&&w(e.$$.fragment,i),n=!1},d(i){i&&g(t),e&&B(e,i)}}}function co(r){let e,t,n,s,l,i,a,o=!r[0].areImagesLoading&&!r[0].areLabelsLoading&&mn(),d=r[1].usesLabels&&hn(),u=r[1]&&gn(r),c=r[1].control&&bn(r);return i=new no({}),{c(){o&&o.c(),e=O(),t=k("div"),d&&d.c(),n=O(),u&&u.c(),s=O(),c&&c.c(),l=O(),M(i.$$.fragment),this.h()},l(h){o&&o.l(h),e=z(h),t=E(h,"DIV",{class:!0});var f=v(t);d&&d.l(f),n=z(f),u&&u.l(f),s=z(f),c&&c.l(f),l=z(f),N(i.$$.fragment,f),f.forEach(g),this.h()},h(){m(t,"class","col-span-7 p-5 h-full flex flex-col justify-between w-[280px]")},m(h,f){o&&o.m(h,f),p(h,e,f),p(h,t,f),d&&d.m(t,null),b(t,n),u&&u.m(t,null),b(t,s),c&&c.m(t,null),b(t,l),A(i,t,null),a=!0},p(h,[f]){!h[0].areImagesLoading&&!h[0].areLabelsLoading?o?f&1&&_(o,1):(o=mn(),o.c(),_(o,1),o.m(e.parentNode,e)):o&&(K(),w(o,1,1,()=>{o=null}),X()),h[1].usesLabels?d?f&2&&_(d,1):(d=hn(),d.c(),_(d,1),d.m(t,n)):d&&(K(),w(d,1,1,()=>{d=null}),X()),h[1]?u?(u.p(h,f),f&2&&_(u,1)):(u=gn(h),u.c(),_(u,1),u.m(t,s)):u&&(K(),w(u,1,1,()=>{u=null}),X()),h[1].control?c?(c.p(h,f),f&2&&_(c,1)):(c=bn(h),c.c(),_(c,1),c.m(t,l)):c&&(K(),w(c,1,1,()=>{c=null}),X())},i(h){a||(_(o),_(d),_(u),_(c),_(i.$$.fragment,h),a=!0)},o(h){w(o),w(d),w(u),w(c),w(i.$$.fragment,h),a=!1},d(h){o&&o.d(h),h&&g(e),h&&g(t),d&&d.d(),u&&u.d(),c&&c.d(),B(i)}}}function fo(r,e,t){let n,s;return F(r,Pe,l=>t(0,n=l)),F(r,we,l=>t(1,s=l)),[n,s]}class uo extends P{constructor(e){super(),T(this,e,fo,co,D,{})}}function mo(r){let e,t,n,s,l,i,a,o,d,u;return t=new Ha({}),l=new ja({}),a=new uo({}),d=new Ga({}),{c(){e=k("section"),M(t.$$.fragment),n=O(),s=k("div"),M(l.$$.fragment),i=O(),M(a.$$.fragment),o=O(),M(d.$$.fragment),this.h()},l(c){e=E(c,"SECTION",{class:!0,style:!0});var h=v(e);N(t.$$.fragment,h),n=z(h),s=E(h,"DIV",{class:!0});var f=v(s);N(l.$$.fragment,f),i=z(f),N(a.$$.fragment,f),f.forEach(g),o=z(h),N(d.$$.fragment,h),h.forEach(g),this.h()},h(){m(s,"class","grid grid-cols-8 h-full"),m(e,"class","fixed z-20 bg-[#fafdfe] flex flex-col m-6 rounded-md h-full w-[320px]"),W(e,"height","-webkit-fill-available")},m(c,h){p(c,e,h),A(t,e,null),b(e,n),b(e,s),A(l,s,null),b(s,i),A(a,s,null),b(e,o),A(d,e,null),u=!0},p:S,i(c){u||(_(t.$$.fragment,c),_(l.$$.fragment,c),_(a.$$.fragment,c),_(d.$$.fragment,c),u=!0)},o(c){w(t.$$.fragment,c),w(l.$$.fragment,c),w(a.$$.fragment,c),w(d.$$.fragment,c),u=!1},d(c){c&&g(e),B(t),B(l),B(a),B(d)}}}function ho(r,e,t){let n,s;return F(r,Z,l=>t(0,n=l)),F(r,Ar,l=>t(1,s=l)),r.$$.update=()=>{r.$$.dirty&3&&s.url.origin&&n&&Za()},[n,s]}class go extends P{constructor(e){super(),T(this,e,ho,mo,D,{})}}function vn(r){let e;const t=r[5].default,n=ct(t,r,r[4],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,l){n&&n.m(s,l),e=!0},p(s,l){n&&n.p&&(!e||l&16)&&ft(n,t,s,s[4],e?dt(t,s[4],l,null):ut(s[4]),null)},i(s){e||(_(n,s),e=!0)},o(s){w(n,s),e=!1},d(s){n&&n.d(s)}}}function bo(r){let e,t,n=r[0]&&vn(r);return{c(){e=k("div"),n&&n.c(),this.h()},l(s){e=E(s,"DIV",{id:!0,class:!0});var l=v(e);n&&n.l(l),l.forEach(g),this.h()},h(){m(e,"id","map"),m(e,"class","svelte-xoi8de")},m(s,l){p(s,e,l),n&&n.m(e,null),t=!0},p(s,[l]){s[0]?n?(n.p(s,l),l&1&&_(n,1)):(n=vn(s),n.c(),_(n,1),n.m(e,null)):n&&(K(),w(n,1,1,()=>{n=null}),X())},i(s){t||(_(n),t=!0)},o(s){w(n),t=!1},d(s){s&&g(e),n&&n.d()}}}let _o=12;function vo(r,e,t){let n;F(r,Z,c=>t(0,n=c));let{$$slots:s={},$$scope:l}=e,{options:i={attributionControl:!1,drawControls:!0,max_zoom:20}}=e,{zoomPosition:a="bottomright"}=e,{panes:o=[{name:"default",zIndex:200},{name:"sam",zIndex:400}]}=e,d=[42.0407,3.1],u;return De(async()=>{if(!u){const c=await Fe(()=>import("../chunks/leaflet-src.e35a4304.js").then(f=>f.l),[],import.meta.url),{Icon:h}=c;h.Default.imagePath="./",await Fe(()=>import("../chunks/leaflet.draw.45fd9d9b.js"),[],import.meta.url),await Fe(()=>import("../chunks/leaflet.activearea.bef5e9d0.js"),[],import.meta.url),t(1,i.renderer=c.canvas(),i),window.type=!0,u=c.map("map",i).setActiveArea("map-viewport").setView(d,_o),u.zoomControl.setPosition(a),o==null||o.forEach(({name:f,zIndex:y})=>{u.createPane(f),u.getPane(f).style.zIndex=y,u.getPane(f).style.pointerEvents="none"}),Z.store(u)}}),pe(()=>{Z.remove()}),sr("map",{getMap:()=>u}),r.$$set=c=>{"options"in c&&t(1,i=c.options),"zoomPosition"in c&&t(2,a=c.zoomPosition),"panes"in c&&t(3,o=c.panes),"$$scope"in c&&t(4,l=c.$$scope)},[n,i,a,o,l,s]}let po=class extends P{constructor(e){super(),T(this,e,vo,bo,D,{options:1,zoomPosition:2,panes:3})}};function wo(r,e,t){let{url:n}=e,{options:s}=e;const{getMap:l}=ir("map");let i=null;return De(()=>{const a=l();i=L.tileLayer(n,s).addTo(a)}),pe(()=>{i.remove()}),r.$$set=a=>{"url"in a&&t(0,n=a.url),"options"in a&&t(1,s=a.options)},[n,s]}class Lo extends P{constructor(e){super(),T(this,e,wo,null,D,{url:0,options:1})}}function yo(r){let e;return{c(){e=k("div"),this.h()},l(t){e=E(t,"DIV",{class:!0}),v(e).forEach(g),this.h()},h(){m(e,"class","map-viewport")},m(t,n){p(t,e,n)},p:S,i:S,o:S,d(t){t&&g(e)}}}class ko extends P{constructor(e){super(),T(this,e,null,yo,D,{})}}function Eo(r){let e,t;return e=new Lo({props:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:20,zIndex:1}}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p:S,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Co(r){let e,t,n,s,l;return e=new ko({}),s=new po({props:{$$slots:{default:[Eo]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),t=O(),n=k("section"),M(s.$$.fragment),this.h()},l(i){N(e.$$.fragment,i),t=z(i),n=E(i,"SECTION",{class:!0});var a=v(n);N(s.$$.fragment,a),a.forEach(g),this.h()},h(){m(n,"class","w-full h-full")},m(i,a){A(e,i,a),p(i,t,a),p(i,n,a),A(s,n,null),l=!0},p(i,[a]){const o={};a&1&&(o.$$scope={dirty:a,ctx:i}),s.$set(o)},i(i){l||(_(e.$$.fragment,i),_(s.$$.fragment,i),l=!0)},o(i){w(e.$$.fragment,i),w(s.$$.fragment,i),l=!1},d(i){B(e,i),i&&g(t),i&&g(n),B(s)}}}class So extends P{constructor(e){super(),T(this,e,null,Co,D,{})}}function Io(r){let e,t,n,s;return e=new go({}),n=new So({}),{c(){M(e.$$.fragment),t=O(),M(n.$$.fragment)},l(l){N(e.$$.fragment,l),t=z(l),N(n.$$.fragment,l)},m(l,i){A(e,l,i),p(l,t,i),A(n,l,i),s=!0},i(l){s||(_(e.$$.fragment,l),_(n.$$.fragment,l),s=!0)},o(l){w(e.$$.fragment,l),w(n.$$.fragment,l),s=!1},d(l){B(e,l),l&&g(t),B(n,l)}}}function Mo(r){let e,t,n,s,l,i;e=new Ns({}),s=new Os({});let a=Io();return{c(){M(e.$$.fragment),t=O(),n=k("main"),M(s.$$.fragment),l=O(),a&&a.c(),this.h()},l(o){N(e.$$.fragment,o),t=z(o),n=E(o,"MAIN",{class:!0});var d=v(n);N(s.$$.fragment,d),l=z(d),a&&a.l(d),d.forEach(g),this.h()},h(){m(n,"class","min-w-full relative min-h-full")},m(o,d){A(e,o,d),p(o,t,d),p(o,n,d),A(s,n,null),b(n,l),a&&a.m(n,null),i=!0},p:S,i(o){i||(_(e.$$.fragment,o),_(s.$$.fragment,o),_(a),i=!0)},o(o){w(e.$$.fragment,o),w(s.$$.fragment,o),w(a),i=!1},d(o){B(e,o),o&&g(t),o&&g(n),B(s),a&&a.d()}}}class Ho extends P{constructor(e){super(),T(this,e,null,Mo,D,{})}}export{Ho as component};
