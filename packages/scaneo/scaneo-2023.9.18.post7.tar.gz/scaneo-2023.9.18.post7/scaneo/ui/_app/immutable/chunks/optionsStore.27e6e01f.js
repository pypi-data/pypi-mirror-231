import{w as c}from"./singletons.c33b328b.js";import{J as n}from"./index.db2c9008.js";const u={labelsEndpoint:"/labels",geojsonEndpoint:"/geojson",imagesEndpoint:"/images",samEndpoint:"/sam"},m={defaultUrl:"http://localhost:8000",...u};function g(e){const t=c(e),{subscribe:s,set:o}=t;return{subscribe:s,retrieve:()=>n(t),store:r=>o(r)}}const d=g(m.defaultUrl);function p(){const e=c({}),{subscribe:t,set:s}=e;return{subscribe:t,store:o=>s(o),retrieve:()=>n(e)}}const f=p(),y={bands:{red:4,green:3,blue:2},stretch:{minimum:0,maximum:3e3}},b=.3,P="",D="#ff8000",E=22,C="Somethig went wrong...",O="topright",T={loading:"Processing...",success:"Mask generated successfully!"},I={loading:"Processing...",success:"Saved!"},M=.4,A={type:"FeatureCollection",features:[]},F="viridis",q={pane:"default"},B={polyline:!1,circlemarker:!1,circle:!1,marker:{repeatMode:!0},rectangle:!1,polygon:!1},N={polyline:!1,circlemarker:!1,circle:!1,marker:!1,polygon:!1,rectangle:{repeatMode:!0,showArea:!0,showLength:!0,shapeOptions:{weight:1}}},l=0,h=1,U=100,z=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},K=e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):null},j=e=>{const t=L.latLng(e[1],e[0]),s=L.latLng(e[3],e[2]);return L.latLngBounds(t,s)},J=e=>[e.getSouthWest(),e.getSouthEast(),e.getNorthEast(),e.getNorthWest()],W=e=>{const s=e.geometry.coordinates.flat();let o,r;return s.length?[o,r]=s[0]:[o,r]=s,[o,r]},i=e=>{e.preventDefault()},_=()=>{const e=document.querySelector(".blocker");e&&(e.classList.add("z-[999]"),document.addEventListener("keydown",i))},x=()=>{const e=document.querySelector(".blocker");e&&(e.style.opacity="0",setTimeout(()=>{e.classList.remove("z-[999]"),document.removeEventListener("keydown",i)},150))},G=()=>{const e=document.querySelector(".blocker");e&&(e.style.transition="opacity 0.5s ease-in-out",e.style.opacity="0.4")},H=()=>{const e=document.querySelector('[title="Cancel drawing"]');e&&e.click()},R=e=>{const t=f.retrieve().name;return e.getLayers().filter(o=>{var r,a;return((a=(r=o.feature)==null?void 0:r.properties)==null?void 0:a.label)===t})},V=e=>e.map(s=>{const{lat:o,lng:r}=s._latlng;return[r,o]}),Q=e=>e.map(t=>{var s,o;return((o=(s=t.feature)==null?void 0:s.properties)==null?void 0:o.background)===l?l:h}),X=()=>window.confirm("Do you want to save your progress?"),Y=e=>e.charAt(0).toUpperCase()+e.slice(1),Z=()=>{const e=document.querySelector('[title="Cancel editing, discards all changes"]');e&&e.click()},$=(e,t)=>{Object.keys(t).forEach(o=>{e.addLayer(t[o])})},ee=(e,t)=>{Object.keys(t).forEach(o=>{e==null||e.removeLayer(t[o])})},te=async(e,t)=>await fetch(d.retrieve()+t,{method:"POST",headers:{"Content-Type":"application/json"},body:e}),k={...y,opacity:b};function v(){const e=c(k),{subscribe:t,update:s,set:o}=e;return{subscribe:t,bands:{red:{store:r=>s(a=>({...a,bands:{...a.bands,red:r}})),retrieve:()=>n(e).bands.red},green:{store:r=>s(a=>({...a,bands:{...a.bands,green:r}})),retrieve:()=>n(e).bands.green},blue:{store:r=>s(a=>({...a,bands:{...a.bands,blue:r}})),retrieve:()=>n(e).bands.blue}},stretch:{minimum:{store:r=>s(a=>({...a,stretch:{...a.stretch,minimum:r}})),retrieve:()=>n(e).stretch.minimum},maximum:{store:r=>s(a=>({...a,stretch:{...a.stretch,maximum:r}})),retrieve:()=>n(e).stretch.maximum}},opacity:{store:r=>s(a=>({...a,opacity:r})),retrieve:()=>n(e).opacity},retrieve:()=>n(e),setOptions:r=>o(r)}}const se=v();export{U as A,Z as B,R as C,V as D,Q as E,H as F,G,T as H,E as I,P as J,D as K,$ as a,ee as b,J as c,u as d,Y as e,A as f,j as g,f as h,O as i,l as j,F as k,q as l,z as m,W as n,se as o,N as p,M as q,K as r,B as s,_ as t,d as u,te as v,C as w,x,I as y,X as z};
