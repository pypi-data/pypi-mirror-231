import{d as W,T as X,g as Y,r as m,a as w,c as r,U as Z,X as j,$ as G,Y as J,Z as K,l as _,b as R,e as n,w as c,o,i as a,u as e,a0 as ee,h as V,N as se,F as h,a1 as oe,a2 as te,f as d,P as v,a3 as le,a4 as ne,a5 as ae,a6 as ue,a7 as re,a8 as ce,a9 as de,aa as ie,H as fe,q as pe,ab as me}from"./index-191a1ac6.js";import{u as we}from"./usePageTitle-6af76302.js";const _e={class:"flow-runs__list"},Re={class:"flow-runs__list-controls--right"},ge=W({__name:"FlowRuns",setup(ve){const N=X(),i=Y(),k=m(),y=w(i.flowRuns.getFlowRunsCount,[{}]),T=r(()=>y.executed),x=r(()=>y.response===0),f=m(),S=Z(f,1200),{filter:s,isCustomFilter:B}=j({flowRuns:{nameLike:S}}),g=r({get(){return s.flowRuns.parentTaskRunIdNull},set(F){s.flowRuns.parentTaskRunIdNull=F?!0:void 0}}),p={interval:3e4},b=w(i.flowRuns.getFlowRunsCount,[s],p),H=r(()=>b.response),O=w(i.ui.getFlowRunHistory,[s],p),U=r(()=>O.response??[]),{flowRuns:C,subscriptions:M,loadMore:A}=G(s,p),u=m([]),{margin:I}=J(),L=()=>({rootMargin:I.value}),{stuck:q}=K(k,L),D=r(()=>({listControls:{"flow-runs__list-controls--stuck":q.value&&_.md}}));function P(){N.push(me.flowRuns())}const $=()=>{u.value=[],M.refresh(),b.refresh()};return we("Flow Runs"),(F,t)=>{const z=R("p-toggle"),E=R("p-button"),Q=R("p-layout-default");return o(),n(Q,{class:"flow-runs"},{header:c(()=>[a(e(ee))]),default:c(()=>[T.value?(o(),V(h,{key:0},[x.value?(o(),n(e(se),{key:0})):(o(),V(h,{key:1},[a(e(oe)),e(_).md?(o(),n(e(te),{key:0,history:U.value,"start-date":e(s).flowRuns.expectedStartTimeAfter,"end-date":e(s).flowRuns.expectedStartTimeBefore,class:"flow-runs__chart"},null,8,["history","start-date","end-date"])):d("",!0),v("div",_e,[v("div",{ref_key:"listControls",ref:k,class:le(["flow-runs__list-controls",D.value.listControls])},[v("div",Re,[u.value.length==0?(o(),n(e(ne),{key:0,count:H.value,label:"Flow run"},null,8,["count"])):(o(),n(e(ae),{key:1,count:u.value.length},null,8,["count"])),a(e(ue),{selected:u.value,onDelete:$},null,8,["selected"])]),a(z,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=l=>g.value=l),class:"flow-runs__subflows-toggle",append:"Hide subflows"},null,8,["modelValue"]),e(_).md?(o(),n(e(re),{key:0,modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=l=>f.value=l),placeholder:"Search by run name",label:"Search by run name"},null,8,["modelValue"])):d("",!0),a(e(ce),{modelValue:e(s).sort,"onUpdate:modelValue":t[2]||(t[2]=l=>e(s).sort=l),class:"flow-runs__sort"},null,8,["modelValue"])],2),a(e(de),{selected:u.value,"onUpdate:selected":t[3]||(t[3]=l=>u.value=l),selectable:"","flow-runs":e(C),onBottom:e(A)},null,8,["selected","flow-runs","onBottom"]),e(C).length?d("",!0):(o(),n(e(ie),{key:0},fe({_:2},[e(B)?{name:"actions",fn:c(()=>[a(E,{small:"",onClick:P},{default:c(()=>[pe(" Clear Filters ")]),_:1})]),key:"0"}:void 0]),1024))])],64))],64)):d("",!0)]),_:1})}}});export{ge as default};
