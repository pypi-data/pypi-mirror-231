{"ast":null,"code":"import _regeneratorRuntime from\"/home/runner/work/inference/inference/xinference/web/ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/runner/work/inference/inference/xinference/web/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/runner/work/inference/inference/xinference/web/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from\"react\";import ModelCard from\"./modelCard\";import Title from\"../../components/Title\";import{Box,TextField,FormControl}from\"@mui/material\";import{ApiContext}from\"../../components/apiContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LaunchModel=function LaunchModel(){var endPoint=useContext(ApiContext).endPoint;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),registrationData=_useState2[0],setRegistrationData=_useState2[1];var _useContext=useContext(ApiContext),isCallingApi=_useContext.isCallingApi,setIsCallingApi=_useContext.setIsCallingApi;var _useContext2=useContext(ApiContext),isUpdatingModel=_useContext2.isUpdatingModel;// States used for filtering\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchTerm=_useState4[0],setSearchTerm=_useState4[1];var handleChange=function handleChange(event){setSearchTerm(event.target.value);};var filter=function filter(registration){if(!registration||typeof searchTerm!==\"string\")return false;var modelName=registration.model_name?registration.model_name.toLowerCase():\"\";var modelDescription=registration.model_description?registration.model_description.toLowerCase():\"\";if(!modelName.includes(searchTerm.toLowerCase())&&!modelDescription.includes(searchTerm.toLowerCase())){return false;}return true;};var update=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,registrations,newRegistrationData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(isCallingApi||isUpdatingModel)){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:_context2.prev=2;setIsCallingApi(true);_context2.next=6;return fetch(\"\".concat(endPoint,\"/v1/model_registrations/LLM\"),{method:\"GET\"});case 6:response=_context2.sent;_context2.next=9;return response.json();case 9:registrations=_context2.sent;_context2.next=12;return Promise.all(registrations.map(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(registration){var detailResponse;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(endPoint,\"/v1/model_registrations/LLM/\").concat(registration.model_name),{method:\"GET\"});case 2:detailResponse=_context.sent;_context.next=5;return detailResponse.json();case 5:return _context.abrupt(\"return\",_context.sent);case 6:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}()));case 12:newRegistrationData=_context2.sent;setRegistrationData(newRegistrationData);console.log(newRegistrationData);_context2.next=20;break;case 17:_context2.prev=17;_context2.t0=_context2[\"catch\"](2);console.error(\"Error:\",_context2.t0);case 20:_context2.prev=20;setIsCallingApi(false);return _context2.finish(20);case 23:case\"end\":return _context2.stop();}},_callee2,null,[[2,17,20,23]]);}));return function update(){return _ref.apply(this,arguments);};}();useEffect(function(){update();// eslint-disable-next-line\n},[]);var style={display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, minmax(300px, 1fr))\",paddingLeft:\"2rem\",gridGap:\"2rem 0rem\"};return/*#__PURE__*/_jsxs(Box,{m:\"20px\",children:[/*#__PURE__*/_jsx(Title,{title:\"Launch Model\"}),/*#__PURE__*/_jsx(FormControl,{variant:\"outlined\",margin:\"normal\",sx:{width:\"100%\",paddingBottom:\"30px\"},children:/*#__PURE__*/_jsx(TextField,{id:\"search\",type:\"search\",label:\"Search for model name and description\",value:searchTerm,onChange:handleChange,size:\"small\",sx:{width:\"95%\",paddingBottom:\"30px\"}})}),/*#__PURE__*/_jsx(\"div\",{style:style,children:registrationData.filter(function(registration){return filter(registration);}).map(function(filteredRegistration){return/*#__PURE__*/_jsx(ModelCard,{url:endPoint,modelData:filteredRegistration});})})]});};export default LaunchModel;","map":{"version":3,"names":["React","useContext","useState","useEffect","ModelCard","Title","Box","TextField","FormControl","ApiContext","jsx","_jsx","jsxs","_jsxs","LaunchModel","endPoint","_useState","_useState2","_slicedToArray","registrationData","setRegistrationData","_useContext","isCallingApi","setIsCallingApi","_useContext2","isUpdatingModel","_useState3","_useState4","searchTerm","setSearchTerm","handleChange","event","target","value","filter","registration","modelName","model_name","toLowerCase","modelDescription","model_description","includes","update","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","response","registrations","newRegistrationData","wrap","_callee2$","_context2","prev","next","abrupt","fetch","concat","method","sent","json","Promise","all","map","_ref2","_callee","detailResponse","_callee$","_context","stop","_x","apply","arguments","console","log","t0","error","finish","style","display","gridTemplateColumns","paddingLeft","gridGap","m","children","title","variant","margin","sx","width","paddingBottom","id","type","label","onChange","size","filteredRegistration","url","modelData"],"sources":["/home/runner/work/inference/inference/xinference/web/ui/src/scenes/launch_model/index.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport ModelCard from \"./modelCard\";\nimport Title from \"../../components/Title\";\nimport { Box, TextField, FormControl } from \"@mui/material\";\nimport { ApiContext } from \"../../components/apiContext\";\n\nconst LaunchModel = () => {\n  let endPoint = useContext(ApiContext).endPoint;\n  const [registrationData, setRegistrationData] = useState([]);\n  const { isCallingApi, setIsCallingApi } = useContext(ApiContext);\n  const { isUpdatingModel } = useContext(ApiContext);\n\n  // States used for filtering\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  const handleChange = (event) => {\n    setSearchTerm(event.target.value);\n  };\n\n  const filter = (registration) => {\n    if (!registration || typeof searchTerm !== \"string\") return false;\n    const modelName = registration.model_name\n      ? registration.model_name.toLowerCase()\n      : \"\";\n    const modelDescription = registration.model_description\n      ? registration.model_description.toLowerCase()\n      : \"\";\n\n    if (\n      !modelName.includes(searchTerm.toLowerCase()) &&\n      !modelDescription.includes(searchTerm.toLowerCase())\n    ) {\n      return false;\n    }\n    return true;\n  };\n\n  const update = async () => {\n    if (isCallingApi || isUpdatingModel) return;\n\n    try {\n      setIsCallingApi(true);\n\n      const response = await fetch(`${endPoint}/v1/model_registrations/LLM`, {\n        method: \"GET\",\n      });\n\n      const registrations = await response.json();\n\n      const newRegistrationData = await Promise.all(\n        registrations.map(async (registration) => {\n          const detailResponse = await fetch(\n            `${endPoint}/v1/model_registrations/LLM/${registration.model_name}`,\n            {\n              method: \"GET\",\n            }\n          );\n\n          return await detailResponse.json();\n        })\n      );\n\n      setRegistrationData(newRegistrationData);\n      console.log(newRegistrationData);\n    } catch (error) {\n      console.error(\"Error:\", error);\n    } finally {\n      setIsCallingApi(false);\n    }\n  };\n\n  useEffect(() => {\n    update();\n    // eslint-disable-next-line\n  }, []);\n\n  const style = {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fill, minmax(300px, 1fr))\",\n    paddingLeft: \"2rem\",\n    gridGap: \"2rem 0rem\",\n  };\n\n  return (\n    <Box m=\"20px\">\n      <Title title=\"Launch Model\" />\n      <FormControl\n        variant=\"outlined\"\n        margin=\"normal\"\n        sx={{ width: \"100%\", paddingBottom: \"30px\" }}\n      >\n        <TextField\n          id=\"search\"\n          type=\"search\"\n          label=\"Search for model name and description\"\n          value={searchTerm}\n          onChange={handleChange}\n          size=\"small\"\n          sx={{ width: \"95%\", paddingBottom: \"30px\" }}\n        />\n      </FormControl>\n      <div style={style}>\n        {registrationData\n          .filter((registration) => filter(registration))\n          .map((filteredRegistration) => (\n            <ModelCard url={endPoint} modelData={filteredRegistration} />\n          ))}\n      </div>\n    </Box>\n  );\n};\n\nexport default LaunchModel;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}