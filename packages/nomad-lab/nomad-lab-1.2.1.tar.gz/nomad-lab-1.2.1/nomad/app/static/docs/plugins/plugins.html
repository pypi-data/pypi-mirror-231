
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The documentation for NOMAD v1.
">
      
      
        <meta name="author" content="The NOMAD Authors">
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.1">
    
    
      
        <title>How to develop, publish, and install plugins - Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.23b6d78a.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,400i,700%7C&display=fallback">
        <style>:root{--md-text-font:"Titillium Web";--md-code-font:""}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="#2a4cdf" data-md-color-accent="#008a67">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#develop-a-plugin" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://nomad-lab.eu" title="Documentation" class="md-header__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../assets/nomad-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              How to develop, publish, and install plugins
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://nomad-lab.eu" title="Documentation" class="md-nav__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../assets/nomad-logo.png" alt="logo">

    </a>
    Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tutorial.html" class="md-nav__link">
        Tutorial
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          How-to guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="How-to guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          How-to guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          Data Management
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Management" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Data Management
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/upload.html" class="md-nav__link">
        How to upload/publish data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/eln.html" class="md-nav__link">
        How to use ELNs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/explore.html" class="md-nav__link">
        How to explore data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/north.html" class="md-nav__link">
        How to use NORTH
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          Schemas
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Schemas" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Schemas
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schemas/basics.html" class="md-nav__link">
        How to write a schema
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schemas/elns.html" class="md-nav__link">
        How to define ELNs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schemas/base_sections.html" class="md-nav__link">
        How to use base sections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schemas/tabular.html" class="md-nav__link">
        How to define tabular data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schemas/workflows.html" class="md-nav__link">
        How to define workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schemas/hdf5.html" class="md-nav__link">
        How to reference hdf5
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_3">
          Programming interfaces
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Programming interfaces" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Programming interfaces
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../apis/api.html" class="md-nav__link">
        How to use the API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../apis/pythonlib.html" class="md-nav__link">
        How to install nomad-lab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../apis/archive_query.html" class="md-nav__link">
        How to access processed data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../apis/local_parsers.html" class="md-nav__link">
        How to run a parser
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4">
          Plugins
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Plugins" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Plugins
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          How to develop, publish, and install plugins
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="plugins.html" class="md-nav__link md-nav__link--active">
        How to develop, publish, and install plugins
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#develop-a-plugin" class="md-nav__link">
    Develop a plugin
  </a>
  
    <nav class="md-nav" aria-label="Develop a plugin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#plugin-anatomy" class="md-nav__link">
    Plugin anatomy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plugin-code" class="md-nav__link">
    Plugin code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plugin-metadata" class="md-nav__link">
    Plugin metadata
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publish-a-plugin" class="md-nav__link">
    Publish a plugin
  </a>
  
    <nav class="md-nav" aria-label="Publish a plugin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-github-project" class="md-nav__link">
    Create a (GitHub) project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#different-forms-of-plugin-distribution" class="md-nav__link">
    Different forms of plugin distribution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pypipip-package" class="md-nav__link">
    PyPI/pip package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-your-plugin" class="md-nav__link">
    Register your plugin
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-plugin-to-your-nomad" class="md-nav__link">
    Add a plugin to your NOMAD
  </a>
  
    <nav class="md-nav" aria-label="Add a plugin to your NOMAD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#built-in-plugins" class="md-nav__link">
    Built-in plugins
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-to-python-path" class="md-nav__link">
    Add to Python path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mount-into-a-nomad-oasis" class="md-nav__link">
    Mount into a NOMAD Oasis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-pypipip-package" class="md-nav__link">
    Install PyPI/pip package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="schemas.html" class="md-nav__link">
        How to write schema plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="parsers.html" class="md-nav__link">
        How to write parser plugins
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_5">
          Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Development" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../develop/setup.html" class="md-nav__link">
        How to get started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../develop/code.html" class="md-nav__link">
        How to navigate the code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../develop/contrib.html" class="md-nav__link">
        How to contribute
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../develop/guides.html" class="md-nav__link">
        Code guidelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../develop/search.html" class="md-nav__link">
        How to extend the search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../develop/parsers.html" class="md-nav__link">
        How to write a parser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../develop/normalizers.html" class="md-nav__link">
        How to write a normalizer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6" type="checkbox" id="__nav_3_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_6">
          Oasis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Oasis" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Oasis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../oasis/install.html" class="md-nav__link">
        How to install an Oasis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../oasis/customize.html" class="md-nav__link">
        How to customize an Oasis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../oasis/migrate.html" class="md-nav__link">
        How to migrate Oasis versions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../oasis/admin.html" class="md-nav__link">
        Administrative tasks
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Learn
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Learn" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Learn
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../learn/basics.html" class="md-nav__link">
        From files to data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../learn/data.html" class="md-nav__link">
        Structured data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../learn/architecture.html" class="md-nav__link">
        Architecture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../learn/oasis.html" class="md-nav__link">
        Why you need an Oasis
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/config.html" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/annotations.html" class="md-nav__link">
        Schema annotations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/cli.html" class="md-nav__link">
        Command Line Interface (CLI)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/plugins.html" class="md-nav__link">
        Built-in plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/parsers.html" class="md-nav__link">
        Supported parsers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/glossary.html" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#develop-a-plugin" class="md-nav__link">
    Develop a plugin
  </a>
  
    <nav class="md-nav" aria-label="Develop a plugin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#plugin-anatomy" class="md-nav__link">
    Plugin anatomy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plugin-code" class="md-nav__link">
    Plugin code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plugin-metadata" class="md-nav__link">
    Plugin metadata
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publish-a-plugin" class="md-nav__link">
    Publish a plugin
  </a>
  
    <nav class="md-nav" aria-label="Publish a plugin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-github-project" class="md-nav__link">
    Create a (GitHub) project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#different-forms-of-plugin-distribution" class="md-nav__link">
    Different forms of plugin distribution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pypipip-package" class="md-nav__link">
    PyPI/pip package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-your-plugin" class="md-nav__link">
    Register your plugin
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-plugin-to-your-nomad" class="md-nav__link">
    Add a plugin to your NOMAD
  </a>
  
    <nav class="md-nav" aria-label="Add a plugin to your NOMAD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#built-in-plugins" class="md-nav__link">
    Built-in plugins
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-to-python-path" class="md-nav__link">
    Add to Python path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mount-into-a-nomad-oasis" class="md-nav__link">
    Mount into a NOMAD Oasis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-pypipip-package" class="md-nav__link">
    Install PyPI/pip package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

  <h1>How to develop, publish, and install plugins</h1>

<p>Plugins allow you to add Python-based functionality to NOMAD without a custom build
NOMAD image or release. Plugins can be installed at NOMAD start-up time. Therefore, you can
configure each NOMAD (Oasis) with a different custom set of plugins or disable unnecessary
plugins.</p>
<p>We support different kinds of plugins:</p>
<ul>
<li>Python <strong>schema</strong></li>
<li><strong>parser</strong></li>
<li><strong>normalizer</strong> (coming soon...)</li>
<li>additional custom <strong>APIs</strong> (coming soon...)</li>
</ul>
<h2 id="develop-a-plugin">Develop a plugin<a class="headerlink" href="#develop-a-plugin" title="Permanent link">&para;</a></h2>
<p>We provide template projects on GitHub. You can fork these projects and follow the
instructions in their <code>README.md</code>. These instructions will give you everything you
need to run and test your plugin as a plugin developer.
The following sections here contain more background information and explain how to
add plugins to a NOMAD installation.</p>
<ul>
<li><a href="https://github.com/nomad-coe/nomad-schema-plugin-example">schema plugin</a></li>
<li><a href="https://github.com/nomad-coe/nomad-parser-plugin-example">parser plugin</a></li>
</ul>
<h3 id="plugin-anatomy">Plugin anatomy<a class="headerlink" href="#plugin-anatomy" title="Permanent link">&para;</a></h3>
<p>A plugin usually consist of the <em>plugin code</em> (a Python package) and
<em>plugin metadata</em>. The installation independent <em>plugin metadata</em> (e.g. name, description, python package, etc.)
can be defined in a <code>nomad_plugin.yaml</code> that is part of the <em>plugin code</em>.
The installation dependent <em>plugin metadata</em> (e.g. plugin key, order and priority, parser matching rules, etc.)
is added to the <code>nomad.yaml</code> of the NOMAD installation.</p>
<p>Here is the project layout of the schema example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>my-nomad-schema
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>├── nomadschemaexample
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>│   ├── __init__.py
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>│   ├── nomad_plugin.yaml
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>│   └── schema.py
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>├── tests
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>│   ├── data
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>│   │   └── test.archive.yaml
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>│   └── test_schema.py
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>├── LICENSE
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>├── README.md
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>├── nomad.yaml
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>└── requirements.txt
</code></pre></div>
<h3 id="plugin-code">Plugin code<a class="headerlink" href="#plugin-code" title="Permanent link">&para;</a></h3>
<p>The directory <code>nomadschemaexample</code> is our Python package <em>plugin code</em>. In this case,
it contains a simple <code>schema.py</code>. Read the <a href="schemas.html">Schema plugin documentation</a>
for more details:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span> <span class="nn">nomad.metainfo</span> <span class="kn">import</span> <span class="n">Quantity</span><span class="p">,</span> <span class="n">Package</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kn">from</span> <span class="nn">nomad.datamodel.data</span> <span class="kn">import</span> <span class="n">EntryData</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="kn">from</span> <span class="nn">nomad.datamodel.metainfo.annotations</span> <span class="kn">import</span> <span class="n">ELNAnnotation</span><span class="p">,</span> <span class="n">ELNComponentEnum</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="n">m_package</span> <span class="o">=</span> <span class="n">Package</span><span class="p">()</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="k">class</span> <span class="nc">ExampleSection</span><span class="p">(</span><span class="n">EntryData</span><span class="p">):</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">Quantity</span><span class="p">(</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>        <span class="n">a_eln</span><span class="o">=</span><span class="n">ELNAnnotation</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="n">ELNComponentEnum</span><span class="o">.</span><span class="n">StringEditQuantity</span><span class="p">))</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>    <span class="n">message</span> <span class="o">=</span> <span class="n">Quantity</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>    <span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">archive</span><span class="p">,</span> <span class="n">logger</span><span class="p">):</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">ExampleSection</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">archive</span><span class="p">,</span> <span class="n">logger</span><span class="p">)</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;ExampleSection.normalize called&#39;</span><span class="p">)</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Hello </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">!&#39;</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="n">m_package</span><span class="o">.</span><span class="n">__init_metainfo__</span><span class="p">()</span>
</code></pre></div>
<h3 id="plugin-metadata">Plugin metadata<a class="headerlink" href="#plugin-metadata" title="Permanent link">&para;</a></h3>
<p>The file <code>nomad_plugin.yaml</code> contains the installation independent <em>plugin metadata</em>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">plugin_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">schema</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NOMAD&#39;s example schema plugin</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="no">This is a simple hello world schema. This is meant as a template.</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">  </span><span class="no">Fork the github project to create your own schemas.</span>
</code></pre></div>
<p>The metadata contains the <code>plugin_type</code> (e.g. <code>schema</code> or <code>parser</code>). The rest of the
yaml will depend on the type and the underlying metadata model. For schemas there are only
descriptive metadata like <code>name</code> or <code>description</code> as schemas do not contain any technical
metadata that is necessary to use them. See below for a reference of the <em>plugin metadata</em>
models.</p>
<p>The file <code>nomad.yaml</code> shows how to add the plugin to a nomad installation. As a plugin
developer you have <a href="../apis/pythonlib.html">installed our Python package</a> and can run the <code>nomad parse</code>
command as your "installation" to try your schema:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">normalize</span><span class="p">:</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="nt">normalizers</span><span class="p">:</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="nt">include</span><span class="p">:</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MetainfoNormalizer</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="nt">plugins</span><span class="p">:</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">  </span><span class="c1"># We only include our schema here. Without the explicit include, all plugins will be</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">  </span><span class="c1"># loaded. Many build in plugins require more dependencies. Install nomad-lab[parsing]</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">  </span><span class="c1"># to make all default plugins work.</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">  </span><span class="nt">include</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;schemas/example&#39;</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">  </span><span class="nt">options</span><span class="p">:</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">    </span><span class="nt">schemas/example</span><span class="p">:</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">      </span><span class="nt">python_package</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nomadschemaexample</span>
</code></pre></div>
<p>Plugins are defined under the <code>plugins</code> key. This consists of <code>include</code> (or <code>exclude</code>) to
select a subset of all plugins defined under <code>options</code>. The <code>options</code> given in the
<code>nomad.yaml</code> will be merged with all the default "plugins" that come with NOMAD (mostly the NOMAD parsers at the moment).</p>
<p>In this example, we disable all default plugins by just including our <code>schemas/example</code>.
The <code>options</code> field can be used to add define the <em>code</em> and installation independent <em>metadata</em>
via the <code>python_package</code> key. But you can overwrite or add more <em>metadata</em> keys here as well:
each <code>options</code> entry with <code>python_package</code> will be merged with the data in the package's
<code>nomad_plugin.yaml</code>.</p>
<p>Please note that <code>python_package</code> is the name of a Python package and not a path to the
code. This also means that the package has to be in your <code>PYTHONPATH</code> (see below).</p>
<p>Now follow the instructions for one of our examples and try for yourself:</p>
<ul>
<li><a href="https://github.com/nomad-coe/nomad-schema-plugin-example">schema plugin</a></li>
<li><a href="https://github.com/nomad-coe/nomad-parser-plugin-example">parser plugin</a></li>
</ul>
<h2 id="publish-a-plugin">Publish a plugin<a class="headerlink" href="#publish-a-plugin" title="Permanent link">&para;</a></h2>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>The processes around publishing plugins and using plugins of others are still
worked on. The "best" practices mentioned here are preliminary.</p>
</div>
<h3 id="create-a-github-project">Create a (GitHub) project<a class="headerlink" href="#create-a-github-project" title="Permanent link">&para;</a></h3>
<p>If you forked from our examples, you already have a GitHub project. Otherwise, you
should create one. This allows others to get your plugin sources or initiate communication
via issues or pull requests.</p>
<p>These are good names for plugin projects, depending on if you maintain one or more
plugins in a project (a project can contain multiple modules with multiple
<code>nomad-plugin.yaml</code> files and therefore multiple plugins):</p>
<ul>
<li>nomad-&lt;yourname&gt;-plugin</li>
<li>nomad-&lt;yourname&gt;-plugins</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you develop a plugin in the context of <strong>FAIRmat</strong> or the <strong>NOMAD CoE</strong>, put your
plugin projects in the respective GitHub organization for <a href="https://github.com/fairmat-nfdi">FAIRmat</a>
and the <a href="https://github.com/nomad-coe">NOMAD CoE</a>. Here, the naming convention above is binding.</p>
</div>
<p>Your plugin projects should follow the layout of our example projects.</p>
<h3 id="different-forms-of-plugin-distribution">Different forms of plugin distribution<a class="headerlink" href="#different-forms-of-plugin-distribution" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>source code</strong>: Mounting plugin code into a NOMAD (Oasis) installation. This is described above and only
the plugin source code is needed.</li>
<li><strong>built-in</strong>: Plugins that are directly maintained by NOMAD as distributed as part of
the NOMAD docker images. The Python code for those plugins is already installed, you only need
to configure NOMAD to use the plugins (or not).</li>
<li><strong>PyPI/pip package</strong>: Plugin projects can be published as PyPI/pip packages. Those
packages can then be installed either during NOMAD start-up (not implemented yet) or
when building a customized docker images (see <a href="#pypipip-package">below</a>).</li>
</ul>
<p>Independent of the form of distribution, you'll still need to add the plugin to
your configuration as explained above.</p>
<h3 id="pypipip-package">PyPI/pip package<a class="headerlink" href="#pypipip-package" title="Permanent link">&para;</a></h3>
<p>Learn from the PyPI documentation how to <a href="https://packaging.python.org/en/latest/tutorials/packaging-projects/">create a package for PyPI</a>.
We recommend to use the <code>pyproject.toml</code>-based approach. Here is an example <code>pyproject.toml</code> file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">[build-system]</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;setuptools&quot;</span><span class="p">]</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;setuptools.build_meta&quot;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="k">[project]</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;nomad-schema-plugin-example&#39;</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;1.0&#39;</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;An example schema plugin for NOMAD.&#39;</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="n">readme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;README.md&quot;</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="n">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;The NOMAD Authors&quot;</span><span class="w"> </span><span class="p">}]</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="n">license</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Apache-2.0&quot;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">    </span><span class="s">&quot;nomad-lab&gt;=1.2.0&quot;</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="p">]</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="k">[project.urls]</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="n">homepage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://github.com/nomad-coe/nomad-schema-example-plugin&quot;</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="k">[project.optional-dependencies]</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="n">tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="w">    </span><span class="s">&#39;pytest&#39;</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="p">]</span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="k">[tool.setuptools.packages.find]</span>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="n">include</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;nomadschemaexample*&quot;</span><span class="p">]</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a><span class="k">[tool.setuptools.package-data]</span>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="n">nomadschemaexample</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&#39;*/nomad_plugin.yaml&#39;</span><span class="p">]</span>
</code></pre></div>
<p>The package can be build like this:
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>pip install build
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>python -m build --sdist
</code></pre></div></p>
<p>Learn from the PyPI documentation how to <a href="https://packaging.python.org/en/latest/tutorials/packaging-projects/#uploading-the-distribution-archives">publish a package to PyPI</a>.
If you have access to the MPCDF GitLab and NOMAD's presence there, you can also
use the <code>nomad-FAIR</code> registry:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>pip install twine
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>twine upload \
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    -u &lt;username&gt; -p &lt;password&gt; \
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    --repository-url https://gitlab.mpcdf.mpg.de/api/v4/projects/2187/packages/pypi \
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    dist/nomad-example-schema-plugin-*.tar.gz
</code></pre></div>
<h3 id="register-your-plugin">Register your plugin<a class="headerlink" href="#register-your-plugin" title="Permanent link">&para;</a></h3>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>This is work in progress. We plan to provide a plugin registry that allows you to
publish your plugin's <em>metadata</em>. This will then be used to simplify plugin management
within a NOMAD installation.</p>
<p>The built-in plugins can already be found in the <a href="../reference/plugins.html">documentation reference</a>.</p>
</div>
<h2 id="add-a-plugin-to-your-nomad">Add a plugin to your NOMAD<a class="headerlink" href="#add-a-plugin-to-your-nomad" title="Permanent link">&para;</a></h2>
<p>Adding a plugin, depends on the form of plugin distribution and how you run NOMAD.
Eventually, you need to add the <em>plugin metadata</em> to <code>nomad.yaml</code> (see above) and you need
to add the <em>plugin code</em> to the <code>PYTHONPATH</code>. The <code>nomad.yaml</code> needs to be
edited manually in the usual ways. There are several ways to add <em>plugin code</em>.</p>
<h3 id="built-in-plugins">Built-in plugins<a class="headerlink" href="#built-in-plugins" title="Permanent link">&para;</a></h3>
<p>Those are already part of the NOMAD sources or NOMAD docker images. You only need
to configure them in your <code>nomad.yaml</code>.</p>
<h3 id="add-to-python-path">Add to Python path<a class="headerlink" href="#add-to-python-path" title="Permanent link">&para;</a></h3>
<p>When you run NOMAD as a developer, simply add the plugin directory to the <code>PYTHONPATH</code> environment variable.
When you start the application (e.g. <code>nomad admin run appworker</code>), Python will find your code when NOMAD
imports the <code>python_package</code> given in the <code>plugins.options</code> of your <code>nomad.yaml</code>.</p>
<h3 id="mount-into-a-nomad-oasis">Mount into a NOMAD Oasis<a class="headerlink" href="#mount-into-a-nomad-oasis" title="Permanent link">&para;</a></h3>
<p>The NOMAD docker image adds the folder <code>/app/plugins</code> to the <code>PYTHONPATH</code>. You simply have
to add the <em>plugin metadata</em> to your Oasis' <code>nomad.yaml</code> and mount your code into the <code>/app/plugins</code>
directory via the volumes section of the <code>app</code> and <code>worker</code> services in your <code>docker-compose.yaml</code>.</p>
<p>For example, you can do this by adding an extension to the <code>docker-compose.yaml</code>, e.g. a file called
<code>docker-compose.plugins.yaml</code>. Assuming you cloned the example plugins above into the Oasis folder as
<code>./nomad-schema-plugin-example</code> and <code>./nomad-parser-plugin-example</code>,
your <code>docker-compose.plugins.yaml</code> should look like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nt">services</span><span class="p">:</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">  </span><span class="nt">worker</span><span class="p">:</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./nomad-schema-plugin-example/nomadschemaexample:/app/plugins/nomadschemaexample</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./nomad-parser-plugin-example/nomadparserexample:/app/plugins/nomadparserexample</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">  </span><span class="nt">app</span><span class="p">:</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./nomad-schema-plugin-example/nomadschemaexample:/app/plugins/nomadschemaexample</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./nomad-parser-plugin-example/nomadparserexample:/app/plugins/nomadparserexample</span>
</code></pre></div>
<p>You have to tell docker that there are now two compose files. This can be done via the
<code>COMPOSE_FILE</code> environment variable. This is how you can start the Oasis with the plugins:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">COMPOSE_FILE</span><span class="o">=</span>docker-compose.yaml:docker-compose.plugins.yaml
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
<p>Here is a complete Oasis setup <a href="../assets/nomad-oasis-with-plugins.zip">nomad-oasis-with-plugins.zip</a>.
Simply download, extract, and start like any other Oasis:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>unzip<span class="w"> </span>nomad-oasis-with-plugins.zip
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="nb">cd</span><span class="w"> </span>nomad-oasis-with-plugins
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span><span class="m">1000</span><span class="w"> </span>.volumes
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span><span class="m">1000</span><span class="w"> </span>nomad-schema-plugin-example
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>sudo<span class="w"> </span>chown<span class="w"> </span>-R<span class="w"> </span><span class="m">1000</span><span class="w"> </span>nomad-parser-plugin-example
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="nb">export</span><span class="w"> </span><span class="nv">COMPOSE_FILE</span><span class="o">=</span>docker-compose.yaml:docker-compose.plugins.yaml
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>docker<span class="w"> </span>compose<span class="w"> </span>pull
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>curl<span class="w"> </span>localhost/nomad-oasis/alive
</code></pre></div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>It is important to set up the correct user rights for your volumes and
plugins. Our default <code>docker-compose</code> setup uses the user <code>1000</code> in group
<code>1000</code> to run the services, this is the reason for the <code>chown</code> commands
above that ensure that the processes have access to the data stored in
volumes and in the plugins. If you use another user/group to run the docker
services, update the commands accordingly.</p>
</div>
<p>Read the <a href="../oasis/install.html">Oasis install guide</a> for more details.</p>
<h3 id="install-pypipip-package">Install PyPI/pip package<a class="headerlink" href="#install-pypipip-package" title="Permanent link">&para;</a></h3>
<p>If the plugin is published on PyPI, you can simply install it with pip. If the
plugin was published to our MPCDF GitLab registry, you have to use the <code>--index-url</code>
parameter:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>pip install nomad-example-schema-plugin --index-url https://gitlab.mpcdf.mpg.de/api/v4/projects/2187/packages/pypi/simple
</code></pre></div>
<p>Installing via pip works for NOMAD developers, but how to pip install into an Oasis?
The package could either be installed when NOMAD is started or via
a customized docker image.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>We still need to implement that configured plugins, if not already installed,
get automatically installed during NOMAD start.</p>
</div>
<p>You can build a custom NOMAD docker image that has your packages already installed.
Here is an example <code>Dockerfile</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">gitlab-registry.mpcdf.mpg.de/nomad-lab/nomad-fair:latest</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>build
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="k">COPY</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">    </span>nomadschemaexample<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">    </span>tests<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">    </span>README.md<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">    </span>LICENSE<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">    </span>pyproject.toml<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="w">    </span>.
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="k">RUN</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>build<span class="w"> </span>--sdist
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>dist/nomad-schema-plugin-example-*.tar.gz
</code></pre></div>
<p>The image can be build like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>docker build -t nomad-with-plugins .
</code></pre></div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../apis/local_parsers.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: How to run a parser" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              How to run a parser
            </div>
          </div>
        </a>
      
      
        
        <a href="schemas.html" class="md-footer__link md-footer__link--next" aria-label="Next: How to write schema plugins" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              How to write schema plugins
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.c7dec7e7.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.da79ceb7.min.js"></script>
      
        <script src="../javascript.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>